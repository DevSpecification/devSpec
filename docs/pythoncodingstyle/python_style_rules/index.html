<!doctype html><html lang=zh class=no-js>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=generator content="Hugo 0.88.0"><meta name=ROBOTS content="NOINDEX, NOFOLLOW">
<link rel="shortcut icon" href=/favicons/favicon.ico>
<link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180>
<link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16>
<link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32>
<link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36>
<link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48>
<link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72>
<link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96>
<link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144>
<link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192>
<title>Python风格规范 | 开发规范</title>
<meta name=description content="分号

Tip: 不要在行尾加分号, 也不要用分号将两条命令放在同一行.

行长度

Tip: 每行不超过80个字符

例外:


长的导入模块语句


注释里的URL,路径以及其他的一些长标记


不便于换行，不包含空格的模块级字符串常量，比如url或者路径


Pylint 禁用注释.（例如： …">
<meta property="og:title" content="Python风格规范">
<meta property="og:description" content="分号  Tip: 不要在行尾加分号, 也不要用分号将两条命令放在同一行.
 行长度  Tip: 每行不超过80个字符
 例外:
  长的导入模块语句
  注释里的URL,路径以及其他的一些长标记
  不便于换行，不包含空格的模块级字符串常量，比如url或者路径
  Pylint 禁用注释.（例如：``# pylint: disable=invalid-name）     除非是在 with 语句需要三个以上的上下文管理器的情况下，否则不要使用反斜杠连接行.
Python会将 圆括号, 中括号和花括号中的行隐式的连接起来 , 你可以利用这个特点. 如果需要, 你可以在表达式外围增加一对额外的圆括号.
# Yes:  foo_bar(self, width, height, color='black', design=None, x='foo', emphasis=None, highlight=0) if (width == 0 and height == 0 and color == 'red' and emphasis == 'strong'): 如果一个文本字符串在一行放不下, 可以使用圆括号来实现隐式行连接:">
<meta property="og:type" content="article">
<meta property="og:url" content="/docs/pythoncodingstyle/python_style_rules/"><meta property="article:section" content="docs">
<meta property="article:modified_time" content="2021-09-12T18:19:36+08:00"><meta property="og:site_name" content="开发规范">
<meta itemprop=name content="Python风格规范">
<meta itemprop=description content="分号  Tip: 不要在行尾加分号, 也不要用分号将两条命令放在同一行.
 行长度  Tip: 每行不超过80个字符
 例外:
  长的导入模块语句
  注释里的URL,路径以及其他的一些长标记
  不便于换行，不包含空格的模块级字符串常量，比如url或者路径
  Pylint 禁用注释.（例如：``# pylint: disable=invalid-name）     除非是在 with 语句需要三个以上的上下文管理器的情况下，否则不要使用反斜杠连接行.
Python会将 圆括号, 中括号和花括号中的行隐式的连接起来 , 你可以利用这个特点. 如果需要, 你可以在表达式外围增加一对额外的圆括号.
# Yes:  foo_bar(self, width, height, color='black', design=None, x='foo', emphasis=None, highlight=0) if (width == 0 and height == 0 and color == 'red' and emphasis == 'strong'): 如果一个文本字符串在一行放不下, 可以使用圆括号来实现隐式行连接:">
<meta itemprop=dateModified content="2021-09-12T18:19:36+08:00">
<meta itemprop=wordCount content="2613">
<meta itemprop=keywords content><meta name=twitter:card content="summary">
<meta name=twitter:title content="Python风格规范">
<meta name=twitter:description content="分号  Tip: 不要在行尾加分号, 也不要用分号将两条命令放在同一行.
 行长度  Tip: 每行不超过80个字符
 例外:
  长的导入模块语句
  注释里的URL,路径以及其他的一些长标记
  不便于换行，不包含空格的模块级字符串常量，比如url或者路径
  Pylint 禁用注释.（例如：``# pylint: disable=invalid-name）     除非是在 with 语句需要三个以上的上下文管理器的情况下，否则不要使用反斜杠连接行.
Python会将 圆括号, 中括号和花括号中的行隐式的连接起来 , 你可以利用这个特点. 如果需要, 你可以在表达式外围增加一对额外的圆括号.
# Yes:  foo_bar(self, width, height, color='black', design=None, x='foo', emphasis=None, highlight=0) if (width == 0 and height == 0 and color == 'red' and emphasis == 'strong'): 如果一个文本字符串在一行放不下, 可以使用圆括号来实现隐式行连接:">
<link href=/scss/main.css rel=stylesheet>
<script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script>
</head>
<body class=td-page>
<header>
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
<a class=navbar-brand href=/>
<span class=navbar-logo><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class="text-uppercase font-weight-bold">开发规范</span>
</a>
<div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar>
<ul class="navbar-nav mt-2 mt-lg-0">
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class="nav-link active" href=/docs/><span class=active>开发规范</span></a>
</li>
</ul>
</div>
<div class="navbar-nav d-none d-lg-block">
<input type=search class="form-control td-search-input" placeholder="&#xf002; 站内搜索…" aria-label=站内搜索… autocomplete=off>
</div>
</nav>
</header>
<div class="container-fluid td-outer">
<div class=td-main>
<div class="row flex-xl-nowrap">
<aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
<div id=td-sidebar-menu class=td-sidebar__inner>
<form class="td-sidebar__search d-flex align-items-center">
<input type=search class="form-control td-search-input" placeholder="&#xf002; 站内搜索…" aria-label=站内搜索… autocomplete=off>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation">
</button>
</form>
<nav class="collapse td-sidebar-nav" id=td-section-nav>
<ul class="td-sidebar-nav__section pr-md-3 ul-0">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li>
<a href=/docs/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>开发规范</span></a>
<ul class=ul-1>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsoverview-li>
<a href=/docs/overview/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsoverview><span>总览</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docspythoncodingstyle-li>
<a href=/docs/pythoncodingstyle/ title=Python编码规范指南 class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docspythoncodingstyle><span>Python编码协作规范</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspythoncodingstylepython_ide_settings-li>
<a href=/docs/pythoncodingstyle/python_ide_settings/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docspythoncodingstylepython_ide_settings><span>Python集成开发环境/编辑工具代码检查插件设置</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspythoncodingstylepython_language_rules-li>
<a href=/docs/pythoncodingstyle/python_language_rules/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docspythoncodingstylepython_language_rules><span>Python语言规范</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docspythoncodingstylepython_style_rules-li>
<a href=/docs/pythoncodingstyle/python_style_rules/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-docspythoncodingstylepython_style_rules><span class=td-sidebar-nav-active-item>Python风格规范</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docscodestandards-li>
<a href=/docs/codestandards/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscodestandards><span>编码协作规范</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscodestandardsgitflow-li>
<a href=/docs/codestandards/gitflow/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscodestandardsgitflow><span>Git工作流</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscodestandardscodereview-li>
<a href=/docs/codestandards/codereview/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscodestandardscodereview><span>代码审阅</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscodestandardsversion-li>
<a href=/docs/codestandards/version/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscodestandardsversion><span>发行和版本控制</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscodestandardslog-li>
<a href=/docs/codestandards/log/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscodestandardslog><span>日志</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscodestandardscomment-li>
<a href=/docs/codestandards/comment/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscodestandardscomment><span>注释</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscodestandardstest-li>
<a href=/docs/codestandards/test/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscodestandardstest><span>测试</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsprojectmanagementstandards-li>
<a href=/docs/projectmanagementstandards/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsprojectmanagementstandards><span>项目管理标准</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsprojectmanagementstandardsteamculture-li>
<a href=/docs/projectmanagementstandards/teamculture/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsprojectmanagementstandardsteamculture><span>团队文化</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsprojectmanagementstandardsteamarchitecture-li>
<a href=/docs/projectmanagementstandards/teamarchitecture/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsprojectmanagementstandardsteamarchitecture><span>团队架构</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsprojectmanagementstandardsdevmethod-li>
<a href=/docs/projectmanagementstandards/devmethod/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsprojectmanagementstandardsdevmethod><span>开发方法论与框架</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsprojectmanagementstandardsprojectlifecycle-li>
<a href=/docs/projectmanagementstandards/projectlifecycle/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsprojectmanagementstandardsprojectlifecycle><span>项目生命周期</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsautomationintegrationstandards-li>
<a href=/docs/automationintegrationstandards/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsautomationintegrationstandards><span>持续集成标准</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsautomationintegrationstandardstestprocessstandards-li>
<a href=/docs/automationintegrationstandards/testprocessstandards/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsautomationintegrationstandardstestprocessstandards><span>你需要微服务么</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsautomationintegrationstandardscontinuesintegrationstandards-li>
<a href=/docs/automationintegrationstandards/continuesintegrationstandards/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsautomationintegrationstandardscontinuesintegrationstandards><span>持续集成</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsmicroservice-li>
<a href=/docs/microservice/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsmicroservice><span>微服务</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsmicroserviceisneedmicroservice-li>
<a href=/docs/microservice/isneedmicroservice/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsmicroserviceisneedmicroservice><span>你需要微服务么</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsiaas-li>
<a href=/docs/iaas/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsiaas><span>基础设施即服务</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsiaasuserinterface-li>
<a href=/docs/iaas/userinterface/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsiaasuserinterface><span></span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsgocodestandards-li>
<a href=/docs/gocodestandards/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsgocodestandards><span>Go编码规范</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsgocodestandardscodestandards-li>
<a href=/docs/gocodestandards/codestandards/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgocodestandardscodestandards><span>devSpec Go 编程指南</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsgocodestandardsgocodereviewguide-li>
<a href=/docs/gocodestandards/gocodereviewguide/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgocodestandardsgocodereviewguide><span>devSpec Go 代码审核指南</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsdocumentationstyleguide-li>
<a href=/docs/documentationstyleguide/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsdocumentationstyleguide><span>文档样式指南</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegeneralprinciple-li>
<a href=/docs/documentationstyleguide/generalprinciple/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsdocumentationstyleguidegeneralprinciple><span>一般原则</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child collapse" id=m-docsdocumentationstyleguidecodecomment-li>
<a href=/docs/documentationstyleguide/codecomment/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsdocumentationstyleguidecodecomment><span>API参考文档</span></a>
<ul class="ul-3 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidecodecommentapireference-li>
<a href=/docs/documentationstyleguide/codecomment/apireference/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidecodecommentapireference><span>源代码API参考文档</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidecodecommentgrpcapireference-li>
<a href=/docs/documentationstyleguide/codecomment/grpcapireference/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidecodecommentgrpcapireference><span>WebAPI参考文档</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidecodecommentwebapireference-li>
<a href=/docs/documentationstyleguide/codecomment/webapireference/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidecodecommentwebapireference><span>WebAPI参考文档</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child collapse" id=m-docsdocumentationstyleguidegb856t88-li>
<a href=/docs/documentationstyleguide/gb856t88/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsdocumentationstyleguidegb856t88><span>软件开发文档模板</span></a>
<ul class="ul-3 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88feasibilityanalysis-li>
<a href=/docs/documentationstyleguide/gb856t88/feasibilityanalysis/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88feasibilityanalysis><span>可行性研究报告</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88projectdevelopmentplan-li>
<a href=/docs/documentationstyleguide/gb856t88/projectdevelopmentplan/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88projectdevelopmentplan><span>项目开发计划</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88softwarerequirements-li>
<a href=/docs/documentationstyleguide/gb856t88/softwarerequirements/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88softwarerequirements><span>软件需求说明书</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88outlinedesign-li>
<a href=/docs/documentationstyleguide/gb856t88/outlinedesign/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88outlinedesign><span>概要设计说明书</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88detaileddesignspecification-li>
<a href=/docs/documentationstyleguide/gb856t88/detaileddesignspecification/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88detaileddesignspecification><span>详细设计说明书</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88usermanual-li>
<a href=/docs/documentationstyleguide/gb856t88/usermanual/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88usermanual><span>用户操作手册</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88testplan-li>
<a href=/docs/documentationstyleguide/gb856t88/testplan/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88testplan><span>测试计划</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88databasedesign-li>
<a href=/docs/documentationstyleguide/gb856t88/databasedesign/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88databasedesign><span>概要设计说明书</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88testanalysisreport-li>
<a href=/docs/documentationstyleguide/gb856t88/testanalysisreport/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88testanalysisreport><span>测试分析报告</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88monthlydevelopmentprogressreport-li>
<a href=/docs/documentationstyleguide/gb856t88/monthlydevelopmentprogressreport/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88monthlydevelopmentprogressreport><span>开发进度月报</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88projectdevelopmentsummaryreport-li>
<a href=/docs/documentationstyleguide/gb856t88/projectdevelopmentsummaryreport/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88projectdevelopmentsummaryreport><span>项目开发总结报告</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88softwaremaintenancemanual-li>
<a href=/docs/documentationstyleguide/gb856t88/softwaremaintenancemanual/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88softwaremaintenancemanual><span>模块开发卷宗</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88softwareproblemreport-li>
<a href=/docs/documentationstyleguide/gb856t88/softwareproblemreport/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88softwareproblemreport><span>软件问题报告</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88softwaremodificationreport-li>
<a href=/docs/documentationstyleguide/gb856t88/softwaremodificationreport/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88softwaremodificationreport><span>软件修改报告</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguideissues-li>
<a href=/docs/documentationstyleguide/issues/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsdocumentationstyleguideissues><span>Issues</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidepullrequest-li>
<a href=/docs/documentationstyleguide/pullrequest/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsdocumentationstyleguidepullrequest><span>拉取请求</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsabout-li>
<a href=/docs/about/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsabout><span>关于</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child collapse" id=m-docsaboutcontributing-li>
<a href=/docs/about/contributing/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsaboutcontributing><span>向 devSpec 贡献文档</span></a>
<ul class="ul-3 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsaboutcontributingaddcontent-li>
<a href=/docs/about/contributing/addcontent/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsaboutcontributingaddcontent><span>添加新文档</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsaboutcontributinggithub-li>
<a href=/docs/about/contributing/github/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsaboutcontributinggithub><span>使用 GitHub 参与社区活动</span></a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</div>
</aside>
<aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
<a href=https://github.com/TaibiaoGuo/devSpec/edit/master/content/zh/docs/PythonCodingStyle/python_style_rules.md target=_blank><i class="fa fa-edit fa-fw"></i> 编辑此页</a>
<a href="https://github.com/TaibiaoGuo/devSpec/new/master/content/zh/docs/PythonCodingStyle/python_style_rules.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" target=_blank><i class="fa fa-edit fa-fw"></i> 添加子页面</a>
<a href="https://github.com/TaibiaoGuo/devSpec/issues/new?title=Python%e9%a3%8e%e6%a0%bc%e8%a7%84%e8%8c%83" target=_blank><i class="fab fa-github fa-fw"></i> 提交文档问题</a>
<a href=https://github.com/TaibiaoGuo/devSpec/projects/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i> 提交项目问题</a>
<a id=print href=/docs/pythoncodingstyle/_print/><i class="fa fa-print fa-fw"></i> 整节打印</a>
</div>
<div class=td-toc><nav id=TableOfContents>
<ul>
<li><a href=#分号>分号</a></li>
<li><a href=#行长度>行长度</a></li>
<li><a href=#括号>括号</a></li>
<li><a href=#缩进>缩进</a></li>
<li><a href=#序列元素尾部逗号>序列元素尾部逗号</a></li>
<li><a href=#空行>空行</a></li>
<li><a href=#空格>空格</a></li>
<li><a href=#shebang>Shebang</a></li>
<li><a href=#注释>注释</a>
<ul>
<li><a href=#文档字符串>文档字符串</a></li>
<li><a href=#模块>模块</a></li>
<li><a href=#函数和方法>函数和方法</a></li>
<li><a href=#类>类</a></li>
<li><a href=#块注释和行注释>块注释和行注释</a></li>
</ul>
</li>
<li><a href=#标点符号拼写和语法>标点符号,拼写和语法</a></li>
<li><a href=#类-1>类</a></li>
<li><a href=#字符串>字符串</a></li>
<li><a href=#文件和sockets>文件和sockets</a></li>
<li><a href=#todo注释>TODO注释</a></li>
<li><a href=#导入格式>导入格式</a></li>
<li><a href=#语句>语句</a></li>
<li><a href=#访问控制>访问控制</a></li>
<li><a href=#命名>命名</a>
<ul>
<li><a href=#应该避免的名称>应该避免的名称</a></li>
<li><a href=#命名约定>命名约定</a></li>
<li><a href=#文件名>文件名</a></li>
<li><a href=#python之父guido推荐的规范>Python之父Guido推荐的规范</a></li>
</ul>
</li>
<li><a href=#main>Main</a></li>
<li><a href=#函数长度>函数长度</a></li>
<li><a href=#类型注释>类型注释</a>
<ul>
<li><a href=#通用规则>通用规则</a></li>
</ul>
</li>
<li><a href=#换行>换行</a>
<ul>
<li><a href=#预先声明>预先声明</a></li>
<li><a href=#参数默认值>参数默认值</a></li>
<li><a href=#nonetype>NoneType</a></li>
<li><a href=#类型别名>类型别名</a></li>
<li><a href=#忽略类型注释>忽略类型注释</a></li>
<li><a href=#变量类型注解>变量类型注解</a></li>
<li><a href=#tuples-vs-lists>Tuples vs Lists</a></li>
<li><a href=#typevars>TypeVars</a></li>
<li><a href=#字符串类型>字符串类型</a></li>
<li><a href=#类型的导入>类型的导入</a></li>
<li><a href=#条件导入>条件导入</a></li>
<li><a href=#循环依赖>循环依赖</a></li>
<li><a href=#泛型>泛型</a></li>
</ul>
</li>
</ul>
</nav></div>
</aside>
<main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main>
<nav aria-label=breadcrumb class="d-none d-md-block d-print-none">
<ol class="breadcrumb spb-1">
<li class=breadcrumb-item>
<a href=/docs/>开发规范</a>
</li>
<li class=breadcrumb-item>
<a href=/docs/pythoncodingstyle/>Python编码协作规范</a>
</li>
<li class="breadcrumb-item active" aria-current=page>
<a href=/docs/pythoncodingstyle/python_style_rules/>Python风格规范</a>
</li>
</ol>
</nav>
<div class=td-content>
<h1>Python风格规范</h1>
<header class=article-meta>
</header>
<h2 id=分号>分号</h2>
<blockquote>
<p>Tip: 不要在行尾加分号, 也不要用分号将两条命令放在同一行.</p>
</blockquote>
<h2 id=行长度>行长度</h2>
<blockquote>
<p>Tip: 每行不超过80个字符</p>
</blockquote>
<p>例外:</p>
<ol>
<li>
<p>长的导入模块语句</p>
</li>
<li>
<p>注释里的URL,路径以及其他的一些长标记</p>
</li>
<li>
<p>不便于换行，不包含空格的模块级字符串常量，比如url或者路径</p>
<blockquote>
<ol>
<li>Pylint 禁用注释.（例如：<a href=https://github.com/zh-google-styleguide/zh-google-styleguide/blob/master/google-python-styleguide/python_style_rules.rst#id3>``</a># pylint: disable=invalid-name）</li>
</ol>
</blockquote>
</li>
</ol>
<p>除非是在 <code>with</code> 语句需要三个以上的上下文管理器的情况下，否则不要使用反斜杠连接行.</p>
<p>Python会将 <a href=http://docs.python.org/2/reference/lexical_analysis.html#implicit-line-joining>圆括号, 中括号和花括号中的行隐式的连接起来</a> , 你可以利用这个特点. 如果需要, 你可以在表达式外围增加一对额外的圆括号.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># Yes: </span>
<span style=color:#000>foo_bar</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>width</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>height</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>color</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;black&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>design</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>None</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>x</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;foo&#39;</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#000>emphasis</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>None</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>highlight</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>)</span>

<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>width</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>0</span> <span style=color:#204a87;font-weight:700>and</span> <span style=color:#000>height</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>0</span> <span style=color:#204a87;font-weight:700>and</span>
    <span style=color:#000>color</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#39;red&#39;</span> <span style=color:#204a87;font-weight:700>and</span> <span style=color:#000>emphasis</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#39;strong&#39;</span><span style=color:#000;font-weight:700>):</span>
</code></pre></div><p>如果一个文本字符串在一行放不下, 可以使用圆括号来实现隐式行连接:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#000>x</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;This will build a very long long &#39;</span>
     <span style=color:#4e9a06>&#39;long long long long long long string&#39;</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><p>在注释中，如果必要，将长的URL放在一行上。</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># Yes:  </span>
<span style=color:#8f5902;font-style:italic># See details at</span>
<span style=color:#8f5902;font-style:italic># http://www.example.com/us/developer/documentation/api/content/v2.0/csv_file_name_extension_full_specification.html</span>

<span style=color:#8f5902;font-style:italic># No:  </span>
<span style=color:#8f5902;font-style:italic># See details at</span>
<span style=color:#8f5902;font-style:italic># http://www.example.com/us/developer/documentation/api/content/\</span>
<span style=color:#8f5902;font-style:italic># v2.0/csv_file_name_extension_full_specification.html</span>
</code></pre></div><p>当 <code>with</code> 表达式需要使用三个及其以上的上下文管理器时，可以使用反斜杠换行.若只需要两个，请使用嵌套的with.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># Yes:</span>
<span style=color:#204a87;font-weight:700>with</span> <span style=color:#000>very_long_first_expression_function</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>as</span> <span style=color:#000>spam</span><span style=color:#000;font-weight:700>,</span> \
     <span style=color:#000>very_long_second_expression_function</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>as</span> <span style=color:#000>beans</span><span style=color:#000;font-weight:700>,</span> \
     <span style=color:#000>third_thing</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>as</span> <span style=color:#000>eggs</span><span style=color:#000;font-weight:700>:</span>
         <span style=color:#000>place_order</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>eggs</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>beans</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>spam</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>beans</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#8f5902;font-style:italic># No:</span>
<span style=color:#204a87;font-weight:700>with</span> <span style=color:#000>VeryLongFirstExpressionFunction</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>as</span> <span style=color:#000>spam</span><span style=color:#000;font-weight:700>,</span> \
     <span style=color:#000>VeryLongSecondExpressionFunction</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>as</span> <span style=color:#000>beans</span><span style=color:#000;font-weight:700>:</span>
         <span style=color:#000>PlaceOrder</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>eggs</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>beans</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>spam</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>beans</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#8f5902;font-style:italic># Yes:</span>
<span style=color:#204a87;font-weight:700>with</span> <span style=color:#000>very_long_first_expression_function</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>as</span> <span style=color:#000>spam</span><span style=color:#000;font-weight:700>:</span>
    <span style=color:#204a87;font-weight:700>with</span> <span style=color:#000>very_long_second_expression_function</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>as</span> <span style=color:#000>beans</span><span style=color:#000;font-weight:700>:</span>
        <span style=color:#000>place_order</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>beans</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>spam</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><p>注意上面例子中的元素缩进; 你可以在本文的 <a href=./#%E7%BC%A9%E8%BF%9B><code>缩进</code></a> 部分找到解释.</p>
<p>另外在其他所有情况下，若一行超过80个字符，但 <a href=https://github.com/google/yapf/>yapf</a> 却无法将该行字数降至80个字符以下时，则允许该行超过80个字符长度.</p>
<h2 id=括号>括号</h2>
<blockquote>
<p>Tip: 宁缺毋滥的使用括号</p>
</blockquote>
<p>除非是用于实现行连接, 否则不要在返回语句或条件语句中使用括号. 不过在元组两边使用括号是可以的.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># Yes: </span>
<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>:</span>
    <span style=color:#000>bar</span><span style=color:#000;font-weight:700>()</span>
<span style=color:#204a87;font-weight:700>while</span> <span style=color:#000>x</span><span style=color:#000;font-weight:700>:</span>
    <span style=color:#000>x</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>bar</span><span style=color:#000;font-weight:700>()</span>
<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>x</span> <span style=color:#204a87;font-weight:700>and</span> <span style=color:#000>y</span><span style=color:#000;font-weight:700>:</span>
    <span style=color:#000>bar</span><span style=color:#000;font-weight:700>()</span>
<span style=color:#204a87;font-weight:700>if</span> <span style=color:#204a87;font-weight:700>not</span> <span style=color:#000>x</span><span style=color:#000;font-weight:700>:</span>
    <span style=color:#000>bar</span><span style=color:#000;font-weight:700>()</span>
<span style=color:#8f5902;font-style:italic># For a 1 item tuple the ()s are more visually obvious than the comma.</span>
<span style=color:#000>onesie</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>,)</span>
<span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>foo</span>
<span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>spam</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>beans</span>
<span style=color:#204a87;font-weight:700>return</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>spam</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>beans</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#204a87;font-weight:700>for</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>x</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>y</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#204a87>dict</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>items</span><span style=color:#000;font-weight:700>():</span> 
    <span style=color:#ce5c00;font-weight:700>...</span>
<span style=color:#8f5902;font-style:italic># No: </span>
<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>x</span><span style=color:#000;font-weight:700>):</span>
    <span style=color:#000>bar</span><span style=color:#000;font-weight:700>()</span>
<span style=color:#204a87;font-weight:700>if</span> <span style=color:#204a87;font-weight:700>not</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>x</span><span style=color:#000;font-weight:700>):</span>
    <span style=color:#000>bar</span><span style=color:#000;font-weight:700>()</span>
<span style=color:#204a87;font-weight:700>return</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><h2 id=缩进>缩进</h2>
<blockquote>
<p>Tip: 用4个空格来缩进代码</p>
</blockquote>
<p>绝对不要用tab, 也不要tab和空格混用. 对于行连接的情况, 你应该要么垂直对齐换行的元素(见 <a href=./#%E8%A1%8C%E9%95%BF%E5%BA%A6><code>行长度</code></a> 部分的示例), 或者使用4空格的悬挂式缩进(这时第一行不应该有参数):</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># Yes:</span>
<span style=color:#8f5902;font-style:italic># Aligned with opening delimiter</span>
<span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>long_function_name</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>var_one</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>var_two</span><span style=color:#000;font-weight:700>,</span>
                        <span style=color:#000>var_three</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>var_four</span><span style=color:#000;font-weight:700>)</span>

<span style=color:#8f5902;font-style:italic># Aligned with opening delimiter in a dictionary</span>
<span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#000>long_dictionary_key</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>value1</span> <span style=color:#ce5c00;font-weight:700>+</span>
                        <span style=color:#000>value2</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#ce5c00;font-weight:700>...</span>
<span style=color:#000;font-weight:700>}</span>

<span style=color:#8f5902;font-style:italic># 4-space hanging indent; nothing on first line</span>
<span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>long_function_name</span><span style=color:#000;font-weight:700>(</span>
    <span style=color:#000>var_one</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>var_two</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>var_three</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#000>var_four</span><span style=color:#000;font-weight:700>)</span>

<span style=color:#8f5902;font-style:italic># 4-space hanging indent in a dictionary</span>
<span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#000>long_dictionary_key</span><span style=color:#000;font-weight:700>:</span>
        <span style=color:#000>long_dictionary_value</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#ce5c00;font-weight:700>...</span>
<span style=color:#000;font-weight:700>}</span>

<span style=color:#8f5902;font-style:italic># No:</span>
<span style=color:#8f5902;font-style:italic># Stuff on first line forbidden</span>
<span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>long_function_name</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>var_one</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>var_two</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#000>var_three</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>var_four</span><span style=color:#000;font-weight:700>)</span>

<span style=color:#8f5902;font-style:italic># 2-space hanging indent forbidden</span>
<span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>long_function_name</span><span style=color:#000;font-weight:700>(</span>
<span style=color:#000>var_one</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>var_two</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>var_three</span><span style=color:#000;font-weight:700>,</span>
<span style=color:#000>var_four</span><span style=color:#000;font-weight:700>)</span>

<span style=color:#8f5902;font-style:italic># No hanging indent in a dictionary</span>
<span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#000>long_dictionary_key</span><span style=color:#000;font-weight:700>:</span>
        <span style=color:#000>long_dictionary_value</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#ce5c00;font-weight:700>...</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><h2 id=序列元素尾部逗号>序列元素尾部逗号</h2>
<blockquote>
<p>Tip: 仅当 <code>]</code>, <code>)</code>, <code>}</code> 和末位元素不在同一行时，推荐使用序列元素尾部逗号. 当末位元素尾部有逗号时，元素后的逗号可以指示 <a href=https://pypi.org/project/yapf/>YAPF</a> 将序列格式化为每行一项.</p>
</blockquote>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># Yes:</span>
<span style=color:#000>golomb3</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>]</span>
<span style=color:#8f5902;font-style:italic># Yes:</span>
<span style=color:#000>golomb4</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[</span>
        <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#0000cf;font-weight:700>6</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#000;font-weight:700>]</span>
<span style=color:#8f5902;font-style:italic># No:</span>
<span style=color:#000>golomb4</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[</span>
        <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#0000cf;font-weight:700>6</span>
    <span style=color:#000;font-weight:700>]</span>
</code></pre></div><h2 id=空行>空行</h2>
<blockquote>
<p>Tip: 顶级定义之间空两行, 方法定义之间空一行</p>
</blockquote>
<p>顶级定义之间空两行, 比如函数或者类定义. 方法定义, 类定义与第一个方法之间, 都应该空一行. 函数或方法中, 某些地方要是你觉得合适, 就空一行.</p>
<h2 id=空格>空格</h2>
<blockquote>
<p>Tip: 按照标准的排版规范来使用标点两边的空格</p>
</blockquote>
<p>括号内不要有空格.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># Yes:</span>
<span style=color:#000>spam</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ham</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>],</span> <span style=color:#000;font-weight:700>{</span><span style=color:#000>eggs</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>},</span> <span style=color:#000;font-weight:700>[])</span>

<span style=color:#8f5902;font-style:italic># No:</span>
<span style=color:#000>spam</span><span style=color:#000;font-weight:700>(</span> <span style=color:#000>ham</span><span style=color:#000;font-weight:700>[</span> <span style=color:#0000cf;font-weight:700>1</span> <span style=color:#000;font-weight:700>],</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>eggs</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>2</span> <span style=color:#000;font-weight:700>},</span> <span style=color:#000;font-weight:700>[</span> <span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>)</span>
</code></pre></div><p>不要在逗号, 分号, 冒号前面加空格, 但应该在它们后面加(除了在行尾).</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># Yes: </span>
<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>x</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>:</span>
    <span style=color:#204a87>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>x</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>y</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>x</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>y</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>y</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>x</span>

<span style=color:#8f5902;font-style:italic># No:</span>
<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>x</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>4</span> <span style=color:#000;font-weight:700>:</span>
    <span style=color:#204a87>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>x</span> <span style=color:#000;font-weight:700>,</span> <span style=color:#000>y</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>x</span> <span style=color:#000;font-weight:700>,</span> <span style=color:#000>y</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>y</span> <span style=color:#000;font-weight:700>,</span> <span style=color:#000>x</span>
</code></pre></div><p>参数列表, 索引或切片的左括号前不应加空格.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># Yes:</span>
<span style=color:#000>spam</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#8f5902;font-style:italic># no:</span>
<span style=color:#000>spam</span> <span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#8f5902;font-style:italic># Yes:</span>
<span style=color:#204a87>dict</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;key&#39;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87>list</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>index</span><span style=color:#000;font-weight:700>]</span>
<span style=color:#8f5902;font-style:italic># No:</span>
<span style=color:#204a87>dict</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;key&#39;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87>list</span> <span style=color:#000;font-weight:700>[</span><span style=color:#000>index</span><span style=color:#000;font-weight:700>]</span>
</code></pre></div><p>在二元操作符两边都加上一个空格, 比如赋值(=), 比较(==, &lt;, >, !=, &lt;>, &lt;=, >=, in, not in, is, is not), 布尔(and, or, not). 至于算术操作符两边的空格该如何使用, 需要你自己好好判断. 不过两侧务必要保持一致.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># Yes:</span>
<span style=color:#000>x</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>1</span>
<span style=color:#8f5902;font-style:italic># No:</span>
<span style=color:#000>x</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#0000cf;font-weight:700>1</span>
</code></pre></div><p>当 <code>=</code> 用于指示关键字参数或默认参数值时, 不要在其两侧使用空格. 但若存在类型注释的时候,需要在 <code>=</code> 周围使用空格.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># Yes:</span>
<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>complex</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>real</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>imag</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>0.0</span><span style=color:#000;font-weight:700>):</span> <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>magic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>r</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>real</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>i</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>imag</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#8f5902;font-style:italic># Yes:</span>
<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>complex</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>real</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>imag</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87>float</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0.0</span><span style=color:#000;font-weight:700>):</span> <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>Magic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>r</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>real</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>i</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>imag</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#8f5902;font-style:italic># No:</span>
<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>complex</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>real</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>imag</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0.0</span><span style=color:#000;font-weight:700>):</span> <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>magic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>r</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>real</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>imag</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#8f5902;font-style:italic># No:</span>
<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>complex</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>real</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>imag</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87>float</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>0.0</span><span style=color:#000;font-weight:700>):</span> <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>Magic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>r</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>real</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>imag</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><p>不要用空格来垂直对齐多行间的标记, 因为这会成为维护的负担(适用于:, #, =等):</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># Yes:</span>
     <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1000</span>  <span style=color:#8f5902;font-style:italic># comment</span>
     <span style=color:#000>long_name</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span>  <span style=color:#8f5902;font-style:italic># comment that should not be aligned</span>

     <span style=color:#000>dictionary</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>{</span>
         <span style=color:#4e9a06>&#34;foo&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span>
         <span style=color:#4e9a06>&#34;long_name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span>
         <span style=color:#000;font-weight:700>}</span>
<span style=color:#8f5902;font-style:italic># No:</span>
     <span style=color:#000>foo</span>       <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1000</span>  <span style=color:#8f5902;font-style:italic># comment</span>
     <span style=color:#000>long_name</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span>     <span style=color:#8f5902;font-style:italic># comment that should not be aligned</span>

     <span style=color:#000>dictionary</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>{</span>
         <span style=color:#4e9a06>&#34;foo&#34;</span>      <span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span>
         <span style=color:#4e9a06>&#34;long_name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span>
         <span style=color:#000;font-weight:700>}</span>
</code></pre></div><h2 id=shebang>Shebang</h2>
<blockquote>
<p>Tip: 大部分.py文件不必以#!作为文件的开始. 根据 <a href=http://www.python.org/dev/peps/pep-0394/>PEP-394</a> , 程序的main文件应该以 <code>#!/usr/bin/python2</code> 或者 <code>#!/usr/bin/python3</code> 开始.</p>
</blockquote>
<p>(译者注: 在计算机科学中, <a href=http://en.wikipedia.org/wiki/Shebang_(Unix)>Shebang</a> (也称为Hashbang)是一个由井号和叹号构成的字符串行(#!), 其出现在文本文件的第一行的前两个字符. 在文件中存在Shebang的情况下, 类Unix操作系统的程序载入器会分析Shebang后的内容, 将这些内容作为解释器指令, 并调用该指令, 并将载有Shebang的文件路径作为该解释器的参数. 例如, 以指令#!/bin/sh开头的文件在执行时会实际调用/bin/sh程序.)</p>
<p><code>#!</code> 先用于帮助内核找到Python解释器, 但是在导入模块时, 将会被忽略. 因此只有被直接执行的文件中才有必要加入 <code>#!</code> .</p>
<h2 id=注释>注释</h2>
<blockquote>
<p>Tip: 确保对模块, 函数, 方法和行内注释使用正确的风格</p>
</blockquote>
<h3 id=文档字符串>文档字符串</h3>
<blockquote>
<p>Python有一种独一无二的的注释方式: 使用文档字符串. 文档字符串是包, 模块, 类或函数里的第一个语句. 这些字符串可以通过对象的 <code>__doc__</code> 成员被自动提取, 并且被pydoc所用. (你可以在你的模块上运行pydoc试一把, 看看它长什么样). 我们对文档字符串的惯例是使用三重双引号"""( <a href=http://www.python.org/dev/peps/pep-0257/>PEP-257</a> ). 一个文档字符串应该这样组织: 首先是一行以句号, 问号或惊叹号结尾的概述(或者该文档字符串单纯只有一行). 接着是一个空行. 接着是文档字符串剩下的部分, 它应该与文档字符串的第一行的第一个引号对齐. 下面有更多文档字符串的格式化规范.</p>
</blockquote>
<h3 id=模块>模块</h3>
<blockquote>
<p>每个文件应该包含一个许可样板. 根据项目使用的许可(例如, Apache 2.0, BSD, LGPL, GPL), 选择合适的样板. 其开头应是对模块内容和用法的描述.</p>
</blockquote>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#4e9a06>&#34;&#34;&#34;A one line summary of the module or program, terminated by a period.
</span><span style=color:#4e9a06>
</span><span style=color:#4e9a06>Leave one blank line.  The rest of this docstring should contain an
</span><span style=color:#4e9a06>overall description of the module or program.  Optionally, it may also
</span><span style=color:#4e9a06>contain a brief description of exported classes and functions and/or usage
</span><span style=color:#4e9a06>examples.
</span><span style=color:#4e9a06>
</span><span style=color:#4e9a06>Typical usage example:
</span><span style=color:#4e9a06>
</span><span style=color:#4e9a06>foo = ClassFoo()
</span><span style=color:#4e9a06>bar = foo.FunctionBar()
</span><span style=color:#4e9a06>&#34;&#34;&#34;</span>
</code></pre></div><h3 id=函数和方法>函数和方法</h3>
<blockquote>
<p>下文所指的函数,包括函数, 方法, 以及生成器.</p>
<p>一个函数必须要有文档字符串, 除非它满足以下条件:</p>
<ol>
<li>外部不可见</li>
<li>非常短小</li>
<li>简单明了</li>
</ol>
<p>文档字符串应该包含函数做什么, 以及输入和输出的详细描述. 通常, 不应该描述"怎么做", 除非是一些复杂的算法. 文档字符串应该提供足够的信息, 当别人编写代码调用该函数时, 他不需要看一行代码, 只要看文档字符串就可以了. 对于复杂的代码, 在代码旁边加注释会比使用文档字符串更有意义. 覆盖基类的子类方法应有一个类似 <code>See base class</code> 的简单注释来指引读者到基类方法的文档注释.若重载的子类方法和基类方法有很大不同,那么注释中应该指明这些信息.</p>
<p>关于函数的几个方面应该在特定的小节中进行描述记录， 这几个方面如下文所述. 每节应该以一个标题行开始. 标题行以冒号结尾. 除标题行外, 节的其他内容应被缩进2个空格.</p>
<ul>
<li>
<p>Args:</p>
<p>列出每个参数的名字, 并在名字后使用一个冒号和一个空格, 分隔对该参数的描述.如果描述太长超过了单行80字符,使用2或者4个空格的悬挂缩进(与文件其他部分保持一致). 描述应该包括所需的类型和含义. 如果一个函数接受<em>foo(可变长度参数列表)或者**bar (任意关键字参数), 应该详细列出</em>foo和**bar.</p>
</li>
<li>
<p>Returns: (或者 Yields: 用于生成器)</p>
<p>描述返回值的类型和语义. 如果函数返回None, 这一部分可以省略.</p>
</li>
<li>
<p>Raises:</p>
<p>列出与接口有关的所有异常.</p>
</li>
</ul>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>fetch_smalltable_rows</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>table_handle</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>smalltable</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>Table</span><span style=color:#000;font-weight:700>,</span>
                        <span style=color:#000>keys</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Sequence</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>Union</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87>bytes</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87>str</span><span style=color:#000;font-weight:700>]],</span>
                        <span style=color:#000>require_all_keys</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87>bool</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>False</span><span style=color:#000;font-weight:700>,</span>
<span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>Mapping</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87>bytes</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Tuple</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87>str</span><span style=color:#000;font-weight:700>]]:</span>
    <span style=color:#4e9a06>&#34;&#34;&#34;Fetches rows from a Smalltable.
</span><span style=color:#4e9a06>
</span><span style=color:#4e9a06>    Retrieves rows pertaining to the given keys from the Table instance
</span><span style=color:#4e9a06>    represented by table_handle.  String keys will be UTF-8 encoded.
</span><span style=color:#4e9a06>
</span><span style=color:#4e9a06>    Args:
</span><span style=color:#4e9a06>        table_handle: An open smalltable.Table instance.
</span><span style=color:#4e9a06>        keys: A sequence of strings representing the key of each table
</span><span style=color:#4e9a06>        row to fetch.  String keys will be UTF-8 encoded.
</span><span style=color:#4e9a06>        require_all_keys: Optional; If require_all_keys is True only
</span><span style=color:#4e9a06>        rows with values set for all keys will be returned.
</span><span style=color:#4e9a06>
</span><span style=color:#4e9a06>    Returns:
</span><span style=color:#4e9a06>        A dict mapping keys to the corresponding table row data
</span><span style=color:#4e9a06>        fetched. Each row is represented as a tuple of strings. For
</span><span style=color:#4e9a06>        example:
</span><span style=color:#4e9a06>
</span><span style=color:#4e9a06>        {b&#39;Serak&#39;: (&#39;Rigel VII&#39;, &#39;Preparer&#39;),
</span><span style=color:#4e9a06>        b&#39;Zim&#39;: (&#39;Irk&#39;, &#39;Invader&#39;),
</span><span style=color:#4e9a06>        b&#39;Lrrr&#39;: (&#39;Omicron Persei 8&#39;, &#39;Emperor&#39;)}
</span><span style=color:#4e9a06>
</span><span style=color:#4e9a06>        Returned keys are always bytes.  If a key from the keys argument is
</span><span style=color:#4e9a06>        missing from the dictionary, then that row was not found in the
</span><span style=color:#4e9a06>        table (and require_all_keys must have been False).
</span><span style=color:#4e9a06>
</span><span style=color:#4e9a06>    Raises:
</span><span style=color:#4e9a06>        IOError: An error occurred accessing the smalltable.
</span><span style=color:#4e9a06>    &#34;&#34;&#34;</span>
</code></pre></div><p>在 <code>Args:</code> 上进行换行也是可以的:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>fetch_smalltable_rows</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>table_handle</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>smalltable</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>Table</span><span style=color:#000;font-weight:700>,</span>
                        <span style=color:#000>keys</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Sequence</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>Union</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87>bytes</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87>str</span><span style=color:#000;font-weight:700>]],</span>
                        <span style=color:#000>require_all_keys</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87>bool</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>False</span><span style=color:#000;font-weight:700>,</span>
<span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>Mapping</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87>bytes</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Tuple</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87>str</span><span style=color:#000;font-weight:700>]]:</span>
    <span style=color:#4e9a06>&#34;&#34;&#34;Fetches rows from a Smalltable.
</span><span style=color:#4e9a06>
</span><span style=color:#4e9a06>    Retrieves rows pertaining to the given keys from the Table instance
</span><span style=color:#4e9a06>    represented by table_handle.  String keys will be UTF-8 encoded.
</span><span style=color:#4e9a06>
</span><span style=color:#4e9a06>    Args:
</span><span style=color:#4e9a06>    table_handle:
</span><span style=color:#4e9a06>        An open smalltable.Table instance.
</span><span style=color:#4e9a06>    keys:
</span><span style=color:#4e9a06>        A sequence of strings representing the key of each table row to
</span><span style=color:#4e9a06>        fetch.  String keys will be UTF-8 encoded.
</span><span style=color:#4e9a06>    require_all_keys:
</span><span style=color:#4e9a06>        Optional; If require_all_keys is True only rows with values set
</span><span style=color:#4e9a06>        for all keys will be returned.
</span><span style=color:#4e9a06>
</span><span style=color:#4e9a06>    Returns:
</span><span style=color:#4e9a06>    A dict mapping keys to the corresponding table row data
</span><span style=color:#4e9a06>    fetched. Each row is represented as a tuple of strings. For
</span><span style=color:#4e9a06>    example:
</span><span style=color:#4e9a06>
</span><span style=color:#4e9a06>    {b&#39;Serak&#39;: (&#39;Rigel VII&#39;, &#39;Preparer&#39;),
</span><span style=color:#4e9a06>    b&#39;Zim&#39;: (&#39;Irk&#39;, &#39;Invader&#39;),
</span><span style=color:#4e9a06>    b&#39;Lrrr&#39;: (&#39;Omicron Persei 8&#39;, &#39;Emperor&#39;)}
</span><span style=color:#4e9a06>
</span><span style=color:#4e9a06>    Returned keys are always bytes.  If a key from the keys argument is
</span><span style=color:#4e9a06>    missing from the dictionary, then that row was not found in the
</span><span style=color:#4e9a06>    table (and require_all_keys must have been False).
</span><span style=color:#4e9a06>
</span><span style=color:#4e9a06>    Raises:
</span><span style=color:#4e9a06>    IOError: An error occurred accessing the smalltable.
</span><span style=color:#4e9a06>    &#34;&#34;&#34;</span>
</code></pre></div></blockquote>
<h3 id=类>类</h3>
<blockquote>
<p>类应该在其定义下有一个用于描述该类的文档字符串. 如果你的类有公共属性(Attributes), 那么文档中应该有一个属性(Attributes)段. 并且应该遵守和函数参数相同的格式.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>SampleClass</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87>object</span><span style=color:#000;font-weight:700>):</span>
    <span style=color:#4e9a06>&#34;&#34;&#34;Summary of class here.
</span><span style=color:#4e9a06>
</span><span style=color:#4e9a06>    Longer class information....
</span><span style=color:#4e9a06>    Longer class information....
</span><span style=color:#4e9a06>
</span><span style=color:#4e9a06>    Attributes:
</span><span style=color:#4e9a06>        likes_spam: A boolean indicating if we like SPAM or not.
</span><span style=color:#4e9a06>        eggs: An integer count of the eggs we have laid.
</span><span style=color:#4e9a06>    &#34;&#34;&#34;</span>

    <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>__init__</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>likes_spam</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>False</span><span style=color:#000;font-weight:700>):</span>
        <span style=color:#4e9a06>&#34;&#34;&#34;Inits SampleClass with blah.&#34;&#34;&#34;</span>
        <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>likes_spam</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>likes_spam</span>
        <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>eggs</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span>

    <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>public_method</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>):</span>
        <span style=color:#4e9a06>&#34;&#34;&#34;Performs operation blah.&#34;&#34;&#34;</span>
</code></pre></div></blockquote>
<h3 id=块注释和行注释>块注释和行注释</h3>
<blockquote>
<p>最需要写注释的是代码中那些技巧性的部分. 如果你在下次 <a href=http://en.wikipedia.org/wiki/Code_review>代码审查</a> 的时候必须解释一下, 那么你应该现在就给它写注释. 对于复杂的操作, 应该在其操作开始前写上若干行注释. 对于不是一目了然的代码, 应在其行尾添加注释.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># We use a weighted dictionary search to find out where i is in</span>
<span style=color:#8f5902;font-style:italic># the array.  We extrapolate position based on the largest num</span>
<span style=color:#8f5902;font-style:italic># in the array and the array size and then do binary search to</span>
<span style=color:#8f5902;font-style:italic># get the exact number.</span>

<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>i</span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>:</span>        <span style=color:#8f5902;font-style:italic># True if i is 0 or a power of 2.</span>
</code></pre></div><p>为了提高可读性, 注释应该至少离开代码2个空格.</p>
<p>另一方面, 绝不要描述代码. 假设阅读代码的人比你更懂Python, 他只是不知道你的代码要做什么.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># BAD COMMENT: Now go through the b array and make sure whenever i occurs</span>
<span style=color:#8f5902;font-style:italic># the next element is i+1</span>
</code></pre></div></blockquote>
<h2 id=标点符号拼写和语法>标点符号,拼写和语法</h2>
<blockquote>
<p>Tip: 注意标点符号,拼写和语法</p>
</blockquote>
<p>注释应有适当的大写和标点,句子应该尽量完整.对于诸如在行尾上的较短注释,可以不那么正式,但是也应该尽量保持风格抑制.</p>
<h2 id=类-1>类</h2>
<blockquote>
<p>Tip: 如果一个类不继承自其它类, 就显式的从object继承. 嵌套类也一样.(除非是为了和 python2 兼容)</p>
</blockquote>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># Yes:</span>
    <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>SampleClass</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87>object</span><span style=color:#000;font-weight:700>):</span>
         <span style=color:#204a87;font-weight:700>pass</span>


     <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>OuterClass</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87>object</span><span style=color:#000;font-weight:700>):</span>

         <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>InnerClass</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87>object</span><span style=color:#000;font-weight:700>):</span>
             <span style=color:#204a87;font-weight:700>pass</span>


     <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>ChildClass</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ParentClass</span><span style=color:#000;font-weight:700>):</span>
         <span style=color:#4e9a06>&#34;&#34;&#34;Explicitly inherits from another class already.&#34;&#34;&#34;</span>
<span style=color:#8f5902;font-style:italic># No:</span>
    <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>SampleClass</span><span style=color:#000;font-weight:700>:</span>
        <span style=color:#204a87;font-weight:700>pass</span>


    <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>OuterClass</span><span style=color:#000;font-weight:700>:</span>

        <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>InnerClass</span><span style=color:#000;font-weight:700>:</span>
            <span style=color:#204a87;font-weight:700>pass</span>
</code></pre></div><p>继承自 <code>object</code> 是为了使属性(properties)正常工作, 并且这样可以保护你的代码, 使其不受 <a href=http://www.python.org/dev/peps/pep-3000/>PEP-3000</a> 的一个特殊的潜在不兼容性影响. 这样做也定义了一些特殊的方法, 这些方法实现了对象的默认语义, 包括 <code>__new__, __init__, __delattr__, __getattribute__, __setattr__, __hash__, __repr__, and __str__</code> .</p>
<h2 id=字符串>字符串</h2>
<blockquote>
<p>Tip: 即使参数都是字符串, 使用%操作符或者格式化方法格式化字符串. 不过也不能一概而论, 你需要在+和%之间好好判定.</p>
</blockquote>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># Yes:</span>
<span style=color:#000>x</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>a</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#000>b</span>
<span style=color:#000>x</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#39;</span><span style=color:#4e9a06>%s</span><span style=color:#4e9a06>, </span><span style=color:#4e9a06>%s</span><span style=color:#4e9a06>!&#39;</span> <span style=color:#ce5c00;font-weight:700>%</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>imperative</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>expletive</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>x</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#39;</span><span style=color:#4e9a06>{}</span><span style=color:#4e9a06>, </span><span style=color:#4e9a06>{}</span><span style=color:#4e9a06>!&#39;</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>format</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>imperative</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>expletive</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>x</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#39;name: </span><span style=color:#4e9a06>%s</span><span style=color:#4e9a06>; score: </span><span style=color:#4e9a06>%d</span><span style=color:#4e9a06>&#39;</span> <span style=color:#ce5c00;font-weight:700>%</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>name</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>n</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>x</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#39;name: </span><span style=color:#4e9a06>{}</span><span style=color:#4e9a06>; score: </span><span style=color:#4e9a06>{}</span><span style=color:#4e9a06>&#39;</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>format</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>name</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>n</span><span style=color:#000;font-weight:700>)</span>

<span style=color:#8f5902;font-style:italic># No:</span>
<span style=color:#000>x</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#39;</span><span style=color:#4e9a06>%s%s</span><span style=color:#4e9a06>&#39;</span> <span style=color:#ce5c00;font-weight:700>%</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>a</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>b</span><span style=color:#000;font-weight:700>)</span>  <span style=color:#8f5902;font-style:italic># use + in this case</span>
<span style=color:#000>x</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#39;</span><span style=color:#4e9a06>{}{}</span><span style=color:#4e9a06>&#39;</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>format</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>a</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>b</span><span style=color:#000;font-weight:700>)</span>  <span style=color:#8f5902;font-style:italic># use + in this case</span>
<span style=color:#000>x</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>imperative</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#4e9a06>&#39;, &#39;</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#000>expletive</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#4e9a06>&#39;!&#39;</span>
<span style=color:#000>x</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#39;name: &#39;</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#000>name</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#4e9a06>&#39;; score: &#39;</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#204a87>str</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>n</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><p>避免在循环中用+和+=操作符来累加字符串. 由于字符串是不可变的, 这样做会创建不必要的临时对象, 并且导致二次方而不是线性的运行时间. 作为替代方案, 你可以将每个子串加入列表, 然后在循环结束后用 <code>.join</code> 连接列表. (也可以将每个子串写入一个 <code>cStringIO.StringIO</code> 缓存中.)</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># Yes:</span>
<span style=color:#000>items</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;&lt;table&gt;&#39;</span><span style=color:#000;font-weight:700>]</span>
<span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>last_name</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>first_name</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>employee_list</span><span style=color:#000;font-weight:700>:</span>
    <span style=color:#000>items</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;&lt;tr&gt;&lt;td&gt;</span><span style=color:#4e9a06>%s</span><span style=color:#4e9a06>, </span><span style=color:#4e9a06>%s</span><span style=color:#4e9a06>&lt;/td&gt;&lt;/tr&gt;&#39;</span> <span style=color:#ce5c00;font-weight:700>%</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>last_name</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>first_name</span><span style=color:#000;font-weight:700>))</span>
<span style=color:#000>items</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;&lt;/table&gt;&#39;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>employee_table</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#39;&#39;</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>join</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>items</span><span style=color:#000;font-weight:700>)</span>

<span style=color:#8f5902;font-style:italic># No:</span>
<span style=color:#000>employee_table</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#39;&lt;table&gt;&#39;</span>
<span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>last_name</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>first_name</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>employee_list</span><span style=color:#000;font-weight:700>:</span>
    <span style=color:#000>employee_table</span> <span style=color:#ce5c00;font-weight:700>+=</span> <span style=color:#4e9a06>&#39;&lt;tr&gt;&lt;td&gt;</span><span style=color:#4e9a06>%s</span><span style=color:#4e9a06>, </span><span style=color:#4e9a06>%s</span><span style=color:#4e9a06>&lt;/td&gt;&lt;/tr&gt;&#39;</span> <span style=color:#ce5c00;font-weight:700>%</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>last_name</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>first_name</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>employee_table</span> <span style=color:#ce5c00;font-weight:700>+=</span> <span style=color:#4e9a06>&#39;&lt;/table&gt;&#39;</span>
</code></pre></div><p>在同一个文件中, 保持使用字符串引号的一致性. 使用单引号&rsquo;或者双引号"之一用以引用字符串, 并在同一文件中沿用. 在字符串内可以使用另外一种引号, 以避免在字符串中使用.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># Yes:</span>
     <span style=color:#000>Python</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;Why are you hiding your eyes?&#39;</span><span style=color:#000;font-weight:700>)</span>
     <span style=color:#000>Gollum</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;I&#39;m scared of lint errors.&#34;</span><span style=color:#000;font-weight:700>)</span>
     <span style=color:#000>Narrator</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;&#34;Good!&#34; thought a happy Python reviewer.&#39;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#8f5902;font-style:italic># No:</span>
     <span style=color:#000>Python</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Why are you hiding your eyes?&#34;</span><span style=color:#000;font-weight:700>)</span>
     <span style=color:#000>Gollum</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;The lint. It burns. It burns us.&#39;</span><span style=color:#000;font-weight:700>)</span>
     <span style=color:#000>Gollum</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Always the great lint. Watching. Watching.&#34;</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><p>为多行字符串使用三重双引号"&ldquo;&ldquo;而非三重单引号'''. 当且仅当项目中使用单引号&rsquo;来引用字符串时, 才可能会使用三重'&lsquo;&lsquo;为非文档字符串的多行字符串来标识引用. 文档字符串必须使用三重双引号&rdquo;"&rdquo;. 多行字符串不应随着代码其他部分缩进的调整而发生位置移动. 如果需要避免在字符串中嵌入额外的空间,可以使用串联的单行字符串或者使用 <a href=https://docs.python.org/zh-cn/3/library/textwrap.html#textwrap.dedent>textwrap.dedent()</a> 来删除每行多余的空间.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># No:</span>
<span style=color:#000>long_string</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;&#34;&#34;This is pretty ugly.
</span><span style=color:#4e9a06>Don&#39;t do this.
</span><span style=color:#4e9a06>&#34;&#34;&#34;</span>
<span style=color:#8f5902;font-style:italic># Yes:</span>
<span style=color:#000>long_string</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;&#34;&#34;This is fine if your use case can accept
</span><span style=color:#4e9a06>  extraneous leading spaces.&#34;&#34;&#34;</span>
<span style=color:#8f5902;font-style:italic># Yes:</span>
<span style=color:#000>long_string</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;And this is fine if you cannot accept</span><span style=color:#4e9a06>\n</span><span style=color:#4e9a06>&#34;</span> <span style=color:#ce5c00;font-weight:700>+</span>
       <span style=color:#4e9a06>&#34;extraneous leading spaces.&#34;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#8f5902;font-style:italic># Yes:</span>
<span style=color:#000>long_string</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;And this too is fine if you cannot accept</span><span style=color:#4e9a06>\n</span><span style=color:#4e9a06>&#34;</span>
       <span style=color:#4e9a06>&#34;extraneous leading spaces.&#34;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#8f5902;font-style:italic># Yes:</span>
<span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>textwrap</span>

<span style=color:#000>long_string</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>textwrap</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>dedent</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;&#34;&#34;</span><span style=color:#4e9a06>\
</span><span style=color:#4e9a06></span><span style=color:#4e9a06>  This is also fine, because textwrap.dedent()
</span><span style=color:#4e9a06>  will collapse common leading spaces in each line.&#34;&#34;&#34;</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><h2 id=文件和sockets>文件和sockets</h2>
<blockquote>
<p>Tip: 在文件和sockets结束时, 显式的关闭它.</p>
</blockquote>
<p>除文件外, sockets或其他类似文件的对象在没有必要的情况下打开, 会有许多副作用, 例如:</p>
<ol>
<li>它们可能会消耗有限的系统资源, 如文件描述符. 如果这些资源在使用后没有及时归还系统, 那么用于处理这些对象的代码会将资源消耗殆尽.</li>
<li>持有文件将会阻止对于文件的其他诸如移动、删除之类的操作.</li>
<li>仅仅是从逻辑上关闭文件和sockets, 那么它们仍然可能会被其共享的程序在无意中进行读或者写操作. 只有当它们真正被关闭后, 对于它们尝试进行读或者写操作将会抛出异常, 并使得问题快速显现出来.</li>
</ol>
<p>而且, 幻想当文件对象析构时, 文件和sockets会自动关闭, 试图将文件对象的生命周期和文件的状态绑定在一起的想法, 都是不现实的. 因为有如下原因:</p>
<ol>
<li>没有任何方法可以确保运行环境会真正的执行文件的析构. 不同的Python实现采用不同的内存管理技术, 比如延时垃圾处理机制. 延时垃圾处理机制可能会导致对象生命周期被任意无限制的延长.</li>
<li>对于文件意外的引用,会导致对于文件的持有时间超出预期(比如对于异常的跟踪, 包含有全局变量等).</li>
</ol>
<p>推荐使用 <a href=http://docs.python.org/reference/compound_stmts.html#the-with-statement>&ldquo;with"语句</a> 以管理文件:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>with</span> <span style=color:#204a87>open</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;hello.txt&#34;</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>as</span> <span style=color:#000>hello_file</span><span style=color:#000;font-weight:700>:</span>
    <span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>line</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>hello_file</span><span style=color:#000;font-weight:700>:</span>
        <span style=color:#204a87>print</span> <span style=color:#000>line</span>
</code></pre></div><p>对于不支持使用"with"语句的类似文件的对象,使用 contextlib.closing():</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>contextlib</span>

<span style=color:#204a87;font-weight:700>with</span> <span style=color:#000>contextlib</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>closing</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>urllib</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>urlopen</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;http://www.python.org/&#34;</span><span style=color:#000;font-weight:700>))</span> <span style=color:#204a87;font-weight:700>as</span> <span style=color:#000>front_page</span><span style=color:#000;font-weight:700>:</span>
    <span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>line</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>front_page</span><span style=color:#000;font-weight:700>:</span>
        <span style=color:#204a87>print</span> <span style=color:#000>line</span>
</code></pre></div><p>Legacy AppEngine 中Python 2.5的代码如使用"with"语句, 需要添加 <code>from __future__ import with_statement</code> .</p>
<h2 id=todo注释>TODO注释</h2>
<blockquote>
<p>Tip: 为临时代码使用TODO注释, 它是一种短期解决方案. 不算完美, 但够好了.</p>
</blockquote>
<p>TODO注释应该在所有开头处包含"TODO"字符串, 紧跟着是用括号括起来的你的名字, email地址或其它标识符. 然后是一个可选的冒号. 接着必须有一行注释, 解释要做什么. 主要目的是为了有一个统一的TODO格式, 这样添加注释的人就可以搜索到(并可以按需提供更多细节). 写了TODO注释并不保证写的人会亲自解决问题. 当你写了一个TODO, 请注上你的名字.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># TODO(kl@gmail.com): Use a &#34;*&#34; here for string repetition.</span>
<span style=color:#8f5902;font-style:italic># TODO(Zeke) Change this to use relations.</span>
</code></pre></div><p>如果你的TODO是"将来做某事"的形式, 那么请确保你包含了一个指定的日期(&ldquo;2009年11月解决&rdquo;)或者一个特定的事件(&ldquo;等到所有的客户都可以处理XML请求就移除这些代码&rdquo;).</p>
<h2 id=导入格式>导入格式</h2>
<blockquote>
<p>Tip: 每个导入应该独占一行, <code>typing</code> 的导入除外</p>
</blockquote>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># Yes: </span>
<span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>os</span>
<span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>sys</span>
<span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>typing</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>Mapping</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Sequence</span>

<span style=color:#8f5902;font-style:italic># No:</span>
<span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>os</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>sys</span>
</code></pre></div><p>导入总应该放在文件顶部, 位于模块注释和文档字符串之后, 模块全局变量和常量之前. 导入应该按照从最通用到最不通用的顺序分组:</p>
<ol>
<li><code>__future__</code> 导入</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>__future__</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>absolute_import</span>
<span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>__future__</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>division</span>
<span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>__future__</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>print_function</span>
</code></pre></div><ol>
<li>标准库导入</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>sys</span>
</code></pre></div><ol>
<li>第三方库导入</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>tensorflow</span> <span style=color:#204a87;font-weight:700>as</span> <span style=color:#000>tf</span>
</code></pre></div><ol>
<li>本地代码子包导入</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>otherproject.ai</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>mind</span>
</code></pre></div><p>每种分组中, 应该根据每个模块的完整包路径按字典序排序, 忽略大小写.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>collections</span>
<span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>queue</span>
<span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>sys</span>

<span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>absl</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>app</span>
<span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>absl</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>flags</span>
<span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>bs4</span>
<span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>cryptography</span>
<span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>tensorflow</span> <span style=color:#204a87;font-weight:700>as</span> <span style=color:#000>tf</span>

<span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>book.genres</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>scifi</span>
<span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>myproject.backend</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>huxley</span>
<span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>myproject.backend.hgwells</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>time_machine</span>
<span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>myproject.backend.state_machine</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>main_loop</span>
<span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>otherproject.ai</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>body</span>
<span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>otherproject.ai</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>mind</span>
<span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>otherproject.ai</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>soul</span>

<span style=color:#8f5902;font-style:italic># Older style code may have these imports down here instead:</span>
<span style=color:#8f5902;font-style:italic>#from myproject.backend.hgwells import time_machine</span>
<span style=color:#8f5902;font-style:italic>#from myproject.backend.state_machine import main_loop</span>
</code></pre></div><h2 id=语句>语句</h2>
<blockquote>
<p>Tip: 通常每个语句应该独占一行</p>
</blockquote>
<p>不过, 如果测试结果与测试语句在一行放得下, 你也可以将它们放在同一行. 如果是if语句, 只有在没有else时才能这样做. 特别地, 绝不要对 <code>try/except</code> 这样做, 因为try和except不能放在同一行.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># Yes:</span>

  <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>bar</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#8f5902;font-style:italic># No:</span>

  <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>bar</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>)</span>
  <span style=color:#204a87;font-weight:700>else</span><span style=color:#000;font-weight:700>:</span>   <span style=color:#000>baz</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>)</span>

  <span style=color:#204a87;font-weight:700>try</span><span style=color:#000;font-weight:700>:</span>               <span style=color:#000>bar</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>)</span>
  <span style=color:#204a87;font-weight:700>except</span> <span style=color:#c00;font-weight:700>ValueError</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>baz</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>)</span>

  <span style=color:#204a87;font-weight:700>try</span><span style=color:#000;font-weight:700>:</span>
      <span style=color:#000>bar</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>)</span>
  <span style=color:#204a87;font-weight:700>except</span> <span style=color:#c00;font-weight:700>ValueError</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>baz</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><h2 id=访问控制>访问控制</h2>
<blockquote>
<p>Tip: 在Python中, 对于琐碎又不太重要的访问函数, 你应该直接使用公有变量来取代它们, 这样可以避免额外的函数调用开销. 当添加更多功能时, 你可以用属性(property)来保持语法的一致性.</p>
</blockquote>
<p>(译者注: 重视封装的面向对象程序员看到这个可能会很反感, 因为他们一直被教育: 所有成员变量都必须是私有的! 其实, 那真的是有点麻烦啊. 试着去接受Pythonic哲学吧)</p>
<p>另一方面, 如果访问更复杂, 或者变量的访问开销很显著, 那么你应该使用像 <code>get_foo()</code> 和 <code>set_foo()</code> 这样的函数调用. 如果之前的代码行为允许通过属性(property)访问 , 那么就不要将新的访问函数与属性绑定. 这样, 任何试图通过老方法访问变量的代码就没法运行, 使用者也就会意识到复杂性发生了变化.</p>
<h2 id=命名>命名</h2>
<blockquote>
<p>Tip: 模块名写法: <code>module_name</code> ;包名写法: <code>package_name</code> ;类名: <code>ClassName</code> ;方法名: <code>method_name</code> ;异常名: <code>ExceptionName</code> ;函数名: <code>function_name</code> ;全局常量名: <code>GLOBAL_CONSTANT_NAME</code> ;全局变量名: <code>global_var_name</code> ;实例名: <code>instance_var_name</code> ;函数参数名: <code>function_parameter_name</code> ;局部变量名: <code>local_var_name</code> . 函数名,变量名和文件名应该是描述性的,尽量避免缩写,特别要避免使用非项目人员不清楚难以理解的缩写,不要通过删除单词中的字母来进行缩写. 始终使用 <code>.py</code> 作为文件后缀名,不要用破折号.</p>
</blockquote>
<h3 id=应该避免的名称>应该避免的名称</h3>
<blockquote>
<ol>
<li>单字符名称, 除了计数器和迭代器,作为 <code>try/except</code> 中异常声明的 <code>e</code>,作为 <code>with</code> 语句中文件句柄的 <code>f</code>.</li>
<li>包/模块名中的连字符(-)</li>
<li>双下划线开头并结尾的名称(Python保留, 例如__init__)</li>
</ol>
</blockquote>
<h3 id=命名约定>命名约定</h3>
<blockquote>
<ol>
<li>所谓"内部(Internal)&ldquo;表示仅模块内可用, 或者, 在类内是保护或私有的.</li>
<li>用单下划线(_)开头表示模块变量或函数是protected的(使用from module import *时不会包含).</li>
<li>用双下划线(__)开头的实例变量或方法表示类内私有.</li>
<li>将相关的类和顶级函数放在同一个模块里. 不像Java, 没必要限制一个类一个模块.</li>
<li>对类名使用大写字母开头的单词(如CapWords, 即Pascal风格), 但是模块名应该用小写加下划线的方式(如lower_with_under.py). 尽管已经有很多现存的模块使用类似于CapWords.py这样的命名, 但现在已经不鼓励这样做, 因为如果模块名碰巧和类名一致, 这会让人困扰.</li>
</ol>
</blockquote>
<h3 id=文件名>文件名</h3>
<blockquote>
<p>所有python脚本文件都应该以 <code>.py</code> 为后缀名且不包含 <code>-</code>.若是需要一个无后缀名的可执行文件,可以使用软联接或者包含 <code>exec "$0.py" "$@"</code> 的bash脚本.</p>
</blockquote>
<h3 id=python之父guido推荐的规范>Python之父Guido推荐的规范</h3>
<table>
<thead>
<tr>
<th>Type</th>
<th>Public</th>
<th>Internal</th>
</tr>
</thead>
<tbody>
<tr>
<td>Modules</td>
<td>lower_with_under</td>
<td>_lower_with_under</td>
</tr>
<tr>
<td>Packages</td>
<td>lower_with_under</td>
<td></td>
</tr>
<tr>
<td>Classes</td>
<td>CapWords</td>
<td>_CapWords</td>
</tr>
<tr>
<td>Exceptions</td>
<td>CapWords</td>
<td></td>
</tr>
<tr>
<td>Functions</td>
<td>lower_with_under()</td>
<td>_lower_with_under()</td>
</tr>
<tr>
<td>Global/Class Constants</td>
<td>CAPS_WITH_UNDER</td>
<td>_CAPS_WITH_UNDER</td>
</tr>
<tr>
<td>Global/Class Variables</td>
<td>lower_with_under</td>
<td>_lower_with_under</td>
</tr>
<tr>
<td>Instance Variables</td>
<td>lower_with_under</td>
<td>_lower_with_under (protected) or __lower_with_under (private)</td>
</tr>
<tr>
<td>Method Names</td>
<td>lower_with_under()</td>
<td>_lower_with_under() (protected) or __lower_with_under() (private)</td>
</tr>
<tr>
<td>Function/Method Parameters</td>
<td>lower_with_under</td>
<td></td>
</tr>
<tr>
<td>Local Variables</td>
<td>lower_with_under</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id=main>Main</h2>
<blockquote>
<p>Tip: 即使是一个打算被用作脚本的文件, 也应该是可导入的. 并且简单的导入不应该导致这个脚本的主功能(main functionality)被执行, 这是一种副作用. 主功能应该放在一个main()函数中.</p>
</blockquote>
<p>在Python中, pydoc以及单元测试要求模块必须是可导入的. 你的代码应该在执行主程序前总是检查 <code>if __name__ == '__main__'</code> , 这样当模块被导入时主程序就不会被执行.</p>
<p>若使用 <a href=https://github.com/abseil/abseil-py>absl</a>, 请使用 <code>app.run</code> :</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>absl</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>app</span>
<span style=color:#ce5c00;font-weight:700>...</span>

<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>argv</span><span style=color:#000;font-weight:700>):</span>
    <span style=color:#8f5902;font-style:italic># process non-flag arguments</span>
    <span style=color:#ce5c00;font-weight:700>...</span>

<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>__name__</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#39;__main__&#39;</span><span style=color:#000;font-weight:700>:</span>
    <span style=color:#000>app</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>run</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>main</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><p>否则,使用:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>():</span>
    <span style=color:#ce5c00;font-weight:700>...</span>

<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>__name__</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#39;__main__&#39;</span><span style=color:#000;font-weight:700>:</span>
    <span style=color:#000>main</span><span style=color:#000;font-weight:700>()</span>
</code></pre></div><p>所有的顶级代码在模块导入时都会被执行. 要小心不要去调用函数, 创建对象, 或者执行那些不应该在使用pydoc时执行的操作.</p>
<h2 id=函数长度>函数长度</h2>
<blockquote>
<p>Tip: 推荐函数功能尽量集中,简单,小巧</p>
</blockquote>
<p>不对函数长度做硬性限制.但是若一个函数超过来40行,推荐考虑一下是否可以在不损害程序结构的情况下对其进行分解. 因为即使现在长函数运行良好,但几个月后可能会有人修改它并添加一些新的行为,这容易产生难以发现的bug.保持函数的简练,使其更加容易阅读和修改. 当遇到一些很长的函数时,若发现调试比较困难或是想在其他地方使用函数的一部分功能,不妨考虑将这个场函数进行拆分.</p>
<h2 id=类型注释>类型注释</h2>
<h3 id=通用规则>通用规则</h3>
<blockquote>
<ol>
<li>
<p>请先熟悉下 &lsquo;PEP-484 <a href=https://www.python.org/dev/peps/pep-0484/>https://www.python.org/dev/peps/pep-0484/</a>'_</p>
</li>
<li>
<p>对于方法，仅在必要时才对 <code>self</code> 或 <code>cls</code> 注释</p>
</li>
<li>
<p>若对类型没有任何显示，请使用 <code>Any</code></p>
</li>
<li>
<ul>
<li>
<p>无需注释模块中的所有函数</p>
<p>公共的API需要注释在代码的安全性，清晰性和灵活性上进行权衡是否注释对于容易出现类型相关的错误的代码进行注释难以理解的代码请进行注释若代码中的类型已经稳定，可以进行注释. 对于一份成熟的代码，多数情况下，即使注释了所有的函数，也不会丧失太多的灵活性.</p>
</li>
</ul>
</li>
</ol>
</blockquote>
<h2 id=换行>换行</h2>
<blockquote>
<p>尽量遵守既定的缩进规则.注释后，很多函数签名将会变成每行一个参数.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>my_method</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>,</span>
              <span style=color:#000>first_var</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87>int</span><span style=color:#000;font-weight:700>,</span>
              <span style=color:#000>second_var</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Foo</span><span style=color:#000;font-weight:700>,</span>
              <span style=color:#000>third_var</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Optional</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>Bar</span><span style=color:#000;font-weight:700>])</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#204a87>int</span><span style=color:#000;font-weight:700>:</span>
<span style=color:#ce5c00;font-weight:700>...</span>
</code></pre></div><p>尽量在变量之间换行而不是在变量和类型注释之间.当然,若所有东西都在一行上,也可以接受.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>my_method</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>first_var</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87>int</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#204a87>int</span><span style=color:#000;font-weight:700>:</span>
<span style=color:#ce5c00;font-weight:700>...</span>
</code></pre></div><p>若是函数名,末位形参和返回值的类型注释太长,也可以进行换行,并在新行进行4格缩进.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>my_method</span><span style=color:#000;font-weight:700>(</span>
    <span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>first_var</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87>int</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>Tuple</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>MyLongType1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>MyLongType1</span><span style=color:#000;font-weight:700>]:</span>
<span style=color:#ce5c00;font-weight:700>...</span>
</code></pre></div><p>若是末位形参和返回值类型注释不适合在同一行上,可以换行,缩进为4空格,并保持闭合的括号 <code>)</code> 和 <code>def</code> 对齐</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># Yes:</span>
<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>my_method</span><span style=color:#000;font-weight:700>(</span>
    <span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>other_arg</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Optional</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>MyLongType</span><span style=color:#000;font-weight:700>]</span>
<span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>Dict</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>OtherLongType</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>MyLongType</span><span style=color:#000;font-weight:700>]:</span>
<span style=color:#ce5c00;font-weight:700>...</span>
</code></pre></div><p><code>pylint</code> 允许闭合括号 <code>)</code> 换至新行并与 开启括号 <code>(</code> 对齐,但这样的可读性不好.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># No:</span>
<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>my_method</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>,</span>
                <span style=color:#000>other_arg</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Optional</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>MyLongType</span><span style=color:#000;font-weight:700>]</span>
             <span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>Dict</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>OtherLongType</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>MyLongType</span><span style=color:#000;font-weight:700>]:</span>
<span style=color:#ce5c00;font-weight:700>...</span>
</code></pre></div><p>如上所示,尽量不要在一个类型注释中进行换行.但是有时类型注释过长需要换行时,请尽量保持子类型中不被换行.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>my_method</span><span style=color:#000;font-weight:700>(</span>
    <span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#000>first_var</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Tuple</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>List</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>MyLongType1</span><span style=color:#000;font-weight:700>],</span>
                     <span style=color:#000>List</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>MyLongType2</span><span style=color:#000;font-weight:700>]],</span>
    <span style=color:#000>second_var</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>List</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>Dict</span><span style=color:#000;font-weight:700>[</span>
        <span style=color:#000>MyLongType3</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>MyLongType4</span><span style=color:#000;font-weight:700>]])</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#204a87;font-weight:700>None</span><span style=color:#000;font-weight:700>:</span>
<span style=color:#ce5c00;font-weight:700>...</span>
</code></pre></div><p>若一个类型注释确实太长,则应优先考虑对过长的类型使用别名 <a href=https://google.github.io/styleguide/pyguide.html#typing-aliases>alias</a>. 其次是考虑在冒号后 <a href=https://github.com/zh-google-styleguide/zh-google-styleguide/blob/master/google-python-styleguide/python_style_rules.rst#id30><code>](https://github.com/zh-google-styleguide/zh-google-styleguide/blob/master/google-python-styleguide/python_style_rules.rst#id28):[</code></a>进行换行并添加4格空格缩进.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># Yes:</span>
<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>my_function</span><span style=color:#000;font-weight:700>(</span>
    <span style=color:#000>long_variable_name</span><span style=color:#000;font-weight:700>:</span>
        <span style=color:#000>long_module_name</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>LongTypeName</span><span style=color:#000;font-weight:700>,</span>
<span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#204a87;font-weight:700>None</span><span style=color:#000;font-weight:700>:</span>
<span style=color:#ce5c00;font-weight:700>...</span>
<span style=color:#8f5902;font-style:italic># No:</span>
<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>my_function</span><span style=color:#000;font-weight:700>(</span>
    <span style=color:#000>long_variable_name</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>long_module_name</span><span style=color:#ce5c00;font-weight:700>.</span>
        <span style=color:#000>LongTypeName</span><span style=color:#000;font-weight:700>,</span>
<span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#204a87;font-weight:700>None</span><span style=color:#000;font-weight:700>:</span>
<span style=color:#ce5c00;font-weight:700>...</span>
</code></pre></div></blockquote>
<h3 id=预先声明>预先声明</h3>
<blockquote>
<p>若需要使用一个当前模块尚未定义的类名,比如想在类声明中使用类名,请使用类名的字符串</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>MyClass</span><span style=color:#000;font-weight:700>:</span>

  <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>__init__</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>,</span>
               <span style=color:#000>stack</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>List</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;MyClass&#34;</span><span style=color:#000;font-weight:700>])</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#204a87;font-weight:700>None</span><span style=color:#000;font-weight:700>:</span>
</code></pre></div></blockquote>
<h3 id=参数默认值>参数默认值</h3>
<blockquote>
<p>依据 <a href=https://www.python.org/dev/peps/pep-0008/#other-recommendations>PEP-008</a> ,仅对同时具有类型注释和默认值的参数的 <code>=</code> 周围加空格.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># Yes:</span>
<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>a</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87>int</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#204a87>int</span><span style=color:#000;font-weight:700>:</span>
<span style=color:#ce5c00;font-weight:700>...</span>
<span style=color:#8f5902;font-style:italic># No:</span>
<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>a</span><span style=color:#000;font-weight:700>:</span><span style=color:#204a87>int</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#204a87>int</span><span style=color:#000;font-weight:700>:</span>
<span style=color:#ce5c00;font-weight:700>...</span>
</code></pre></div></blockquote>
<h3 id=nonetype>NoneType</h3>
<blockquote>
<p>在python的类型系统中, <code>NoneType</code> 是 &ldquo;一等对象&rdquo;,为了输入方便, <code>None</code> 是 <code>NoneType</code> 的别名.一个变量若是 <code>None</code>,则该变量必须被声明.我们可以使用 <code>Union</code>, 但若类型仅仅只是对应另一个其他类型,建议使用 <code>Optional</code>. 尽量显式而非隐式的使用 <code>Optional</code>.在PEP-484的早期版本中允许使用 <code>a: Text = None</code> 来替代 <code>a: Optional[Text] = None</code>,当然,现在不推荐这么做了.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># Yes:</span>
<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>a</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Optional</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>Text</span><span style=color:#000;font-weight:700>],</span> <span style=color:#000>b</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Optional</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>Text</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>None</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>Text</span><span style=color:#000;font-weight:700>:</span>
    <span style=color:#ce5c00;font-weight:700>...</span>
<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>multiple_nullable_union</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>a</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Union</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>None</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Text</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87>int</span><span style=color:#000;font-weight:700>])</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>Text</span>
    <span style=color:#ce5c00;font-weight:700>...</span>
<span style=color:#8f5902;font-style:italic># No:</span>
<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>nullable_union</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>a</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Union</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>None</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Text</span><span style=color:#000;font-weight:700>])</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>Text</span><span style=color:#000;font-weight:700>:</span>
    <span style=color:#ce5c00;font-weight:700>...</span>
<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>implicit_optional</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>a</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Text</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>None</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>Text</span><span style=color:#000;font-weight:700>:</span>
    <span style=color:#ce5c00;font-weight:700>...</span>
</code></pre></div></blockquote>
<h3 id=类型别名>类型别名</h3>
<blockquote>
<p>复杂类型应使用别名,别名的命名可参照帕斯卡命名.若别名仅在当前模块使用,应在名称前加<code>_</code>变为私有的. 如下例子中,模块名和类型名连一起过长:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#000>_ShortName</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>module_with_long_name</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>TypeWithLongName</span>
<span style=color:#000>ComplexMap</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Mapping</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>Text</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>List</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>Tuple</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87>int</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87>int</span><span style=color:#000;font-weight:700>]]]</span>
</code></pre></div></blockquote>
<h3 id=忽略类型注释>忽略类型注释</h3>
<blockquote>
<p>可以使用特殊的行尾注释 <code># type: ignore</code> 来禁用该行的类型检查. <code>pytype</code> 针对特定错误有一个禁用选项(类似lint):</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># pytype: disable=attribute-error</span>
</code></pre></div></blockquote>
<h3 id=变量类型注解>变量类型注解</h3>
<blockquote>
<p>当一个内部变量难以推断其类型时,可以有以下方法来指示其类型:</p>
<p>**类型注释</p>
<p>使用行尾注释 <code># type:</code>:</p>
<blockquote>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#000>a</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>SomeUndecoratedFunction</span><span style=color:#000;font-weight:700>()</span>  <span style=color:#8f5902;font-style:italic># type: Foo</span>
</code></pre></div></blockquote>
<p><strong>带类型注解的复制</strong> 如函数形参一样,在变量名和等号间加入冒号和类型:</p>
<blockquote>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#000>a</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>SomeUndecoratedFunction</span><span style=color:#000;font-weight:700>()</span>
</code></pre></div></blockquote>
</blockquote>
<h3 id=tuples-vs-lists>Tuples vs Lists</h3>
<blockquote>
<p>类型化的Lists只能包含单一类型的元素.但类型化的Tuples可以包含单一类型的元素或者若干个不同类型的元素,通常被用来注解返回值的类型. (译者注: 注意这里是指的类型注解中的写法,实际python中,list和tuple都是可以在一个序列中包含不同类型元素的,当然,本质其实list和tuple中放的是元素的引用)</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#000>a</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>]</span>  <span style=color:#8f5902;font-style:italic># type: List[int]</span>
<span style=color:#000>b</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>)</span>  <span style=color:#8f5902;font-style:italic># type: Tuple[int, ...]</span>
<span style=color:#000>c</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;2&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>3.5</span><span style=color:#000;font-weight:700>)</span>  <span style=color:#8f5902;font-style:italic># type: Tuple[int, Text, float]</span>
</code></pre></div></blockquote>
<h3 id=typevars>TypeVars</h3>
<blockquote>
<p>python的类型系统是支持泛型的.一种常见的方式就是使用工厂函数 <code>TypeVars</code>.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>typing</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>List</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>TypeVar</span>
<span style=color:#000>T</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>TypeVar</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;T&#34;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#ce5c00;font-weight:700>...</span>
<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>next</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>l</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>List</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>])</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>T</span><span style=color:#000;font-weight:700>:</span>
    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>l</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>pop</span><span style=color:#000;font-weight:700>()</span>
</code></pre></div><p>TypeVar也可以被限定成若干种类型</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#000>AddableType</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>TypeVar</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;AddableType&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87>int</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87>float</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Text</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>add</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>a</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>AddableType</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>b</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>AddableType</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>AddableType</span><span style=color:#000;font-weight:700>:</span>
    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>a</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#000>b</span>
</code></pre></div><p><code>typing</code> 模块中一个常见的预定义类型变量是 <code>AnyStr</code>.它可以用来注解类似 <code>bytes</code>, <code>unicode</code> 以及一些相似类型.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>typing</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>AnyStr</span>
<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>check_length</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>x</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>AnyStr</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>AnyStr</span><span style=color:#000;font-weight:700>:</span>
    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#204a87>len</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>x</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>&lt;=</span> <span style=color:#0000cf;font-weight:700>42</span><span style=color:#000;font-weight:700>:</span>
        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>x</span>
    <span style=color:#204a87;font-weight:700>raise</span> <span style=color:#c00;font-weight:700>ValueError</span><span style=color:#000;font-weight:700>()</span>
</code></pre></div></blockquote>
<h3 id=字符串类型>字符串类型</h3>
<blockquote>
<p>如何正确的注释字符串的相关类型和要使用的python版本有关. 对于仅在 python3 下运行的代码,首选使用 <code>str</code>. 使用 <code>Text</code> 也可以.但是两个不要混用,保持风格一致. 对于需要兼容 python2 的代码,使用 <code>Text</code>.在少数情况下,使用 <code>str</code> 也许更加清晰.不要使用 <code>unicode</code>,因为 python3 里没有这个类型. 造成这种差异的原因是因为,在不同的python版本中,<code>str</code> 意义不同.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># No:</span>
<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>py2_code</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>x</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87>str</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>unicode</span><span style=color:#000;font-weight:700>:</span>
<span style=color:#ce5c00;font-weight:700>...</span>
</code></pre></div><p>对于需要处理二进制数据的代码,使用 <code>bytes</code>.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>deals_with_binary_data</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>x</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87>bytes</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#204a87>bytes</span><span style=color:#000;font-weight:700>:</span>
  <span style=color:#ce5c00;font-weight:700>...</span>
</code></pre></div><p>python2 中的文本类数据类型包括<code>str</code>和<code>unicode</code>,而python3 中仅有 <code>str</code>.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>typing</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>Text</span>
<span style=color:#ce5c00;font-weight:700>...</span>
<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>py2_compatible</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>x</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Text</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>Text</span><span style=color:#000;font-weight:700>:</span>
<span style=color:#ce5c00;font-weight:700>...</span>
<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>py3_only</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>x</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87>str</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#204a87>str</span><span style=color:#000;font-weight:700>:</span>
<span style=color:#ce5c00;font-weight:700>...</span>
</code></pre></div><p>若类型既可以是二进制也可以是文本,那么就使用 <code>Union</code> 进行注解,并按照之前规则使用合适的文本类型注释.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>typing</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>Text</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Union</span>
<span style=color:#ce5c00;font-weight:700>...</span>
<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>py2_compatible</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>x</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Union</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87>bytes</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Text</span><span style=color:#000;font-weight:700>])</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>Union</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87>bytes</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Text</span><span style=color:#000;font-weight:700>]:</span>
<span style=color:#ce5c00;font-weight:700>...</span>
<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>py3_only</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>x</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Union</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87>bytes</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87>str</span><span style=color:#000;font-weight:700>])</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>Union</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87>bytes</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87>str</span><span style=color:#000;font-weight:700>]:</span>
<span style=color:#ce5c00;font-weight:700>...</span>
</code></pre></div><p>若一个函数中的字符串类型始终相同,比如上述函数中返回值类型和形参类型都一样,使用 <a href=https://google.github.io/styleguide/pyguide.html#typing-type-var>AnyStr</a>. 这样写可以方便将代码移植到 python3</p>
</blockquote>
<h3 id=类型的导入>类型的导入</h3>
<blockquote>
<p>对于 <code>typing</code> 模块中类的导入,请直接导入类本身.你可以显式的在一行中从 <code>typing</code> 模块导入多个特定的类,例如:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>typing</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>Any</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Dict</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Optional</span>
</code></pre></div><p>以此方式导入的类将被加入到本地的命名空间,因此所有 <code>typing</code> 模块中的类都应被视为关键字,不要在代码中定义并覆盖它们.若这些类和现行代码中的变量或者方法发生命名冲突,可以考虑使用 [<code>](https://github.com/zh-google-styleguide/zh-google-styleguide/blob/master/google-python-styleguide/python_style_rules.rst#id32)import x as y</code>的导入形式:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>typing</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>Any</span> <span style=color:#204a87;font-weight:700>as</span> <span style=color:#000>AnyType</span>
</code></pre></div></blockquote>
<h3 id=条件导入>条件导入</h3>
<blockquote>
<p>在一些特殊情况下,比如当在运行时需要避免类型检查所需的一些导入时,可能会用到条件导入.但这类方法并不推荐,首选方法应是重构代码使类型检查所需的模块可以在顶层导入. 仅用于类型注解的导入可以放在 <code>if TYPE_CHECKING:</code> 语句块内.</p>
<ol>
<li>通过条件导入引入的类的注解须是字符串string,这样才能和python3.6之前的代码兼容.因为python3.6之前,类型注解是会进行求值的.</li>
<li>条件导入引入的包应仅仅用于类型注解,别名也是如此.否则,将引起运行错误,条件导入的包在运行时是不会被实际导入的.</li>
<li>条件导入的语句块应放在所有常规导入的语句块之后.</li>
<li>在条件导入的语句块的导入语句之间不应有空行.</li>
<li>和常规导入一样,请对该导入语句进行排序.</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>typing</span>
<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>typing</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>TYPE_CHECKING</span><span style=color:#000;font-weight:700>:</span>
    <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>sketch</span>
<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>f</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>x</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;sketch.Sketch&#34;</span><span style=color:#000;font-weight:700>):</span> <span style=color:#ce5c00;font-weight:700>...</span>
</code></pre></div></blockquote>
<h3 id=循环依赖>循环依赖</h3>
<blockquote>
<p>由类型注释引起的循环依赖可能会导致代码异味,应对其进行重构.虽然从技术上我们可以兼容循环依赖,但是 <a href=https://google.github.io/styleguide/pyguide.html#typing-build-deps>构建系统</a> 是不会容忍这样做的,因为每个模块都需要依赖一个其他模块. 将引起循环依赖的导入模块使用 <code>Any</code> 导入.使用 <code>alias</code> 来起一个有意义的别名,推荐使用真正模块的类型名的字符串作为别名(Any的任何属性依然是Any,使用字符串只是帮助我们理解代码).别名的定义应该和最后的导入语句之间空一行.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>typing</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>Any</span>

<span style=color:#000>some_mod</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Any</span>  <span style=color:#8f5902;font-style:italic># some_mod.py imports this module.</span>
<span style=color:#ce5c00;font-weight:700>...</span>

<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>my_method</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>var</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;some_mod.SomeType&#34;</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#204a87;font-weight:700>None</span><span style=color:#000;font-weight:700>:</span>
<span style=color:#ce5c00;font-weight:700>...</span>
</code></pre></div></blockquote>
<h3 id=泛型>泛型</h3>
<blockquote>
<p>在注释时,尽量将泛型类型注释为类型参数.否则, <a href=https://www.python.org/dev/peps/pep-0484/#the-any-type>泛型参数将被视为是 Any</a> .</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>get_names</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>employee_ids</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>List</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87>int</span><span style=color:#000;font-weight:700>])</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>Dict</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87>int</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Any</span><span style=color:#000;font-weight:700>]:</span>
<span style=color:#ce5c00;font-weight:700>...</span>
<span style=color:#8f5902;font-style:italic># These are both interpreted as get_names(employee_ids: List[Any]) -&gt; Dict[Any, Any]</span>
<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>get_names</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>employee_ids</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87>list</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>Dict</span><span style=color:#000;font-weight:700>:</span>
<span style=color:#ce5c00;font-weight:700>...</span>

<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>get_names</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>employee_ids</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>List</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>Dict</span><span style=color:#000;font-weight:700>:</span>
<span style=color:#ce5c00;font-weight:700>...</span>
</code></pre></div><p>若实在要用 Any 作为泛型类型,请显式的使用它.但在多数情况下, <code>TypeVar</code> 通常可能是更好的选择.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>get_names</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>employee_ids</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>List</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>Any</span><span style=color:#000;font-weight:700>])</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>Dict</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>Any</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Text</span><span style=color:#000;font-weight:700>]:</span>
    <span style=color:#4e9a06>&#34;&#34;&#34;Returns a mapping from employee ID to employee name for given IDs.&#34;&#34;&#34;</span>
<span style=color:#000>T</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>TypeVar</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;T&#39;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>get_names</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>employee_ids</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>List</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>])</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>Dict</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Text</span><span style=color:#000;font-weight:700>]:</span>
    <span style=color:#4e9a06>&#34;&#34;&#34;Returns a mapping from employee ID to employee name for given IDs.&#34;&#34;&#34;</span>
</code></pre></div></blockquote>
<style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style>
<div class=d-print-none>
<h2 class=feedback--title>Feedback</h2>
<p class=feedback--question>Was this page helpful?</p>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button>
<p class="feedback--response feedback--response-yes">
Glad to hear it! Please <a href=https://github.com/TaibiaoGuo/devSpec/discussions/new>tell us how we can improve</a>.
</p>
<p class="feedback--response feedback--response-no">
Sorry to hear that. Please <a href=https://github.com/TaibiaoGuo/devSpec/discussions/new>tell us how we can improve</a>.
</p>
</div>
<script>const yesButton=document.querySelector('.feedback--answer-yes'),noButton=document.querySelector('.feedback--answer-no'),yesResponse=document.querySelector('.feedback--response-yes'),noResponse=document.querySelector('.feedback--response-no'),disableButtons=()=>{yesButton.disabled=!0,noButton.disabled=!0},sendFeedback=b=>{if(typeof ga!='function')return;const a={command:'send',hitType:'event',category:'Helpful',action:'click',label:window.location.pathname,value:b};ga(a.command,a.hitType,a.category,a.action,a.label,a.value)};yesButton.addEventListener('click',()=>{yesResponse.classList.add('feedback--response__visible'),disableButtons(),sendFeedback(1)}),noButton.addEventListener('click',()=>{noResponse.classList.add('feedback--response__visible'),disableButtons(),sendFeedback(0)})</script>
<br>
<div class="text-muted mt-5 pt-3 border-top">
最后修改
September 12, 2021
: <a href=https://github.com/TaibiaoGuo/devSpec/commit/f85e7efe28757d285896c282809981e6b88a7d46>Feature 1.1.0/python (#7) (f85e7ef)</a>
</div>
</div>
</main>
</div>
</div>
<footer class="bg-dark py-5 row d-print-none">
<div class="container-fluid mx-sm-5">
<div class=row>
<div class="col-6 col-sm-4 text-xs-center order-sm-2">
</div>
<div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub>
<a class=text-white target=_blank rel=noopener href=https://github.com/TaibiaoGuo/devSpec aria-label=GitHub>
<i class="fab fa-github"></i>
</a>
</li>
</ul>
</div>
<div class="col-12 col-sm-4 text-center py-2 order-sm-2">
<small class=text-white>&copy; 2021 TaibiaoGuo All Rights Reserved</small>
<small class=ml-1><a href=https://policies.google.com/privacy target=_blank rel=noopener>隐私政策</a></small>
<p class=mt-2><a href=/docs/about/>关于</a></p>
</div>
</div>
</div>
</footer>
</div>
<script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js integrity=sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/mermaid@8.11.2/dist/mermaid.min.js integrity=sha384-m8Pdaep6Qk8sW3J6XhPOiwUww3maU9HxZTLvEfSEB4e1UVvTdHyfJsYmEfYqvwLC crossorigin=anonymous></script>
<script src=/js/tabpane-persist.js></script>
<script src=/js/deflate.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.2/dist/katex.min.css integrity=sha384-Cqd8ihRLum0CCg8rz0hYKPoLZ3uw+gES2rXQXycqnL5pgVQIflxAUDS7ZSjITLb5 crossorigin=anonymous>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.2/dist/katex.min.js integrity=sha384-1Or6BdeNQb0ezrmtGeqQHFpppNd7a/gw29xeiSikBbsb44xu3uAo8c7FwbF5jhbd crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.2/dist/contrib/auto-render.min.js integrity=sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl crossorigin=anonymous onload='renderMathInElement(document.body,{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!1,left:"$",right:"$"}]})'></script>
<script src=/js/main.js></script>
</body>
</html>