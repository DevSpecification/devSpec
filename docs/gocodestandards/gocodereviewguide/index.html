<!doctype html><html lang=zh class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.82.1"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>devSpec Go 代码审核指南 | 开发规范</title><meta property="og:title" content="devSpec Go 代码审核指南"><meta property="og:description" content="本篇文章收集了 Go 代码审核过程中的常见的评论，所以一个详细的解释可以用缩写来指代。 这是一个常见错误的清单，而不是一个全面的风格指南。
你可以将此作为 Effective Go 的补充。
Gofmt 在你的代码上运行 gofmt 来自动修复大部分的机械样式问题。几乎所有的 Go 代码都使用 gofmt。本文档的其余部分针对非机械的样式点。
另一种方法是在 goimports 中使用 gofmt 的超集，该超集可根据需要额外添加 (和删除) 导入行。
###注释语句
参考 golang.org/doc/effective_go.html#c&mldr; 。 记录声明的注释应该是完整的句子，即使这似乎有点多余。 这种方法使它们在提取到 godoc 文档时能够很好地格式化。注释应从所描述的事物的名称开始，并以句号结束：
// Request 表示运行命令的请求。 type Request struct { ... // Encode 将 req 的 JSON 编码写入 w 。 func Encode(w io.Writer, req *Request) { ... 等等。 上下文 上下文的值。上下文类型携带跨越 API 和进程边界的安全证书、跟踪信息、截止日期和取消信号。 Go 程序沿着整个函数调用链显式地传递 Contexts ，包含从传入的 RPC 和 HTTP 请求到传出的请求。
大部分使用上下文的函数都要将其作为第一个参数：
func F(ctx context."><meta property="og:type" content="article"><meta property="og:url" content="/docs/gocodestandards/gocodereviewguide/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2021-04-17T09:04:32+08:00"><meta property="og:site_name" content="开发规范"><meta itemprop=name content="devSpec Go 代码审核指南"><meta itemprop=description content="本篇文章收集了 Go 代码审核过程中的常见的评论，所以一个详细的解释可以用缩写来指代。 这是一个常见错误的清单，而不是一个全面的风格指南。
你可以将此作为 Effective Go 的补充。
Gofmt 在你的代码上运行 gofmt 来自动修复大部分的机械样式问题。几乎所有的 Go 代码都使用 gofmt。本文档的其余部分针对非机械的样式点。
另一种方法是在 goimports 中使用 gofmt 的超集，该超集可根据需要额外添加 (和删除) 导入行。
###注释语句
参考 golang.org/doc/effective_go.html#c&mldr; 。 记录声明的注释应该是完整的句子，即使这似乎有点多余。 这种方法使它们在提取到 godoc 文档时能够很好地格式化。注释应从所描述的事物的名称开始，并以句号结束：
// Request 表示运行命令的请求。 type Request struct { ... // Encode 将 req 的 JSON 编码写入 w 。 func Encode(w io.Writer, req *Request) { ... 等等。 上下文 上下文的值。上下文类型携带跨越 API 和进程边界的安全证书、跟踪信息、截止日期和取消信号。 Go 程序沿着整个函数调用链显式地传递 Contexts ，包含从传入的 RPC 和 HTTP 请求到传出的请求。
大部分使用上下文的函数都要将其作为第一个参数：
func F(ctx context."><meta itemprop=dateModified content="2021-04-17T09:04:32+08:00"><meta itemprop=wordCount content="1014"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="devSpec Go 代码审核指南"><meta name=twitter:description content="本篇文章收集了 Go 代码审核过程中的常见的评论，所以一个详细的解释可以用缩写来指代。 这是一个常见错误的清单，而不是一个全面的风格指南。
你可以将此作为 Effective Go 的补充。
Gofmt 在你的代码上运行 gofmt 来自动修复大部分的机械样式问题。几乎所有的 Go 代码都使用 gofmt。本文档的其余部分针对非机械的样式点。
另一种方法是在 goimports 中使用 gofmt 的超集，该超集可根据需要额外添加 (和删除) 导入行。
###注释语句
参考 golang.org/doc/effective_go.html#c&mldr; 。 记录声明的注释应该是完整的句子，即使这似乎有点多余。 这种方法使它们在提取到 godoc 文档时能够很好地格式化。注释应从所描述的事物的名称开始，并以句号结束：
// Request 表示运行命令的请求。 type Request struct { ... // Encode 将 req 的 JSON 编码写入 w 。 func Encode(w io.Writer, req *Request) { ... 等等。 上下文 上下文的值。上下文类型携带跨越 API 和进程边界的安全证书、跟踪信息、截止日期和取消信号。 Go 程序沿着整个函数调用链显式地传递 Contexts ，包含从传入的 RPC 和 HTTP 请求到传出的请求。
大部分使用上下文的函数都要将其作为第一个参数：
func F(ctx context."><link rel=preload href=/scss/main.min.71ba9275dfeecfaf9ee0894bd6636523096db5cade42211bb21d1907b59fbbfb.css as=style><link href=/scss/main.min.71ba9275dfeecfaf9ee0894bd6636523096db5cade42211bb21d1907b59fbbfb.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><link rel=stylesheet href=/css/tabbed-pane.css></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class=navbar-logo><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class="text-uppercase font-weight-bold">开发规范</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/docs/><span class=active>开发规范</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; 站内搜索…" aria-label=站内搜索… autocomplete=off></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" placeholder="&#xf002; 站内搜索…" aria-label=站内搜索… autocomplete=off>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=/docs/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>开发规范</span></a><ul class="pr-md-3 ul-1"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsoverview-li><a href=/docs/overview/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsoverview><span>总览</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docscodestandards-li><a href=/docs/codestandards/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docscodestandards><span>编码协作规范</span></a><ul class="pr-md-3 ul-2"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscodestandardsgitflow-li><a href=/docs/codestandards/gitflow/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docscodestandardsgitflow><span>Git工作流</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscodestandardscodereview-li><a href=/docs/codestandards/codereview/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docscodestandardscodereview><span>代码审阅</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscodestandardsversion-li><a href=/docs/codestandards/version/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docscodestandardsversion><span>发行和版本控制</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscodestandardslog-li><a href=/docs/codestandards/log/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docscodestandardslog><span>日志</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscodestandardscomment-li><a href=/docs/codestandards/comment/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docscodestandardscomment><span>注释</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscodestandardstest-li><a href=/docs/codestandards/test/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docscodestandardstest><span>测试</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsprojectmanagementstandards-li><a href=/docs/projectmanagementstandards/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsprojectmanagementstandards><span>项目管理标准</span></a><ul class="pr-md-3 ul-2"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsprojectmanagementstandardsteamculture-li><a href=/docs/projectmanagementstandards/teamculture/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsprojectmanagementstandardsteamculture><span>团队文化</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsprojectmanagementstandardsteamarchitecture-li><a href=/docs/projectmanagementstandards/teamarchitecture/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsprojectmanagementstandardsteamarchitecture><span>团队架构</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsprojectmanagementstandardsdevmethod-li><a href=/docs/projectmanagementstandards/devmethod/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsprojectmanagementstandardsdevmethod><span>开发方法论与框架</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsprojectmanagementstandardsprojectlifecycle-li><a href=/docs/projectmanagementstandards/projectlifecycle/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsprojectmanagementstandardsprojectlifecycle><span>项目生命周期</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsautomationintegrationstandards-li><a href=/docs/automationintegrationstandards/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsautomationintegrationstandards><span>持续集成标准</span></a><ul class="pr-md-3 ul-2"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsautomationintegrationstandardstestprocessstandards-li><a href=/docs/automationintegrationstandards/testprocessstandards/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsautomationintegrationstandardstestprocessstandards><span>你需要微服务么</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsautomationintegrationstandardscontinuesintegrationstandards-li><a href=/docs/automationintegrationstandards/continuesintegrationstandards/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsautomationintegrationstandardscontinuesintegrationstandards><span>持续集成</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsmicroservice-li><a href=/docs/microservice/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsmicroservice><span>微服务</span></a><ul class="pr-md-3 ul-2"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsmicroserviceisneedmicroservice-li><a href=/docs/microservice/isneedmicroservice/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsmicroserviceisneedmicroservice><span>你需要微服务么</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsiaas-li><a href=/docs/iaas/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsiaas><span>基础设施即服务</span></a><ul class="pr-md-3 ul-2"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsiaasuserinterface-li><a href=/docs/iaas/userinterface/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsiaasuserinterface><span></span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docsgocodestandards-li><a href=/docs/gocodestandards/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsgocodestandards><span>Go编码规范</span></a><ul class="pr-md-3 ul-2"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsgocodestandardscodestandards-li><a href=/docs/gocodestandards/codestandards/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsgocodestandardscodestandards><span>devSpec Go 编程指南</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docsgocodestandardsgocodereviewguide-li><a href=/docs/gocodestandards/gocodereviewguide/ class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__page" id=m-docsgocodestandardsgocodereviewguide><span class=td-sidebar-nav-active-item>devSpec Go 代码审核指南</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsdocumentationstyleguide-li><a href=/docs/documentationstyleguide/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsdocumentationstyleguide><span>文档样式指南</span></a><ul class="pr-md-3 ul-2"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegeneralprinciple-li><a href=/docs/documentationstyleguide/generalprinciple/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsdocumentationstyleguidegeneralprinciple><span>一般原则</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child collapse" id=m-docsdocumentationstyleguidecodecomment-li><a href=/docs/documentationstyleguide/codecomment/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsdocumentationstyleguidecodecomment><span>API参考文档</span></a><ul class="pr-md-3 ul-3"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidecodecommentapireference-li><a href=/docs/documentationstyleguide/codecomment/apireference/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidecodecommentapireference><span>源代码API参考文档</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidecodecommentgrpcapireference-li><a href=/docs/documentationstyleguide/codecomment/grpcapireference/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidecodecommentgrpcapireference><span>WebAPI参考文档</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidecodecommentwebapireference-li><a href=/docs/documentationstyleguide/codecomment/webapireference/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidecodecommentwebapireference><span>WebAPI参考文档</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child collapse" id=m-docsdocumentationstyleguidegb856t88-li><a href=/docs/documentationstyleguide/gb856t88/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsdocumentationstyleguidegb856t88><span>软件开发文档模板</span></a><ul class="pr-md-3 ul-3"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88feasibilityanalysis-li><a href=/docs/documentationstyleguide/gb856t88/feasibilityanalysis/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88feasibilityanalysis><span>可行性研究报告</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88projectdevelopmentplan-li><a href=/docs/documentationstyleguide/gb856t88/projectdevelopmentplan/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88projectdevelopmentplan><span>项目开发计划</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88softwarerequirements-li><a href=/docs/documentationstyleguide/gb856t88/softwarerequirements/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88softwarerequirements><span>软件需求说明书</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88outlinedesign-li><a href=/docs/documentationstyleguide/gb856t88/outlinedesign/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88outlinedesign><span>概要设计说明书</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88detaileddesignspecification-li><a href=/docs/documentationstyleguide/gb856t88/detaileddesignspecification/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88detaileddesignspecification><span>详细设计说明书</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88usermanual-li><a href=/docs/documentationstyleguide/gb856t88/usermanual/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88usermanual><span>用户操作手册</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88testplan-li><a href=/docs/documentationstyleguide/gb856t88/testplan/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88testplan><span>测试计划</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88databasedesign-li><a href=/docs/documentationstyleguide/gb856t88/databasedesign/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88databasedesign><span>概要设计说明书</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88testanalysisreport-li><a href=/docs/documentationstyleguide/gb856t88/testanalysisreport/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88testanalysisreport><span>测试分析报告</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88monthlydevelopmentprogressreport-li><a href=/docs/documentationstyleguide/gb856t88/monthlydevelopmentprogressreport/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88monthlydevelopmentprogressreport><span>开发进度月报</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88projectdevelopmentsummaryreport-li><a href=/docs/documentationstyleguide/gb856t88/projectdevelopmentsummaryreport/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88projectdevelopmentsummaryreport><span>项目开发总结报告</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88softwaremaintenancemanual-li><a href=/docs/documentationstyleguide/gb856t88/softwaremaintenancemanual/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88softwaremaintenancemanual><span>模块开发卷宗</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88softwareproblemreport-li><a href=/docs/documentationstyleguide/gb856t88/softwareproblemreport/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88softwareproblemreport><span>软件问题报告</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88softwaremodificationreport-li><a href=/docs/documentationstyleguide/gb856t88/softwaremodificationreport/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88softwaremodificationreport><span>软件修改报告</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguideissues-li><a href=/docs/documentationstyleguide/issues/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsdocumentationstyleguideissues><span>Issues</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidepullrequest-li><a href=/docs/documentationstyleguide/pullrequest/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsdocumentationstyleguidepullrequest><span>拉取请求</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsabout-li><a href=/docs/about/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsabout><span>关于</span></a><ul class="pr-md-3 ul-2"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child collapse" id=m-docsaboutcontributing-li><a href=/docs/about/contributing/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsaboutcontributing><span>向 devSpec 贡献文档</span></a><ul class="pr-md-3 ul-3"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsaboutcontributingaddcontent-li><a href=/docs/about/contributing/addcontent/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsaboutcontributingaddcontent><span>添加新文档</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsaboutcontributinggithub-li><a href=/docs/about/contributing/github/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsaboutcontributinggithub><span>使用 GitHub 参与社区活动</span></a></li></ul></li></ul></li></ul></li></ul></nav></div></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/TaibiaoGuo/devSpec/edit/master/content/zh/docs/GoCodeStandards/GoCodeReviewGuide.md target=_blank><i class="fa fa-edit fa-fw"></i> 编辑此页</a>
<a href="https://github.com/TaibiaoGuo/devSpec/new/master/content/zh/docs/GoCodeStandards/GoCodeReviewGuide.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" target=_blank><i class="fa fa-edit fa-fw"></i> 添加子页面</a>
<a href="https://github.com/TaibiaoGuo/devSpec/issues/new?title=devSpec%20Go%20%e4%bb%a3%e7%a0%81%e5%ae%a1%e6%a0%b8%e6%8c%87%e5%8d%97" target=_blank><i class="fab fa-github fa-fw"></i> 提交文档问题</a>
<a href=https://github.com/TaibiaoGuo/devSpec/projects/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i> 提交项目问题</a>
<a id=print href=/docs/gocodestandards/_print/><i class="fa fa-print fa-fw"></i> 整节打印</a></div><nav id=TableOfContents><ul><li><ul><li><a href=#gofmt>Gofmt</a></li><li><a href=#上下文>上下文</a></li><li><a href=#复制>复制</a></li><li><a href=#crypto-rand>Crypto Rand</a></li><li><a href=#声明空的切片>声明空的切片</a></li><li><a href=#文档注释>文档注释</a></li><li><a href=#不要-panic>不要 Panic</a></li><li><a href=#错误信息>错误信息</a></li><li><a href=#例子>例子</a></li><li><a href=#goroutine-生存周期>Goroutine 生存周期</a></li><li><a href=#处理错误>处理错误</a></li><li><a href=#包的导入>包的导入</a></li><li><a href=#包的匿名导入>包的匿名导入</a></li><li><a href=#import-dot>Import Dot</a></li><li><a href=#内联错误>内联错误</a></li><li><a href=#缩进错误处理>缩进错误处理</a></li><li><a href=#首字母缩写>首字母缩写</a></li><li><a href=#接口>接口</a></li><li><a href=#代码行长度>代码行长度</a></li><li><a href=#混合首字母大小写>混合首字母大小写</a></li><li><a href=#命名结果参数>命名结果参数</a></li><li><a href=#裸返回>裸返回</a></li><li><a href=#包注释>包注释</a></li><li><a href=#包名>包名</a></li><li><a href=#参数传递>参数传递</a></li><li><a href=#方法接收者命名>方法接收者命名</a></li><li><a href=#方法接收者类型>方法接收者类型</a></li><li><a href=#同步函数>同步函数</a></li><li><a href=#有用的失败测试>有用的失败测试</a></li><li><a href=#变量名称>变量名称</a></li></ul></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=/docs/>开发规范</a></li><li class=breadcrumb-item><a href=/docs/gocodestandards/>Go编码规范</a></li><li class="breadcrumb-item active" aria-current=page><a href=/docs/gocodestandards/gocodereviewguide/>devSpec Go 代码审核指南</a></li></ol></nav><div class=td-content><h1>devSpec Go 代码审核指南</h1><p>本篇文章收集了 Go 代码审核过程中的常见的评论，所以一个详细的解释可以用缩写来指代。 这是一个常见错误的清单，而不是一个全面的风格指南。</p><p>你可以将此作为 <a href=https://learnku.com/docs/effective-go/2020>Effective Go</a> 的补充。</p><h3 id=gofmt>Gofmt</h3><p>在你的代码上运行 gofmt 来自动修复大部分的机械样式问题。几乎所有的 Go 代码都使用 gofmt。本文档的其余部分针对非机械的样式点。</p><p>另一种方法是在 goimports 中使用 gofmt 的超集，该超集可根据需要额外添加 (和删除) 导入行。</p><p>###注释语句</p><p>参考 golang.org/doc/effective_go.html#c&mldr; 。 记录声明的注释应该是完整的句子，即使这似乎有点多余。 这种方法使它们在提取到
godoc 文档时能够很好地格式化。注释应从所描述的事物的名称开始，并以句号结束：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#8f5902;font-style:italic>// Request 表示运行命令的请求。
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>Request</span> <span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#ce5c00;font-weight:700>...</span>

<span style=color:#8f5902;font-style:italic>// Encode 将 req 的 JSON 编码写入 w 。
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>Encode</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>w</span> <span style=color:#000>io</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Writer</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>req</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Request</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#ce5c00;font-weight:700>...</span>
<span style=color:#000>等等</span><span style=color:#a40000>。</span>
</code></pre></div><h3 id=上下文>上下文</h3><p>上下文的值。上下文类型携带跨越 API 和进程边界的安全证书、跟踪信息、截止日期和取消信号。 Go 程序沿着整个函数调用链显式地传递 Contexts ，包含从传入的 RPC 和 HTTP 请求到传出的请求。</p><p>大部分使用上下文的函数都要将其作为第一个参数：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>F</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#8f5902;font-style:italic>/* 其他参数 */</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{}</span>
</code></pre></div><p>从来没有具体要求需要使用 <code>context.Background()</code> 的函数，但是即使你认为不需要传递上下文 ，也有可能出现错误。默认情况下，都需要传递一个上下文。当你有充分的理由认为替代方案有误的时候，才可以直接使用 <code>context.Background()</code>。</p><p>不要将上下文作为一个成员添加到结构类型；而是将 ctx 参数添加到该类型的每个方法上。一个例外是方法的签名必须要和标准库或者第三方库中的接口匹配的时候。</p><p>不要在函数签名中创建自定义的上下文类型或者使用上下文以外的接口。</p><p>如果要传递应用程序数据，请将其放在参数，方法接收器，全局变量中，或者如果它确实应该属于 Context，则放在 Context 的 Value 属性中。</p><p>所有的 Context 都是不可变的，因此可以将相同的 ctx 传递给多个共享相同截止日期，取消信号，安全凭据，跟踪等的调用。</p><h3 id=复制>复制</h3><p>为避免意外的别名，从另一个包复制 struct 时要小心。例如，<code>bytes.Buffer</code> 类型包含一个 []byte 的 slice。如果复制一个 Buffer，副本中的 slice 可能会对原始数组进行别名操作，从而导致后续方法调用产生令人惊讶的效果。</p><p>通常，如果 T 类型的方法与其指针类型 *T 相关联，请不要复制 T 类型的值。</p><h3 id=crypto-rand>Crypto Rand</h3><p>不要使用 math/rand 来生成密钥，即使是一次性密钥。在没有种子（seed）的情况下，生成器是完全可以被预测的。使用 <code>time.Nanoseconds()</code> 作为种子值，熵只有几位。请使用 <code>crypto/rand</code> 的 <code>Reader</code> 作为替代，如果你倾向于使用文本，请输出成十六进制或 base64 编码：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>(</span>
    <span style=color:#4e9a06>&#34;crypto/rand&#34;</span>
    <span style=color:#8f5902;font-style:italic>// &#34;encoding/base64&#34;
</span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#8f5902;font-style:italic>// &#34;encoding/hex&#34;
</span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#4e9a06>&#34;fmt&#34;</span>
<span style=color:#000;font-weight:700>)</span>

<span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>Key</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#000>buf</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#204a87>make</span><span style=color:#000;font-weight:700>([]</span><span style=color:#204a87;font-weight:700>byte</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>16</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#000>_</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>rand</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Read</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>buf</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
        <span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>  <span style=color:#8f5902;font-style:italic>// 出于随机性，永远都不会发生
</span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000;font-weight:700>}</span>
    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>fmt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Sprintf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;%x&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>buf</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#8f5902;font-style:italic>// or hex.EncodeToString(buf)
</span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#8f5902;font-style:italic>// or base64.StdEncoding.EncodeToString(buf)
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span>
</code></pre></div><h3 id=声明空的切片>声明空的切片</h3><p>当声明一个空 slice 时，倾向于用</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>t</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#204a87;font-weight:700>string</span>
</code></pre></div><p>而不是</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#000>t</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>{}</span>
</code></pre></div><p>前者声明了一个 nil slice 值，而后者声明了一个非 nil 但是零长度的 slice。两者在功能上等同，len 和 cap 均为零，而 nil slice 是首选的风格。</p><p>请注意，在部分场景下，首选非 nil 但零长度的切片，例如编码 JSON 对象时（nil 切片编码为 null，而则 []string{} 可以正确编码为 JSON array []）。</p><p>在设计 interface 时，避免区分 nil slice 和 非 nil，零长度的 slice，因为这会导致细微的编程错误。</p><p>有关 Go 中对于 nil 的更多讨论，请参阅 Francesc Campoy 的演讲 Understanding Nil。</p><h3 id=文档注释>文档注释</h3><p>所有的顶级导出的名称都应该有 doc 注释，重要的未导出类型或函数声明也应如此。有关注释约束的更多信息，请参阅 golang.org/doc/effective_go.html#c&mldr;。</p><h3 id=不要-panic>不要 Panic</h3><p>请参阅 golang.org/doc/effective_go.html#e&mldr;。不要将 panic 用于正常的错误处理。使用 error 和多返回值。</p><h3 id=错误信息>错误信息</h3><p>错误信息不应大写（除非以专有名词或首字母缩略词开头）或以标点符号结尾，因为它们通常是在其他上下文后打印的。即使用 <code>fmt.Errorf("something bad")</code> 而不要使用 <code>fmt.Errorf("Something bad")</code>，因此 <code>log.Printf("Reading %s: %v", filename, err)</code> 的格式中将不会出现额外的大写字母。否则这将不适用于日志记录，因为它是隐式的面向行，而不是在其他消息中组合。</p><h3 id=例子>例子</h3><p>添加新包时，请包含预期用法的示例：可运行的示例，或是演示完整调用链的简单测试。</p><p>阅读有关 testable Example() functions 的更多信息。</p><h3 id=goroutine-生存周期>Goroutine 生存周期</h3><p>当你生成 goroutines 时，要清楚它们何时或是否会退出。</p><p>通过阻塞 channel 的发送或接收可能会引起 goroutines 的内存泄漏：即使被阻塞的 channel 无法访问，垃圾收集器也不会终止 goroutine。</p><p>即使 goroutines 没有泄漏，当它们不再需要时却仍然将其留在内存中会导致其他细微且难以诊断的问题。往已经关闭的 channel 发送数据将会引发 panic。在 “结果不被需要之后” 修改仍在使用的输入仍然可能导致数据竞争。并且将 goroutines 留在内存中任意长时间将会导致不可预测的内存使用。</p><p>请尽量让并发代码足够简单，从而更容易地确认 goroutine 的生命周期。如果这不可行，请记录 goroutines 退出的时间和原因。</p><h3 id=处理错误>处理错误</h3><p>请参阅 <a href=https://golang.org/doc/effective_go.html#errors>https://golang.org/doc/effective_go.html#errors</a>。不要使用 _ 变量丢弃 error。如果函数返回 error，请检查它以确保函数成功。处理 error，返回 error，或者在真正特殊的情况下使用 panic。</p><h3 id=包的导入>包的导入</h3><p>避免包重命名导入，防止名称冲突；好的包名称不需要重命名。如果发生命名冲突，则更倾向于重命名最接近本地的包或特定于项目的包。</p><p>包导入按组进行组织，组与组之间有空行。标准库包始终位于第一组中。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>main</span>

<span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>(</span>
    <span style=color:#4e9a06>&#34;fmt&#34;</span>
    <span style=color:#4e9a06>&#34;hash/adler32&#34;</span>
    <span style=color:#4e9a06>&#34;os&#34;</span>

    <span style=color:#4e9a06>&#34;appengine/foo&#34;</span>
    <span style=color:#4e9a06>&#34;appengine/user&#34;</span>

    <span style=color:#4e9a06>&#34;github.com/foo/bar&#34;</span>
    <span style=color:#4e9a06>&#34;rsc.io/goversion/version&#34;</span>
<span style=color:#000;font-weight:700>)</span>
</code></pre></div><p>goimports 会为你做这件事。</p><h3 id=包的匿名导入>包的匿名导入</h3><p>仅出于副作用而导入的软件包（使用语法 import _&ldquo;pkg&rdquo;）应仅在程序的 main 包或需要它们的测试中导入。</p><h3 id=import-dot>Import Dot</h3><p>部分包由于循环依赖，不能作为测试包的一部分进行测试时，以。形式导入它们可能很有用：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>foo_test</span>

<span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>(</span>
    <span style=color:#4e9a06>&#34;bar/testutil&#34;</span> <span style=color:#8f5902;font-style:italic>// also imports &#34;foo&#34;
</span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000;font-weight:700>.</span> <span style=color:#4e9a06>&#34;foo&#34;</span>
<span style=color:#000;font-weight:700>)</span>
</code></pre></div><p>在这种情况下，测试文件不能位于 foo 包中，因为它使用的 bar/testutil 依赖于 foo 包。所以我们使用 import . 形式使得测试文件伪装成 foo 包的一部分，即使它不是。除了这种情况，不要在程序中使用 import .。它将使程序更难阅读 —— 因为不清楚如 Quux 这样的名称是否是当前包中或导入包中的顶级标识符。</p><h3 id=内联错误>内联错误</h3><p>在 C 和类 C 语言中，通常使函数返回 -1 或 null 之类的值用来发出错误信号或缺少结果：</p><p>// 查找返回键的值，如果没有键的映射，则返回空字符串。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>Lookup</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>string</span>

<span style=color:#8f5902;font-style:italic>// Failing to check a for an in-band error value can lead to bugs:
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>Parse</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Lookup</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>))</span>  <span style=color:#8f5902;font-style:italic>// 返回 &#34;parse failure for value&#34; 而不是 &#34;no value for key&#34;
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>Go</span> <span style=color:#000>对多返回值的支持提供了一种更好的解决方案</span><span style=color:#a40000>。</span><span style=color:#000>函数应返回一个附加值以指示其他返回值是否有效</span><span style=color:#a40000>，</span><span style=color:#000>而不是要求客户端检查内联错误值</span><span style=color:#a40000>。</span><span style=color:#000>此附加值可能是一个</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#a40000>，</span><span style=color:#000>或者在不需要解释时可以是布尔值</span><span style=color:#a40000>。</span><span style=color:#000>它应该是最终的返回值</span><span style=color:#a40000>。</span>

<span style=color:#8f5902;font-style:italic>// 查找并返回键的值，如果没有键的映射，则ok = false。
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>Lookup</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>value</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>ok</span> <span style=color:#204a87;font-weight:700>bool</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>这可以防止调用者错误地使用返回结果</span><span style=color:#a40000>：</span>

<span style=color:#000>Parse</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Lookup</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>))</span>  <span style=color:#8f5902;font-style:italic>//  编译时错误
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>并有利于写出更健壮和可读性更强的代码</span><span style=color:#a40000>：</span>

<span style=color:#000>value</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>ok</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>Lookup</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000;font-weight:700>!</span><span style=color:#000>ok</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>fmt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Errorf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;no value for %q&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000;font-weight:700>}</span>
<span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>Parse</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>value</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><p>此规则适用于公共导出函数，但对于未导出函数也很有用。</p><p>返回值如 nil，""，0 和 -1 在他们是函数的有效返回结果时是可接收的，即调用者不需要将它们与其他值做分别处理。</p><p>某些标准库函数（如 “strings” 包中的函数）会返回内联错误值。这大大简化了字符串操作，代价是需要程序员做更多事。通常，Go 代码应返回表示错误的附加值。</p><h3 id=缩进错误处理>缩进错误处理</h3><p>要缩进错误处理逻辑，不要缩进常规代码。这样可以改进代码的可读性，读者可以快速地浏览逻辑主干。例如，不要写：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#8f5902;font-style:italic>// error handling
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>else</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#8f5902;font-style:italic>// normal code
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span>
<span style=color:#000>相反</span><span style=color:#a40000>，</span><span style=color:#000>应该这样写</span><span style=color:#a40000>：</span>

<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#8f5902;font-style:italic>// 错误处理
</span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#8f5902;font-style:italic>// 或者继续执行。
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span>
<span style=color:#8f5902;font-style:italic>// 一般代码
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>如果</span> <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>语句中有初始化逻辑</span><span style=color:#a40000>，</span><span style=color:#000>像这样</span><span style=color:#a40000>：</span>

<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>x</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>f</span><span style=color:#000;font-weight:700>();</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#8f5902;font-style:italic>// 错误处理
</span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#204a87;font-weight:700>return</span>
<span style=color:#000;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>else</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#8f5902;font-style:italic>// 使用变量 x
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span>
<span style=color:#000>那就把初始化移到外面</span><span style=color:#a40000>，</span><span style=color:#000>改成这样</span><span style=color:#a40000>：</span>

<span style=color:#000>x</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>f</span><span style=color:#000;font-weight:700>()</span>
<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#8f5902;font-style:italic>// 错误处理
</span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#204a87;font-weight:700>return</span>
<span style=color:#000;font-weight:700>}</span>
<span style=color:#8f5902;font-style:italic>// 使用变量 x
</span></code></pre></div><h3 id=首字母缩写>首字母缩写</h3><p>名称中的单词是首字母或首字母缩略词（例如 &ldquo;URL&rdquo; 或 &ldquo;NATO&rdquo; ）需要具有相同的大小写规则。例如，&ldquo;URL&rdquo; 应显示为 &ldquo;URL&rdquo; 或 &ldquo;url&rdquo; （如 &ldquo;urlPony&rdquo; 或 &ldquo;URLPony&rdquo; ），而不是 &ldquo;Url&rdquo;。举个例子：ServeHTTP 不是 ServeHttp。对于具有多个初始化 “单词” 的标识符，也应当显示为 &ldquo;xmlHTTPRequest&rdquo; 或 &ldquo;XMLHTTPRequest&rdquo;。</p><p>当 &ldquo;ID&rdquo; 是 &ldquo;identifier&rdquo; 的缩写时，此规则也适用于 &ldquo;ID&rdquo; ，因此请写 &ldquo;appID&rdquo; 而不是 &ldquo;appId&rdquo;。</p><p>protocol buffer 生成的代码是个例外，对人和对机器的要求不能一样，人编写的代码要比机器编写的代码保持更高的标准。</p><h3 id=接口>接口</h3><p>总的来说，Go 的接口要包含在使用方的包里，不应该包含在实现方的包里。实现方只需要返回具体类型（通常是指针或结构体），这样一来可以将新方法添加到实现中，而不需要扩展重构。</p><p>不要在 API 的实现者端定义 &ldquo;for mocking&rdquo; 接口；反而是要定义公开的 API，用真实的实现进行测试。</p><p>不要先定义接口再用它。脱离真实的使用场景，我们都不能确定一个接口是否有存在的价值，更别提设计接口的方法了。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>consumer</span>  <span style=color:#8f5902;font-style:italic>// consumer.go
</span><span style=color:#8f5902;font-style:italic></span>
<span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>Thinger</span> <span style=color:#204a87;font-weight:700>interface</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>Thing</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000;font-weight:700>}</span>

<span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>Foo</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span> <span style=color:#000>Thinger</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#a40000>…</span> <span style=color:#000;font-weight:700>}</span>
<span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>consumer</span> <span style=color:#8f5902;font-style:italic>// consumer_test.go
</span><span style=color:#8f5902;font-style:italic></span>
<span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>fakeThinger</span> <span style=color:#204a87;font-weight:700>struct</span><span style=color:#000;font-weight:700>{</span> <span style=color:#a40000>…</span> <span style=color:#000;font-weight:700>}</span>
<span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span> <span style=color:#000>fakeThinger</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Thing</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#a40000>…</span> <span style=color:#000;font-weight:700>}</span>
<span style=color:#a40000>…</span>
<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>Foo</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>fakeThinger</span><span style=color:#000;font-weight:700>{</span><span style=color:#a40000>…</span><span style=color:#000;font-weight:700>})</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#34;x&#34;</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#a40000>…</span> <span style=color:#000;font-weight:700>}</span>
</code></pre></div><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#8f5902;font-style:italic>// 不要这样做！！！
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>producer</span>

<span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>Thinger</span> <span style=color:#204a87;font-weight:700>interface</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>Thing</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000;font-weight:700>}</span>

<span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>defaultThinger</span> <span style=color:#204a87;font-weight:700>struct</span><span style=color:#000;font-weight:700>{</span> <span style=color:#a40000>…</span> <span style=color:#000;font-weight:700>}</span>
<span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span> <span style=color:#000>defaultThinger</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Thing</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#a40000>…</span> <span style=color:#000;font-weight:700>}</span>

<span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>NewThinger</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000>Thinger</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>defaultThinger</span><span style=color:#000;font-weight:700>{</span> <span style=color:#a40000>…</span> <span style=color:#000;font-weight:700>}</span> <span style=color:#000;font-weight:700>}</span>
</code></pre></div><p>应该返回具体的类型，让消费者来 mock 生产者的实现：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>producer</span>

<span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>Thinger</span> <span style=color:#204a87;font-weight:700>struct</span><span style=color:#000;font-weight:700>{</span> <span style=color:#a40000>…</span> <span style=color:#000;font-weight:700>}</span>
<span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span> <span style=color:#000>Thinger</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Thing</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#a40000>…</span> <span style=color:#000;font-weight:700>}</span>

<span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>NewThinger</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000>Thinger</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>Thinger</span><span style=color:#000;font-weight:700>{</span> <span style=color:#a40000>…</span> <span style=color:#000;font-weight:700>}</span> <span style=color:#000;font-weight:700>}</span>
</code></pre></div><h3 id=代码行长度>代码行长度</h3><p>在 Go 代码中没有行长度的标准规定，避免不舒服的长度就好；类似的，长一些代码可读性更强时，也不要刻意换行。</p><p>大多数非自然（在方法调用和声明的过程中）的换行，都是可以避免的，只要选择合理数量的参数列表和合适的变量名。一行代码过长，往往是因为代码中的各个名字太长了，去掉那些长名字就好了。</p><p>换句话说，在语义的分割点换行，而不是单单看行的长度。万一你发现某一行太长了，要么改名，要么调整语义，往往就解决问题了。</p><p>实际上，关于一个函数有多长也是一样的建议。这里没有一个 “一个方法不能超过 N 行” 的规定，但是程序中肯定会存在行数太多的函数、功能过于微弱的函数，而解决方案是改变这个函数边界，而不是执着在代码行数上。</p><h3 id=混合首字母大小写>混合首字母大小写</h3><p>参考 golang.org/doc/effective_go.html#m&mldr;，即使 Go 中混合大小写的规则打破了其他语言的惯例，也是适用的。例如，非导出的常量要命名成 maxLength，而不是 MaxLength 或者 MAX_LENGTH。</p><p>也可以参阅 Initialisms.</p><h3 id=命名结果参数>命名结果参数</h3><p>考虑一下 godoc 中的样式。命名结果参数如下：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>n</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Node</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Parent1</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>node</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Node</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{}</span>
<span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>n</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Node</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Parent2</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>node</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Node</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{}</span>
</code></pre></div><p>在 godoc 中会卡顿；最好使用：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>n</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Node</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Parent1</span><span style=color:#000;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Node</span> <span style=color:#000;font-weight:700>{}</span>
<span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>n</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Node</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Parent2</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Node</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{}</span>
</code></pre></div><p>另一方面，如果函数返回两个或三个相同类型的参数，或者从上下文中看不出结果的含义，则在某些上下文中添加名称可能会很有用。不要仅仅为了避免在函数内部声明 var 而命名结果参数；可能牺牲了一些简短的实现方式，但付出了不必要的 API 冗长性。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>f</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Foo</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Location</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>float64</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>float64</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><p>不够清晰：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#8f5902;font-style:italic>// Location 返回 f 的经度和纬度。
</span><span style=color:#8f5902;font-style:italic>// 负值分别表示南和西。
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>f</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Foo</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Location</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>lat</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>long</span> <span style=color:#204a87;font-weight:700>float64</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><p>如果函数只有几行，则可以使用裸返回。一旦它是一个中等大小的函数，请明确说明您的返回值。结论：仅仅因为它使您能够使用裸返回值而命名结果参数是不值得的。文档的清晰性始终比在函数中保存一两行更为重要。</p><p>最后，在某些情况下，您需要命名结果参数，以便在延迟的闭包中对其进行更改。这么做总是对的。</p><h3 id=裸返回>裸返回</h3><p>请参阅 Named Result Parameters.</p><h3 id=包注释>包注释</h3><p>像 godoc 提出的所有注释一样，包注释必须出现在 package 子句的旁边，且不能有空行。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#8f5902;font-style:italic>// Package math provides basic constants and mathematical functions.
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>math</span>
</code></pre></div><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#8f5902;font-style:italic>/*
</span><span style=color:#8f5902;font-style:italic>Package template implements data-driven templates for generating textual
</span><span style=color:#8f5902;font-style:italic>output such as HTML.
</span><span style=color:#8f5902;font-style:italic>....
</span><span style=color:#8f5902;font-style:italic>*/</span>
<span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>template</span>
</code></pre></div><p>对于 「package main」 的注释，在二进制名称后可以使用其他样式的注释 (并且可以使用大写形式，如果使用的话请大写)，例如，对于 package main 目录中的 seedgen 您可以这样写：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#8f5902;font-style:italic>// Binary seedgen ...
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>main</span>
</code></pre></div><p>或</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#8f5902;font-style:italic>// Command seedgen ...
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>main</span>
</code></pre></div><p>或</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#8f5902;font-style:italic>// Program seedgen ...
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>main</span>
</code></pre></div><p>或</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#8f5902;font-style:italic>// The seedgen command ...
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>main</span>
</code></pre></div><p>或</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#8f5902;font-style:italic>// The seedgen program ...
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>main</span>
</code></pre></div><p>或</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#8f5902;font-style:italic>// Seedgen ..
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>main</span>
</code></pre></div><p>以上都是举例，它们的合理变体是可以接受的。</p><p>请注意，以小写单词开头的句子不属于程序包注释的可接受选项。因为这些都是公开可见的，应该用适当的英语写，包括大写句子的第一个单词。 当二进制名是第一个单词时，即使它与命令行调用的拼写不完全匹配，也需要将其大写。</p><p>有关评注惯例的更多信息，参见 <a href=https://golang.org/doc/effective_go.html%3E>https://golang.org/doc/effective_go.html></a> 。</p><h3 id=包名>包名</h3><p>对包中名称的所有引用都将使用包名完成，因此可以从标识符中省略该名称。 例如，如果你正在使用 chubby 包，则不需键入 ChubbyFile ，因为客户端会将其写为 <code>chubby.ChubbyFile</code>。 相反，命名为 File 的这种方式，客户端会将它写为 <code>chubby.File</code> 。 避免使用像 util 、 common 、 misc 、 api 、 types 和 interfaces 这样无意义的包名。 详见 <a href=http://golang.org/doc/effective_go.html#%E5%8C%85-%E5%90%8D%E7%A7%B0>http://golang.org/doc/effective_go.html#包-名称</a> 及 <a href=http://blog.golang.org/package-names>http://blog.golang.org/package-names</a> 。</p><h3 id=参数传递>参数传递</h3><p>不要只是为了节省几个字节就将指针作为函数参数传递。如果一个函数在整个过程中只引用它的参数 x 作为 *x，那么这个参数不应该是一个指针。常见的例子包括传递指向字符串 (*string) 的指针或指向接口值 (*io.Reader) 的指针。在这两种情况下，值本身都是固定大小，可以直接传递。这个建议不适用于大型结构体 ，甚至不适用于可能变大的小型结构体。</p><h3 id=方法接收者命名>方法接收者命名</h3><p>方法接收者的名称应该反映其身份；通常，其类型的一个或两个字母缩写就足够了（例如用 &ldquo;c&rdquo; 或 &ldquo;cl&rdquo; 表示 &ldquo;client&rdquo; ）。不要使用通用名称，例如 &ldquo;me&rdquo;，&ldquo;this&rdquo; 或 &ldquo;self&rdquo;，这是面向对象语言的典型标识符，这些标识符赋予该方法特殊的含义。在 Go 语言中，方法接收者只是函数的一个参数而已。方法接收者的命名不必像方法的其他参数那样具有描述性，因为它的作用是显而易见的，没有任何文档目的。命名可以非常短，因为它几乎将出现在该类型的每个方法的每一行中；熟悉意味着简洁。使用上也要保持一致：如果你在一个方法中叫将接收器命名为 &ldquo;c&rdquo;，那么在其他方法中不要把它命名为 &ldquo;cl&rdquo;。</p><h3 id=方法接收者类型>方法接收者类型</h3><p>选择到底是在方法上使用值接收者还是使用指针接收者可能会很困难，尤其是对于 Go 新手程序员。如有疑问，请使用指针接收者，但有些情况下用值接收者更有道理，性能更好，例如小的不变结构或基本类型的值。以下是一些有用的指导：</p><p>如果接收者是 map，func 或 chan，则不要使用指针。如果接收者是 slice 并且该方法不重新切片或不重新分配切片，则不要使用指针
如果该方法需要改变接收者的值，则必须用指针。
接收者内含有 <code>sync.Mutex</code> 或者类似的同步域，那就必须指针，以避免拷贝。
接收者是一个大数据结构或者数组，指针会效率更高。 多大才算大？假设它相当于将其包含的所有元素作为参数传递给方法。如果感觉太大，那么对接收者来说也太大了。
函数或方法（同时执行或调用某方法时继续调用相关方法或函数）是否会使接收者发生变化？在调用方法时，值类型会创建接收者的副本，因此外部更新将不会应用于此接收者。如果必须在原始接收者中看到更改效果，则接收者必须是指针。
如果接收者是一个结构、数组、slice，且内部的元素有指针指向一些可变元素，那更倾向于用指针接收，来提供更明确的语义。
若接收者是一个小对象或数组，概念上是一个值类型（比如 <code>time.Time</code>），并且没有可变域和指针域，或者干脆就是 int、string 这种基本类型，适合用值接收者。值接收者可以减少垃圾内存，通过它传递值时，会优先尝试从栈上分配内存，而不是堆上。但保不齐在某些情况下编译器没那么聪明，所以这个在用之前要 profiling 一下。
最后，要是把握不准，就用指针。</p><h3 id=同步函数>同步函数</h3><p>首选同步函数 - 直接返回结果或在返回异步函数之前完成任何回调或通道操作的函数。</p><p>同步函数使 goroutines 能够在调用中本地化，从而使其在生命周期中更显得合理，避免泄漏和数据竞争。它们也更容易测试：调用者可以传递输入并检查输出，而不需要轮询或同步。</p><p>如果调用者需要更多的并发，可以从一个单独的 goroutine 调用函数来轻松地添加它。 但是，在调用方删除不必要的并发是相当困难的，有时是不可能的。</p><h3 id=有用的失败测试>有用的失败测试</h3><p>失败的测试应该体现有用的信息，说明什么是错误的，什么是输入，什么是实际得到的，什么是预期的。 编写一组 assertFoo 帮助程序可能很诱人，但请确保您的帮助程序产生有用的错误消息。假设调试失败测试的人不是您，也不是您的团队。 典型的 Go 测试失败案例如下：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>got</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#000>tt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>want</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#000>t</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Errorf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Foo(%q) = %d; want %d&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>tt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>in</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>got</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>tt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>want</span><span style=color:#000;font-weight:700>)</span> <span style=color:#8f5902;font-style:italic>//或 Fatalf ，如果测试不能测试任何超过此时的点
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span>
</code></pre></div><p>请注意，这条命令结果 != 预期，消息也使用该命令。 一些测试框架鼓励反写这些内容： 0 != x 表示 “预期 0 ，得到 x ” 等等。 但 Go 并不鼓励这样写。</p><p>如果看起来需要不少的代码，那您可能希望编写一个表格驱动测试。</p><p>在使用具有不同输入的测试助手时，另一种消除失败测试歧义的常见技术是用不同的 TestFoo 函数将每个调用者包装起来，因此使用该名称测试时失败：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>TestSingleValue</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>testHelper</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>{</span><span style=color:#0000cf;font-weight:700>80</span><span style=color:#000;font-weight:700>})</span> <span style=color:#000;font-weight:700>}</span>
<span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>TestNoValues</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>)</span>    <span style=color:#000;font-weight:700>{</span> <span style=color:#000>testHelper</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>{})</span> <span style=color:#000;font-weight:700>}</span>
</code></pre></div><p>在任何情况下，您都有义务在测试失败时将有用的信息传递给将来调试代码的人。</p><h3 id=变量名称>变量名称</h3><p>Go 中的变量名称尽可能短为妙，言简意赅，尤其是对于那些处于有限空间中的局部变量更是如此。例如： 用 c 而不是 lineCount； 用 i 而不是 sliceIndex 。</p><p>基本准则：当变量首次被使用时离声明的位置越远，变量名称必须更具描述性。对于方法接收者的名称来说，一个或者两个字母就足够了。普通变量比如 loop indices 、 readers 的名称用一个字母（i , r）指代就可以。非常规事物和全局变量则需使用更具描述性的名字。</p><style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style><div class=d-print-none><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button><p class="feedback--response feedback--response-yes">Glad to hear it! Please <a href=https://github.com/TaibiaoGuo/devSpec/discussions/new>tell us how we can improve</a>.</p><p class="feedback--response feedback--response-no">Sorry to hear that. Please <a href=https://github.com/TaibiaoGuo/devSpec/discussions/new>tell us how we can improve</a>.</p></div><script>const yesButton=document.querySelector('.feedback--answer-yes'),noButton=document.querySelector('.feedback--answer-no'),yesResponse=document.querySelector('.feedback--response-yes'),noResponse=document.querySelector('.feedback--response-no'),disableButtons=()=>{yesButton.disabled=!0,noButton.disabled=!0},sendFeedback=b=>{if(typeof ga!='function')return;const a={command:'send',hitType:'event',category:'Helpful',action:'click',label:window.location.pathname,value:b};ga(a.command,a.hitType,a.category,a.action,a.label,a.value)};yesButton.addEventListener('click',()=>{yesResponse.classList.add('feedback--response__visible'),disableButtons(),sendFeedback(1)}),noButton.addEventListener('click',()=>{noResponse.classList.add('feedback--response__visible'),disableButtons(),sendFeedback(0)})</script><br><div class="text-muted mt-5 pt-3 border-top">最后修改 April 17, 2021: <a href=https://github.com/TaibiaoGuo/devSpec/commit/cc5fabbe931fa379c13776ff534872f8e427a115>初始化devSpec Go规范 (cc5fabb)</a></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel="noopener noreferrer" href=https://github.com/TaibiaoGuo/devSpec><i class="fab fa-github"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2021 TaibiaoGuo All Rights Reserved</small>
<small class=ml-1><a href=https://policies.google.com/privacy target=_blank>隐私政策</a></small><p class=mt-2><a href=/docs/about/>关于</a></p></div></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js integrity=sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/mermaid@8.9.2/dist/mermaid.min.js integrity=sha384-uQikAXnCAqsMb3ygtdqBYvcwvHUkzGIpjdGyy9owhURXHUxLC5LgTcSxJQH/RzjK crossorigin=anonymous></script><script src=/js/deflate.js></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.2/dist/katex.min.css integrity=sha384-Cqd8ihRLum0CCg8rz0hYKPoLZ3uw+gES2rXQXycqnL5pgVQIflxAUDS7ZSjITLb5 crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.2/dist/katex.min.js integrity=sha384-1Or6BdeNQb0ezrmtGeqQHFpppNd7a/gw29xeiSikBbsb44xu3uAo8c7FwbF5jhbd crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.2/dist/contrib/auto-render.min.js integrity=sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl crossorigin=anonymous onload='renderMathInElement(document.body,{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!1,left:"$",right:"$"}]})'></script><script src=/js/main.min.758c0b1476eb0de973b63d0030f104f41a6eb3afb9908681605af4a48eb73018.js integrity="sha256-dYwLFHbrDelztj0AMPEE9Bpus6+5kIaBYFr0pI63MBg=" crossorigin=anonymous></script></body></html>