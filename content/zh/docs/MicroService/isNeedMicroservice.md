
---
title: "你需要微服务么"
linkTitle: "你需要微服务么"
weight: 20
---

你应该早已经看过许多介绍微服务优点的博文，但很少有人告诉你微服务的切分、微服务的管理和监测等要点如果处理不当，微服务的实施将会是一场噩梦。

|| 单体式架构|微服务 |
|---| --- | ---|
|开发 | 初始开发速度更快；难以更改或添加功能 | 早期设计至关重要；添加或更改服务较为容易 |
|应用工作流 | 易于将应用纳入工作流；可在单个位置实施功能（如身份验证或监控） | 在工作流中分配服务变得更加复杂；服务间的依赖关系或要求可能不明确 |
|培训和维护 | 架构简单；对环境和语言有着严格的开发要求 | 架构灵活，设计复杂度得到提高；采用标准 API 或消息连接的多语言服务 |
|灵活扩展  | 难以扩展；依赖于硬件基础架构；为应对一个服务的高峰而需扩展整个应用 | 易于扩展各个服务，而不会影响整体架构；使用软件定义的基础架构（容器、云）实现动态响应|
|更新、故障转移、停机| 所有服务均紧密耦合；服务必须一起更新；版本耦合；如果单个服务出现故障，则存在系统故障的风险 | 服务非耦合；可以独立添加或更新服务；故障风险仅限于一小部分服务|
自动化| 很大程度上无须自动化 | 需要自动化和编排|

在一个项目开始前，你应该按照以下步骤来思考你是否需要引入微服务架构：

1. 谁是您的客户或用户？
2. 他们想要做什么？
3. 您使用什么基础架构？
4. 该基础架构生命周期有多长？
5. 单个工作流有哪些服务或功能需求？
6. 该工作流的生命周期有多长？
7. 您的部署路径是什么？需要多久部署一次？
8. 这会影响哪些业务功能？

项目的成功衡量标准不是由开发人员来定义，而是由项目所面对的客户来评价。因此，客户看重什么、客户的期望结果、
客户如何评判成功才是项目架构设计前的首要考虑因素。应用的

因此，选择单体式架构、微服务架构或是面向服务架构前，应首先考虑你想要做什么和客户需要什么。

简单来说，单体式应用就是在单个应用中包含所有功能的应用堆栈。无论是服务之间的交互还是开发与交付方式，都采用紧密耦合的形式。
更新或扩展单体式应用的某个方面也会对整个应用及其基础架构产生影响。

单体式应用存在的潜在问题是动态扩展和故障转移。这些问题通常可通过简单的扩展性设计来加以解决，
例如横向扩展(在集群中复制该功能)或纵向扩展(镜像实例和扩展硬件)。开发和运维团队也很少考虑可扩展性问题。
如果需要一个完整的 50 人团队每 6 到 9 个月发布一个单体式应用，那么通过让五个独立的团队提供五个较小的应用并每隔几周发布一次更新，
即可提高可扩展性。考虑到最初的简单性以及服务与依赖项之间的清晰关系，单体式架构可能称得上是最古老的应用架构。

由于单体式是一种较为陈旧的架构形式，因此它们常常与传统应用相关联。相比而言，更为现代化的架构则尝试按功能或业务能力来拆分服务，
以带来更好的灵活性。这在面向客户的界面(如 API、移动应用或 Web 应用)中尤为常见。这些界面通常较小，需要更加频繁的更新才能满足客户的期望。

分布式架构的最新定义之一是微服务。与其他模块化设计，像面向服务的架构(SOA)有一些相似之处，但微服务将服务之间的松散耦合转变为服务独立性。
通常，单个服务的定义较为明确，可以轻松地在较大的架构中添加、升级或删除服务。这对于动态可扩展性和容错能力都有一定的好处:
可以在不占用大量基础架构的情况下按需扩展单个服务，或者可以在不影响其他服务的情况下进行故障转移。
