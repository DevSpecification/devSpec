<!doctype html><html lang=zh class=no-js>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=generator content="Hugo 0.88.0"><meta name=ROBOTS content="NOINDEX, NOFOLLOW">
<link rel="shortcut icon" href=/favicons/favicon.ico>
<link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180>
<link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16>
<link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32>
<link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36>
<link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48>
<link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72>
<link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96>
<link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144>
<link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192>
<title>Python语言规范 | 开发规范</title>
<meta name=description content="Lint
使用该 pylintrc 对你的代码运行pylint

定义:

pylint是一个在Python源代码中查找bug的工具. 对于C和C++这样的不那么动态的(译者注: 原文是less dynamic)语言, 这些bug通常由编译器来捕获. 由于Python的动态特性, 有些警告可能不对. …">
<meta property="og:title" content="Python语言规范">
<meta property="og:description" content="Lint 使用该 pylintrc 对你的代码运行pylint
 定义:  pylint是一个在Python源代码中查找bug的工具. 对于C和C++这样的不那么动态的(译者注: 原文是less dynamic)语言, 这些bug通常由编译器来捕获. 由于Python的动态特性, 有些警告可能不对. 不过伪告警应该很少。
  优点:
可以捕获容易忽视的错误, 例如输入错误, 使用未赋值的变量等.
  缺点:
pylint不完美. 要利用其优势, 我们有时侯需要:
 围绕着它来写代码 抑制其告警 改进它 忽略它    结论:
确保对你的代码运行pylint。
抑制不准确的警告，以便能够将其他警告暴露出来。你可以通过设置一个行注释来抑制警告。例如：
dict = 'something awful' # Bad Idea... pylint: disable=redefined-builtin pylint警告是以符号名(如 empty-docstring )来标识的，google特定的警告则是以g-开头。
如果警告的符号名不够见名知意，那么请对其增加一个详细解释。
采用这种抑制方式的好处是我们可以轻松查找抑制并回顾它们。
你可以使用以下命令来获取pylint告警列表。
pylint --list-msgs 你可以使用以下命令来获取关于特定消息的更多信息。
pylint --help-msg=C6409 相比较于之前使用的过时的 pylint: disable-msg ，本文推荐使用 pylint: disable .
在函数体中删除未使用的变量可以消除参数未使用告警.记得要加一条注释说明你为何删除它们,注释使用&#34;Unused&#34;就可以,例如:
def viking_cafe_order(spam, beans, eggs=None): del beans, eggs # Unused by vikings.">
<meta property="og:type" content="article">
<meta property="og:url" content="/docs/pythoncodingstyle/python_language_rules/"><meta property="article:section" content="docs">
<meta property="article:modified_time" content="2021-09-12T18:19:36+08:00"><meta property="og:site_name" content="开发规范">
<meta itemprop=name content="Python语言规范">
<meta itemprop=description content="Lint 使用该 pylintrc 对你的代码运行pylint
 定义:  pylint是一个在Python源代码中查找bug的工具. 对于C和C++这样的不那么动态的(译者注: 原文是less dynamic)语言, 这些bug通常由编译器来捕获. 由于Python的动态特性, 有些警告可能不对. 不过伪告警应该很少。
  优点:
可以捕获容易忽视的错误, 例如输入错误, 使用未赋值的变量等.
  缺点:
pylint不完美. 要利用其优势, 我们有时侯需要:
 围绕着它来写代码 抑制其告警 改进它 忽略它    结论:
确保对你的代码运行pylint。
抑制不准确的警告，以便能够将其他警告暴露出来。你可以通过设置一个行注释来抑制警告。例如：
dict = 'something awful' # Bad Idea... pylint: disable=redefined-builtin pylint警告是以符号名(如 empty-docstring )来标识的，google特定的警告则是以g-开头。
如果警告的符号名不够见名知意，那么请对其增加一个详细解释。
采用这种抑制方式的好处是我们可以轻松查找抑制并回顾它们。
你可以使用以下命令来获取pylint告警列表。
pylint --list-msgs 你可以使用以下命令来获取关于特定消息的更多信息。
pylint --help-msg=C6409 相比较于之前使用的过时的 pylint: disable-msg ，本文推荐使用 pylint: disable .
在函数体中删除未使用的变量可以消除参数未使用告警.记得要加一条注释说明你为何删除它们,注释使用&#34;Unused&#34;就可以,例如:
def viking_cafe_order(spam, beans, eggs=None): del beans, eggs # Unused by vikings.">
<meta itemprop=dateModified content="2021-09-12T18:19:36+08:00">
<meta itemprop=wordCount content="1500">
<meta itemprop=keywords content><meta name=twitter:card content="summary">
<meta name=twitter:title content="Python语言规范">
<meta name=twitter:description content="Lint 使用该 pylintrc 对你的代码运行pylint
 定义:  pylint是一个在Python源代码中查找bug的工具. 对于C和C++这样的不那么动态的(译者注: 原文是less dynamic)语言, 这些bug通常由编译器来捕获. 由于Python的动态特性, 有些警告可能不对. 不过伪告警应该很少。
  优点:
可以捕获容易忽视的错误, 例如输入错误, 使用未赋值的变量等.
  缺点:
pylint不完美. 要利用其优势, 我们有时侯需要:
 围绕着它来写代码 抑制其告警 改进它 忽略它    结论:
确保对你的代码运行pylint。
抑制不准确的警告，以便能够将其他警告暴露出来。你可以通过设置一个行注释来抑制警告。例如：
dict = 'something awful' # Bad Idea... pylint: disable=redefined-builtin pylint警告是以符号名(如 empty-docstring )来标识的，google特定的警告则是以g-开头。
如果警告的符号名不够见名知意，那么请对其增加一个详细解释。
采用这种抑制方式的好处是我们可以轻松查找抑制并回顾它们。
你可以使用以下命令来获取pylint告警列表。
pylint --list-msgs 你可以使用以下命令来获取关于特定消息的更多信息。
pylint --help-msg=C6409 相比较于之前使用的过时的 pylint: disable-msg ，本文推荐使用 pylint: disable .
在函数体中删除未使用的变量可以消除参数未使用告警.记得要加一条注释说明你为何删除它们,注释使用&#34;Unused&#34;就可以,例如:
def viking_cafe_order(spam, beans, eggs=None): del beans, eggs # Unused by vikings.">
<link href=/scss/main.css rel=stylesheet>
<script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script>
</head>
<body class=td-page>
<header>
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
<a class=navbar-brand href=/>
<span class=navbar-logo><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class="text-uppercase font-weight-bold">开发规范</span>
</a>
<div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar>
<ul class="navbar-nav mt-2 mt-lg-0">
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class="nav-link active" href=/docs/><span class=active>开发规范</span></a>
</li>
</ul>
</div>
<div class="navbar-nav d-none d-lg-block">
<input type=search class="form-control td-search-input" placeholder="&#xf002; 站内搜索…" aria-label=站内搜索… autocomplete=off>
</div>
</nav>
</header>
<div class="container-fluid td-outer">
<div class=td-main>
<div class="row flex-xl-nowrap">
<aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
<div id=td-sidebar-menu class=td-sidebar__inner>
<form class="td-sidebar__search d-flex align-items-center">
<input type=search class="form-control td-search-input" placeholder="&#xf002; 站内搜索…" aria-label=站内搜索… autocomplete=off>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation">
</button>
</form>
<nav class="collapse td-sidebar-nav" id=td-section-nav>
<ul class="td-sidebar-nav__section pr-md-3 ul-0">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li>
<a href=/docs/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>开发规范</span></a>
<ul class=ul-1>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsoverview-li>
<a href=/docs/overview/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsoverview><span>总览</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docspythoncodingstyle-li>
<a href=/docs/pythoncodingstyle/ title=Python编码规范指南 class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docspythoncodingstyle><span>Python编码协作规范</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspythoncodingstylepython_ide_settings-li>
<a href=/docs/pythoncodingstyle/python_ide_settings/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docspythoncodingstylepython_ide_settings><span>Python集成开发环境/编辑工具代码检查插件设置</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docspythoncodingstylepython_language_rules-li>
<a href=/docs/pythoncodingstyle/python_language_rules/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-docspythoncodingstylepython_language_rules><span class=td-sidebar-nav-active-item>Python语言规范</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspythoncodingstylepython_style_rules-li>
<a href=/docs/pythoncodingstyle/python_style_rules/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docspythoncodingstylepython_style_rules><span>Python风格规范</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docscodestandards-li>
<a href=/docs/codestandards/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscodestandards><span>编码协作规范</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscodestandardsgitflow-li>
<a href=/docs/codestandards/gitflow/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscodestandardsgitflow><span>Git工作流</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscodestandardscodereview-li>
<a href=/docs/codestandards/codereview/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscodestandardscodereview><span>代码审阅</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscodestandardsversion-li>
<a href=/docs/codestandards/version/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscodestandardsversion><span>发行和版本控制</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscodestandardslog-li>
<a href=/docs/codestandards/log/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscodestandardslog><span>日志</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscodestandardscomment-li>
<a href=/docs/codestandards/comment/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscodestandardscomment><span>注释</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscodestandardstest-li>
<a href=/docs/codestandards/test/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscodestandardstest><span>测试</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsprojectmanagementstandards-li>
<a href=/docs/projectmanagementstandards/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsprojectmanagementstandards><span>项目管理标准</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsprojectmanagementstandardsteamculture-li>
<a href=/docs/projectmanagementstandards/teamculture/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsprojectmanagementstandardsteamculture><span>团队文化</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsprojectmanagementstandardsteamarchitecture-li>
<a href=/docs/projectmanagementstandards/teamarchitecture/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsprojectmanagementstandardsteamarchitecture><span>团队架构</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsprojectmanagementstandardsdevmethod-li>
<a href=/docs/projectmanagementstandards/devmethod/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsprojectmanagementstandardsdevmethod><span>开发方法论与框架</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsprojectmanagementstandardsprojectlifecycle-li>
<a href=/docs/projectmanagementstandards/projectlifecycle/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsprojectmanagementstandardsprojectlifecycle><span>项目生命周期</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsautomationintegrationstandards-li>
<a href=/docs/automationintegrationstandards/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsautomationintegrationstandards><span>持续集成标准</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsautomationintegrationstandardstestprocessstandards-li>
<a href=/docs/automationintegrationstandards/testprocessstandards/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsautomationintegrationstandardstestprocessstandards><span>你需要微服务么</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsautomationintegrationstandardscontinuesintegrationstandards-li>
<a href=/docs/automationintegrationstandards/continuesintegrationstandards/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsautomationintegrationstandardscontinuesintegrationstandards><span>持续集成</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsmicroservice-li>
<a href=/docs/microservice/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsmicroservice><span>微服务</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsmicroserviceisneedmicroservice-li>
<a href=/docs/microservice/isneedmicroservice/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsmicroserviceisneedmicroservice><span>你需要微服务么</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsiaas-li>
<a href=/docs/iaas/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsiaas><span>基础设施即服务</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsiaasuserinterface-li>
<a href=/docs/iaas/userinterface/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsiaasuserinterface><span></span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsgocodestandards-li>
<a href=/docs/gocodestandards/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsgocodestandards><span>Go编码规范</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsgocodestandardscodestandards-li>
<a href=/docs/gocodestandards/codestandards/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgocodestandardscodestandards><span>devSpec Go 编程指南</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsgocodestandardsgocodereviewguide-li>
<a href=/docs/gocodestandards/gocodereviewguide/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgocodestandardsgocodereviewguide><span>devSpec Go 代码审核指南</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsdocumentationstyleguide-li>
<a href=/docs/documentationstyleguide/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsdocumentationstyleguide><span>文档样式指南</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegeneralprinciple-li>
<a href=/docs/documentationstyleguide/generalprinciple/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsdocumentationstyleguidegeneralprinciple><span>一般原则</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child collapse" id=m-docsdocumentationstyleguidecodecomment-li>
<a href=/docs/documentationstyleguide/codecomment/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsdocumentationstyleguidecodecomment><span>API参考文档</span></a>
<ul class="ul-3 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidecodecommentapireference-li>
<a href=/docs/documentationstyleguide/codecomment/apireference/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidecodecommentapireference><span>源代码API参考文档</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidecodecommentgrpcapireference-li>
<a href=/docs/documentationstyleguide/codecomment/grpcapireference/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidecodecommentgrpcapireference><span>WebAPI参考文档</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidecodecommentwebapireference-li>
<a href=/docs/documentationstyleguide/codecomment/webapireference/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidecodecommentwebapireference><span>WebAPI参考文档</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child collapse" id=m-docsdocumentationstyleguidegb856t88-li>
<a href=/docs/documentationstyleguide/gb856t88/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsdocumentationstyleguidegb856t88><span>软件开发文档模板</span></a>
<ul class="ul-3 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88feasibilityanalysis-li>
<a href=/docs/documentationstyleguide/gb856t88/feasibilityanalysis/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88feasibilityanalysis><span>可行性研究报告</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88projectdevelopmentplan-li>
<a href=/docs/documentationstyleguide/gb856t88/projectdevelopmentplan/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88projectdevelopmentplan><span>项目开发计划</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88softwarerequirements-li>
<a href=/docs/documentationstyleguide/gb856t88/softwarerequirements/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88softwarerequirements><span>软件需求说明书</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88outlinedesign-li>
<a href=/docs/documentationstyleguide/gb856t88/outlinedesign/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88outlinedesign><span>概要设计说明书</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88detaileddesignspecification-li>
<a href=/docs/documentationstyleguide/gb856t88/detaileddesignspecification/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88detaileddesignspecification><span>详细设计说明书</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88usermanual-li>
<a href=/docs/documentationstyleguide/gb856t88/usermanual/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88usermanual><span>用户操作手册</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88testplan-li>
<a href=/docs/documentationstyleguide/gb856t88/testplan/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88testplan><span>测试计划</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88databasedesign-li>
<a href=/docs/documentationstyleguide/gb856t88/databasedesign/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88databasedesign><span>概要设计说明书</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88testanalysisreport-li>
<a href=/docs/documentationstyleguide/gb856t88/testanalysisreport/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88testanalysisreport><span>测试分析报告</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88monthlydevelopmentprogressreport-li>
<a href=/docs/documentationstyleguide/gb856t88/monthlydevelopmentprogressreport/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88monthlydevelopmentprogressreport><span>开发进度月报</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88projectdevelopmentsummaryreport-li>
<a href=/docs/documentationstyleguide/gb856t88/projectdevelopmentsummaryreport/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88projectdevelopmentsummaryreport><span>项目开发总结报告</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88softwaremaintenancemanual-li>
<a href=/docs/documentationstyleguide/gb856t88/softwaremaintenancemanual/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88softwaremaintenancemanual><span>模块开发卷宗</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88softwareproblemreport-li>
<a href=/docs/documentationstyleguide/gb856t88/softwareproblemreport/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88softwareproblemreport><span>软件问题报告</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidegb856t88softwaremodificationreport-li>
<a href=/docs/documentationstyleguide/gb856t88/softwaremodificationreport/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdocumentationstyleguidegb856t88softwaremodificationreport><span>软件修改报告</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguideissues-li>
<a href=/docs/documentationstyleguide/issues/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsdocumentationstyleguideissues><span>Issues</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdocumentationstyleguidepullrequest-li>
<a href=/docs/documentationstyleguide/pullrequest/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsdocumentationstyleguidepullrequest><span>拉取请求</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsabout-li>
<a href=/docs/about/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsabout><span>关于</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child collapse" id=m-docsaboutcontributing-li>
<a href=/docs/about/contributing/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsaboutcontributing><span>向 devSpec 贡献文档</span></a>
<ul class="ul-3 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsaboutcontributingaddcontent-li>
<a href=/docs/about/contributing/addcontent/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsaboutcontributingaddcontent><span>添加新文档</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsaboutcontributinggithub-li>
<a href=/docs/about/contributing/github/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsaboutcontributinggithub><span>使用 GitHub 参与社区活动</span></a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</div>
</aside>
<aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
<a href=https://github.com/TaibiaoGuo/devSpec/edit/master/content/zh/docs/PythonCodingStyle/python_language_rules.md target=_blank><i class="fa fa-edit fa-fw"></i> 编辑此页</a>
<a href="https://github.com/TaibiaoGuo/devSpec/new/master/content/zh/docs/PythonCodingStyle/python_language_rules.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" target=_blank><i class="fa fa-edit fa-fw"></i> 添加子页面</a>
<a href="https://github.com/TaibiaoGuo/devSpec/issues/new?title=Python%e8%af%ad%e8%a8%80%e8%a7%84%e8%8c%83" target=_blank><i class="fab fa-github fa-fw"></i> 提交文档问题</a>
<a href=https://github.com/TaibiaoGuo/devSpec/projects/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i> 提交项目问题</a>
<a id=print href=/docs/pythoncodingstyle/_print/><i class="fa fa-print fa-fw"></i> 整节打印</a>
</div>
<div class=td-toc><nav id=TableOfContents>
<ul>
<li><a href=#lint>Lint</a></li>
<li><a href=#导入>导入</a></li>
<li><a href=#包>包</a></li>
<li><a href=#异常>异常</a></li>
<li><a href=#全局变量>全局变量</a></li>
<li><a href=#嵌套局部内部类或函数>嵌套/局部/内部类或函数</a></li>
<li><a href=#推导式生成式>推导式&生成式</a></li>
<li><a href=#默认迭代器和操作符>默认迭代器和操作符</a></li>
<li><a href=#生成器>生成器</a></li>
<li><a href=#lambda函数>Lambda函数</a></li>
<li><a href=#条件表达式>条件表达式</a></li>
<li><a href=#默认参数值>默认参数值</a></li>
<li><a href=#特性properties>特性(properties)</a></li>
<li><a href=#truefalse的求值>True/False的求值</a></li>
<li><a href=#词法作用域lexical-scoping>词法作用域(Lexical Scoping)</a></li>
<li><a href=#函数与方法装饰器>函数与方法装饰器</a></li>
<li><a href=#线程>线程</a></li>
<li><a href=#威力过大的特性>威力过大的特性</a></li>
<li><a href=#代码类型注释>代码类型注释</a></li>
</ul>
</nav></div>
</aside>
<main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main>
<nav aria-label=breadcrumb class="d-none d-md-block d-print-none">
<ol class="breadcrumb spb-1">
<li class=breadcrumb-item>
<a href=/docs/>开发规范</a>
</li>
<li class=breadcrumb-item>
<a href=/docs/pythoncodingstyle/>Python编码协作规范</a>
</li>
<li class="breadcrumb-item active" aria-current=page>
<a href=/docs/pythoncodingstyle/python_language_rules/>Python语言规范</a>
</li>
</ol>
</nav>
<div class=td-content>
<h1>Python语言规范</h1>
<header class=article-meta>
</header>
<h2 id=lint>Lint</h2>
<p>使用该 <a href=https://google.github.io/styleguide/pylintrc>pylintrc</a> 对你的代码运行<code>pylint</code></p>
<ol>
<li>定义:</li>
</ol>
<p>pylint是一个在Python源代码中查找bug的工具. 对于C和C++这样的不那么动态的(译者注: 原文是less dynamic)语言, 这些bug通常由编译器来捕获. 由于Python的动态特性, 有些警告可能不对. 不过伪告警应该很少。</p>
<ul>
<li>
<p>优点:</p>
<p>可以捕获容易忽视的错误, 例如输入错误, 使用未赋值的变量等.</p>
</li>
<li>
<p>缺点:</p>
<p>pylint不完美. 要利用其优势, 我们有时侯需要:</p>
<ul>
<li>围绕着它来写代码</li>
<li>抑制其告警</li>
<li>改进它</li>
<li>忽略它</li>
</ul>
</li>
<li>
<p>结论:</p>
<p>确保对你的代码运行<code>pylint</code>。</p>
<p>抑制不准确的警告，以便能够将其他警告暴露出来。你可以通过设置一个行注释来抑制警告。例如：</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87>dict</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#39;something awful&#39;</span> <span style=color:#8f5902;font-style:italic># Bad Idea... pylint: disable=redefined-builtin</span>
</code></pre></div><p><code>pylint</code>警告是以符号名(如 <code>empty-docstring</code> )来标识的，google特定的警告则是以<code>g-</code>开头。</p>
<p>如果警告的符号名不够见名知意，那么请对其增加一个详细解释。</p>
<p>采用这种抑制方式的好处是我们可以轻松查找抑制并回顾它们。</p>
<p>你可以使用以下命令来获取pylint告警列表。</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>pylint --list-msgs
</code></pre></div><p>你可以使用以下命令来获取关于特定消息的更多信息。</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>pylint --help-msg<span style=color:#ce5c00;font-weight:700>=</span>C6409
</code></pre></div><p>相比较于之前使用的过时的 <code>pylint: disable-msg</code> ，本文推荐使用 <code>pylint: disable</code> .</p>
<p>在函数体中删除未使用的变量可以消除参数未使用告警.记得要加一条注释说明你为何删除它们,注释使用"Unused"就可以,例如:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>viking_cafe_order</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>spam</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>beans</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>eggs</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>None</span><span style=color:#000;font-weight:700>):</span>
    <span style=color:#204a87;font-weight:700>del</span> <span style=color:#000>beans</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>eggs</span>  <span style=color:#8f5902;font-style:italic># Unused by vikings.</span>
    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>spam</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#000>spam</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#000>spam</span>
</code></pre></div><p>其他消除这个告警的方法还有使用<code>_</code>标志未使用参数,或者给这些参数名加上前缀 <code>unused_</code>, 或者直接把它们绑定到 <code>_</code>.但这些方法都不推荐.</p>
</li>
</ul>
<h2 id=导入>导入</h2>
<p>仅对包和模块使用导入,而不单独导入函数或者类。<a href=https://google.github.io/styleguide/pyguide.html#typing-imports>typing module</a>, <a href=https://github.com/python/typing/tree/master/typing_extensions>typing_extensions module</a>, 及 <a href=https://six.readthedocs.io/#module-six.moves>six.moves module</a>模块例外。</p>
<ul>
<li>
<p>定义:</p>
<p>模块间共享代码的重用机制.</p>
</li>
<li>
<p>优点:</p>
<p>命名空间管理约定十分简单。每个标识符的源都用一种一致的方式指示，<code>x.Obj</code>表示<code>Obj</code>对象定义在模块<code>x</code>中。</p>
</li>
<li>
<p>缺点:</p>
<p>模块名仍可能冲突。有些模块名太长，不太方便。</p>
</li>
<li>
<p>结论:</p>
<ul>
<li>
<p>使用 <code>import x</code> 来导入包和模块.</p>
</li>
<li>
<p>使用 <code>from x import y</code> , 其中x是包前缀, y是不带前缀的模块名.</p>
</li>
<li>
<p>使用 <code>from x import y as z</code>, 如果两个要导入的模块都叫做y或者y太长了.</p>
</li>
<li>
<p>仅当缩写 <code>z</code> 是通用缩写时才可使用 <code>import y as z</code>.(比如 <code>np</code> 代表 <code>numpy</code>.)</p>
</li>
</ul>
<p>例如, 模块 <code>sound.effects.echo</code> 可以用如下方式导入:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>sound.effects</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>echo</span>
<span style=color:#ce5c00;font-weight:700>...</span>
<span style=color:#000>echo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>EchoFilter</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87>input</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>output</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>delay</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>0.7</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>atten</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><p>导入时不要使用相对名称。即使模块在同一个包中，也要使用完整包名。这能帮助你避免无意间导入一个包两次。</p>
</li>
</ul>
<h2 id=包>包</h2>
<p>使用模块的全路径名来导入每个模块</p>
<ul>
<li>
<p>优点:</p>
<p>避免模块名冲突或是因非预期的模块搜索路径导致导入错误. 查找包更容易.</p>
</li>
<li>
<p>缺点:</p>
<p>部署代码变难, 因为你必须复制包层次.</p>
</li>
<li>
<p>结论:</p>
<p>所有的新代码都应该用完整包名来导入每个模块.应该像下面这样导入:</p>
<p>yes:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># 在代码中引用完整名称 absl.flags (详细情况)</span>
<span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>absl.flags</span>
<span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>doctor.who</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>jodie</span>

<span style=color:#000>FLAGS</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>absl</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>flags</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>FLAGS</span>
</code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># 在代码中仅引用模块名 flags (常见情况)</span>
<span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>absl</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>flags</span>
<span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>doctor.who</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>jodie</span>

<span style=color:#000>FLAGS</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>flags</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>FLAGS</span>
</code></pre></div><p>No: (假设当前文件和 jodie.py 都在目录 doctor/who/ 下)</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># 没能清晰指示出作者想要导入的模块和最终被导入的模块</span>
<span style=color:#8f5902;font-style:italic># 实际导入的模块将取决于`sys.path`</span>
<span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>jodie</span>
</code></pre></div><p>不应假定主入口脚本所在的目录就在<code>sys.path</code>中，虽然这种情况是存在的。当主入口脚本所在目录不在<code>sys.path</code>中时，代码将假设<code>import jodie</code>是导入的一个第三方库或者是一个名为<code>jodie</code>的顶层包，而不是本地的<code>jodie.py</code></p>
</li>
</ul>
<h2 id=异常>异常</h2>
<p>允许使用异常, 但必须小心</p>
<ul>
<li>
<p>定义:</p>
<p>异常是一种跳出代码块的正常控制流来处理错误或者其它异常条件的方式.</p>
</li>
<li>
<p>优点:</p>
<p>正常操作代码的控制流不会和错误处理代码混在一起. 当某种条件发生时, 它也允许控制流跳过多个框架. 例如, 一步跳出N个嵌套的函数, 而不必继续执行错误的代码.</p>
</li>
<li>
<p>缺点:</p>
<p>可能会导致让人困惑的控制流. 调用库时容易错过错误情况.</p>
</li>
<li>
<p>结论:</p>
<p>异常必须遵守特定条件:</p>
<ul>
<li>
<p>优先合理的使用内置异常类.比如 <code>ValueError</code> 指示了一个程序错误, 比如在方法需要正数的情况下传递了一个负数错误.不要使用 <code>assert</code> 语句来验证公共API的参数值. <code>assert</code> 是用来保证内部正确性的,而不是用来强制纠正参数使用.若需要使用异常来指示某些意外情况,不要用 <code>assert</code>,用 <code>raise</code> 语句,例如:</p>
<p>Yes:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>connect_to_next_port</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>minimum</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#204a87>int</span><span style=color:#000;font-weight:700>:</span>
    <span style=color:#4e9a06>&#34;&#34;&#34;Connects to the next available port.
</span><span style=color:#4e9a06>
</span><span style=color:#4e9a06>    Args:
</span><span style=color:#4e9a06>        minimum: A port value greater or equal to 1024.
</span><span style=color:#4e9a06>    Returns:
</span><span style=color:#4e9a06>        The new minimum port.
</span><span style=color:#4e9a06>    Raises:
</span><span style=color:#4e9a06>        ConnectionError: If no available port is found.
</span><span style=color:#4e9a06>    &#34;&#34;&#34;</span>
    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>minimum</span> <span style=color:#ce5c00;font-weight:700>&lt;</span> <span style=color:#0000cf;font-weight:700>1024</span><span style=color:#000;font-weight:700>:</span>
        <span style=color:#8f5902;font-style:italic># Note that this raising of ValueError is not mentioned in the doc</span>
        <span style=color:#8f5902;font-style:italic># string&#39;s &#34;Raises:&#34; section because it is not appropriate to</span>
        <span style=color:#8f5902;font-style:italic># guarantee this specific behavioral reaction to API misuse.</span>
        <span style=color:#204a87;font-weight:700>raise</span> <span style=color:#c00;font-weight:700>ValueError</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>f</span><span style=color:#4e9a06>&#39;Min. port must be at least 1024, not </span><span style=color:#4e9a06>{</span><span style=color:#000>minimum</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>.&#39;</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#000>port</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>_find_next_open_port</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>minimum</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#204a87;font-weight:700>not</span> <span style=color:#000>port</span><span style=color:#000;font-weight:700>:</span>
        <span style=color:#204a87;font-weight:700>raise</span> <span style=color:#c00;font-weight:700>ConnectionError</span><span style=color:#000;font-weight:700>(</span>
            <span style=color:#4e9a06>f</span><span style=color:#4e9a06>&#39;Could not connect to service on port </span><span style=color:#4e9a06>{</span><span style=color:#000>minimum</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06> or higher.&#39;</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>port</span> <span style=color:#ce5c00;font-weight:700>&gt;=</span> <span style=color:#000>minimum</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>(</span>
        <span style=color:#4e9a06>f</span><span style=color:#4e9a06>&#39;Unexpected port </span><span style=color:#4e9a06>{</span><span style=color:#000>port</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06> when minimum was </span><span style=color:#4e9a06>{</span><span style=color:#000>minimum</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>.&#39;</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>port</span><span style=color:#a40000>`</span><span style=color:#000>No</span><span style=color:#000;font-weight:700>:</span><span style=color:#a40000>`</span><span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>connect_to_next_port</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>minimum</span><span style=color:#000;font-weight:700>):</span>
</code></pre></div><p>No:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>connect_to_next_port</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>minimum</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#204a87>int</span><span style=color:#000;font-weight:700>:</span>
    <span style=color:#4e9a06>&#34;&#34;&#34;Connects to the next available port.
</span><span style=color:#4e9a06>
</span><span style=color:#4e9a06>    Args:
</span><span style=color:#4e9a06>        minimum: A port value greater or equal to 1024.
</span><span style=color:#4e9a06>    Returns:
</span><span style=color:#4e9a06>        The new minimum port.
</span><span style=color:#4e9a06>    &#34;&#34;&#34;</span>
    <span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>minimum</span> <span style=color:#ce5c00;font-weight:700>&gt;=</span> <span style=color:#0000cf;font-weight:700>1024</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Minimum port must be at least 1024.&#39;</span>
    <span style=color:#000>port</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>_find_next_open_port</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>minimum</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>port</span> <span style=color:#204a87;font-weight:700>is</span> <span style=color:#204a87;font-weight:700>not</span> <span style=color:#204a87;font-weight:700>None</span>
    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>port</span>
</code></pre></div></li>
<li>
<p>模块或包应该定义自己的特定域的异常基类, 这个基类应该从内建的Exception类继承. 模块的异常基类后缀应该叫做 <code>Error</code>.</p>
</li>
<li>
<p>永远不要使用 <code>except:</code> 语句来捕获所有异常, 也不要捕获 <code>Exception</code> 或者 <code>StandardError</code> , 除非:</p>
<ul>
<li>
<p>你打算重新触发该异常</p>
</li>
<li>
<p>或者你已经在当前线程的最外层(记得还是要打印一条错误消息).</p>
</li>
</ul>
<p>在异常这方面, Python非常宽容, <code>except:</code> 真的会捕获包括Python语法错误在内的任何错误. 使用 <code>except:</code> 很容易隐藏真正的bug.</p>
</li>
<li>
<p>尽量减少try/except块中的代码量. try块的体积越大, 期望之外的异常就越容易被触发. 这种情况下, try/except块将隐藏真正的错误.</p>
</li>
<li>
<p>使用finally子句来执行那些无论try块中有没有异常都应该被执行的代码. 这对于清理资源常常很有用, 例如关闭文件.</p>
</li>
</ul>
</li>
</ul>
<h2 id=全局变量>全局变量</h2>
<p>避免全局变量</p>
<ul>
<li>
<p>定义:</p>
<p>定义在模块级的变量或者类变量</p>
</li>
<li>
<p>优点:</p>
<p>偶尔有用</p>
</li>
<li>
<p>缺点:</p>
<p>导入时可能改变模块行为, 因为导入模块时会对模块级变量赋值</p>
</li>
<li>
<p>结论:</p>
<p>避免使用全局变量. 鼓励使用模块级的常量，例如 <code>MAX_HOLY_HANDGRENADE_COUNT = 3</code>。注意常量命名必须全部大写，用<code>_</code>分隔，并在名称前<code>_</code>使之成为模块内部变量，具体参见<a href=../python_style_rules/#%E5%91%BD%E5%90%8D>Naming</a>。</p>
<p>若必须要使用全局变量，应在模块内声明全局变量，外部访问必须通过模块级的公共函数.具体参见<a href=../python_style_rules/#%E5%91%BD%E5%90%8D>Naming</a>。</p>
</li>
</ul>
<h2 id=嵌套局部内部类或函数>嵌套/局部/内部类或函数</h2>
<p>使用内部类或者嵌套函数可以用来覆盖某些局部变量.</p>
<ul>
<li>
<p>定义:</p>
<p>类可以定义在方法, 函数或者类中. 函数可以定义在方法或函数中. 封闭区间中定义的变量对嵌套函数是只读的. (译者注:即内嵌函数可以读外部函数中定义的变量,但是无法改写,除非使用 nonlocal)</p>
</li>
<li>
<p>优点:</p>
<p>允许定义仅用于有效范围的工具类和函数.在装饰器中比较常用.</p>
</li>
<li>
<p>缺点:</p>
<p>嵌套类或局部类的实例不能序列化(pickled). 内嵌的函数和类无法直接测试.同时内嵌函数和类会使外部函数的可读性变差.</p>
</li>
<li>
<p>结论:</p>
<p>使用内部类或者内嵌函数可以忽视一些警告.但是应该避免使用内嵌函数或类,除非是想覆盖某些值.若想对模块的用户隐藏某个函数,不要采用嵌套它来隐藏,应该在需要被隐藏的方法的模块级名称加<code>_</code>前缀,这样它依然是可以被测试的.</p>
</li>
</ul>
<h2 id=推导式生成式>推导式&生成式</h2>
<p>可以在简单情况下使用</p>
<ul>
<li>
<p>定义:</p>
<p>列表、字典和集合的推导&生成式提供了一种简洁高效的方式来创建容器和迭代器, 而不必借助map(), filter(), 或者lambda.(译者注: 元组是没有推导式的, <code>()</code> 内加类似推导式的句式返回的是个生成器)</p>
</li>
<li>
<p>优点:</p>
<p>简单的列表推导可以比其它的列表创建方法更加清晰简单. 生成器表达式可以十分高效, 因为它们避免了创建整个列表.</p>
</li>
<li>
<p>缺点:</p>
<p>复杂的列表推导或者生成器表达式可能难以阅读.</p>
</li>
<li>
<p>结论:</p>
<p>适用于简单情况. 每个部分应该单独置于一行: 映射表达式, for语句, 过滤器表达式. 禁止多重for语句或过滤器表达式. 复杂情况下还是使用循环.</p>
<p>Yes:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#000>result</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[</span><span style=color:#000>mapping_expr</span> <span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>value</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>iterable</span> <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>filter_expr</span><span style=color:#000;font-weight:700>]</span>
<span style=color:#000>result</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[{</span><span style=color:#4e9a06>&#39;key&#39;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>value</span><span style=color:#000;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>value</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>iterable</span>
          <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>a_long_filter_expression</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>value</span><span style=color:#000;font-weight:700>)]</span>
<span style=color:#000>result</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[</span><span style=color:#000>complicated_transform</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>x</span><span style=color:#000;font-weight:700>)</span>
          <span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>x</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>iterable</span> <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>predicate</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>x</span><span style=color:#000;font-weight:700>)]</span>

<span style=color:#000>descriptive_name</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[</span>
    <span style=color:#000>transform</span><span style=color:#000;font-weight:700>({</span><span style=color:#4e9a06>&#39;key&#39;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;value&#39;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>value</span><span style=color:#000;font-weight:700>},</span> <span style=color:#000>color</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;black&#39;</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>value</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>generate_iterable</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>some_input</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>complicated_condition_is_met</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>value</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000;font-weight:700>]</span>

<span style=color:#000>result</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[]</span>
<span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>x</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#204a87>range</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#000;font-weight:700>):</span>
    <span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>y</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#204a87>range</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>):</span>
        <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>x</span> <span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>y</span> <span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#0000cf;font-weight:700>10</span><span style=color:#000;font-weight:700>:</span>
            <span style=color:#000>result</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>append</span><span style=color:#000;font-weight:700>((</span><span style=color:#000>x</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>y</span><span style=color:#000;font-weight:700>))</span>

<span style=color:#204a87;font-weight:700>return</span> <span style=color:#000;font-weight:700>{</span><span style=color:#000>x</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>complicated_transform</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>x</span><span style=color:#000;font-weight:700>)</span>
        <span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>x</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>long_generator_function</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>parameter</span><span style=color:#000;font-weight:700>)</span>
        <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>x</span> <span style=color:#204a87;font-weight:700>is</span> <span style=color:#204a87;font-weight:700>not</span> <span style=color:#204a87;font-weight:700>None</span><span style=color:#000;font-weight:700>}</span>

<span style=color:#000>squares_generator</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>x</span><span style=color:#ce5c00;font-weight:700>**</span><span style=color:#0000cf;font-weight:700>2</span> <span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>x</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#204a87>range</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#000;font-weight:700>))</span>
<span style=color:#000>unique_names</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>{</span><span style=color:#000>user</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>name</span> <span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>user</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>users</span> <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>user</span> <span style=color:#204a87;font-weight:700>is</span> <span style=color:#204a87;font-weight:700>not</span> <span style=color:#204a87;font-weight:700>None</span><span style=color:#000;font-weight:700>}</span>
<span style=color:#000>eat</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>jelly_bean</span> <span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>jelly_bean</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>jelly_beans</span>
    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>jelly_bean</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>color</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#39;black&#39;</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><p>No:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#000>result</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[</span><span style=color:#000>complicated_transform</span><span style=color:#000;font-weight:700>(</span>
              <span style=color:#000>x</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>some_argument</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>x</span><span style=color:#ce5c00;font-weight:700>+</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>)</span>
          <span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>x</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>iterable</span> <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>predicate</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>x</span><span style=color:#000;font-weight:700>)]</span>
<span style=color:#000>result</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[(</span><span style=color:#000>x</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>y</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>x</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#204a87>range</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>y</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#204a87>range</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>x</span> <span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>y</span> <span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#0000cf;font-weight:700>10</span><span style=color:#000;font-weight:700>]</span>
<span style=color:#204a87;font-weight:700>return</span> <span style=color:#000;font-weight:700>((</span><span style=color:#000>x</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>y</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>z</span><span style=color:#000;font-weight:700>)</span>
        <span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>x</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>xrange</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>)</span>
        <span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>y</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>xrange</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>)</span>
        <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>x</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#000>y</span>
        <span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>z</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>xrange</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>)</span>
        <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>y</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#000>z</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div></li>
</ul>
<h2 id=默认迭代器和操作符>默认迭代器和操作符</h2>
<p>如果类型支持, 就使用默认迭代器和操作符. 比如列表, 字典及文件等.</p>
<ul>
<li>
<p>定义:</p>
<p>容器类型, 像字典和列表, 定义了默认的迭代器和关系测试操作符(&ldquo;in"和"not in&rdquo;)</p>
</li>
<li>
<p>优点:</p>
<p>默认操作符和迭代器简单高效, 它们直接表达了操作, 没有额外的方法调用. 使用默认操作符的函数是通用的. 它可以用于支持该操作的任何类型.</p>
</li>
<li>
<p>缺点:</p>
<p>你没法通过阅读方法名来区分对象的类型(例如, <code>has_key()</code>意味着字典). 不过这也是优点.</p>
</li>
<li>
<p>结论:</p>
<p>如果类型支持, 就使用默认迭代器和操作符, 例如列表, 字典和文件. 内建类型也定义了迭代器方法. 优先考虑这些方法, 而不是那些返回列表的方法. 当然，这样遍历容器时，你将不能修改容器.</p>
<p>Yes:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>key</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>adict</span><span style=color:#000;font-weight:700>:</span> <span style=color:#ce5c00;font-weight:700>...</span>
<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>key</span> <span style=color:#204a87;font-weight:700>not</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>adict</span><span style=color:#000;font-weight:700>:</span> <span style=color:#ce5c00;font-weight:700>...</span>
<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>obj</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>alist</span><span style=color:#000;font-weight:700>:</span> <span style=color:#ce5c00;font-weight:700>...</span>
<span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>line</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>afile</span><span style=color:#000;font-weight:700>:</span> <span style=color:#ce5c00;font-weight:700>...</span>
<span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>k</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>v</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#204a87>dict</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>iteritems</span><span style=color:#000;font-weight:700>():</span> <span style=color:#ce5c00;font-weight:700>...</span>
<span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>k</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>v</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>six</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>iteritems</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>adict</span><span style=color:#000;font-weight:700>):</span> <span style=color:#ce5c00;font-weight:700>...</span>
</code></pre></div><p>No:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>key</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>adict</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>keys</span><span style=color:#000;font-weight:700>():</span> <span style=color:#ce5c00;font-weight:700>...</span>
<span style=color:#204a87;font-weight:700>if</span> <span style=color:#204a87;font-weight:700>not</span> <span style=color:#000>adict</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>has_key</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>):</span> <span style=color:#ce5c00;font-weight:700>...</span>
<span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>line</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>afile</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>readlines</span><span style=color:#000;font-weight:700>():</span> <span style=color:#ce5c00;font-weight:700>...</span>
<span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>k</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>v</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#204a87>dict</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>iteritems</span><span style=color:#000;font-weight:700>():</span> <span style=color:#ce5c00;font-weight:700>...</span>
</code></pre></div></li>
</ul>
<h2 id=生成器>生成器</h2>
<p>按需使用生成器.</p>
<ul>
<li>
<p>定义:</p>
<p>所谓生成器函数, 就是每当它执行一次生成(yield)语句, 它就返回一个迭代器, 这个迭代器生成一个值. 生成值后, 生成器函数的运行状态将被挂起, 直到下一次生成.</p>
</li>
<li>
<p>优点:</p>
<p>简化代码, 因为每次调用时, 局部变量和控制流的状态都会被保存. 比起一次创建一系列值的函数, 生成器使用的内存更少.</p>
</li>
<li>
<p>缺点:</p>
<p>没有.</p>
</li>
<li>
<p>结论:</p>
<p>鼓励使用. 注意在生成器函数的文档字符串中使用"Yields:&ldquo;而不是"Returns:&rdquo;.</p>
</li>
</ul>
<h2 id=lambda函数>Lambda函数</h2>
<p>适用于单行函数</p>
<ul>
<li>
<p>定义:</p>
<p>与语句相反, lambda在一个表达式中定义匿名函数. 常用于为 <code>map()</code> 和 <code>filter()</code> 之类的高阶函数定义回调函数或者操作符.</p>
</li>
<li>
<p>优点:</p>
<p>方便.</p>
</li>
<li>
<p>缺点:</p>
<p>比本地函数更难阅读和调试. 没有函数名意味着堆栈跟踪更难理解. 由于lambda函数通常只包含一个表达式, 因此其表达能力有限.</p>
</li>
<li>
<p>结论:</p>
<p>适用于单行函数. 如果代码超过60-80个字符, 最好还是定义成常规(嵌套)函数.对于常见的操作符，例如乘法操作符，使用 <code>operator</code> 模块中的函数以代替lambda函数. 例如, 推荐使用 <code>operator.mul</code> , 而不是 <code>lambda x, y: x * y</code> .</p>
</li>
</ul>
<h2 id=条件表达式>条件表达式</h2>
<p>适用于单行函数</p>
<ul>
<li>
<p>定义:</p>
<p>条件表达式(又名三元运算符)是对于if语句的一种更为简短的句法规则. 例如: <code>x = 1 if cond else 2</code> .</p>
</li>
<li>
<p>优点:</p>
<p>比if语句更加简短和方便.</p>
</li>
<li>
<p>缺点:</p>
<p>比if语句难于阅读. 如果表达式很长， 难于定位条件.</p>
</li>
<li>
<p>结论:</p>
<p>适用于单行函数. 写法上推荐真实表达式,if表达式,else表达式每个独占一行.在其他情况下，推荐使用完整的if语句.</p>
<p>Yes:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#000>one_line</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#39;yes&#39;</span> <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>predicate</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>value</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>else</span> <span style=color:#4e9a06>&#39;no&#39;</span>
<span style=color:#000>slightly_split</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;yes&#39;</span> <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>predicate</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>value</span><span style=color:#000;font-weight:700>)</span>
                  <span style=color:#204a87;font-weight:700>else</span> <span style=color:#4e9a06>&#39;no, nein, nyet&#39;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>the_longest_ternary_style_that_can_be_done</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>(</span>
    <span style=color:#4e9a06>&#39;yes, true, affirmative, confirmed, correct&#39;</span>
    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>predicate</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>value</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#204a87;font-weight:700>else</span> <span style=color:#4e9a06>&#39;no, false, negative, nay&#39;</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><p>No:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#000>bad_line_breaking</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;yes&#39;</span> <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>predicate</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>value</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>else</span>
                     <span style=color:#4e9a06>&#39;no&#39;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>portion_too_long</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;yes&#39;</span>
                    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>some_long_module</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>some_long_predicate_function</span><span style=color:#000;font-weight:700>(</span>
                        <span style=color:#000>really_long_variable_name</span><span style=color:#000;font-weight:700>)</span>
                    <span style=color:#204a87;font-weight:700>else</span> <span style=color:#4e9a06>&#39;no, false, negative, nay&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#a40000>`</span>
</code></pre></div></li>
</ul>
<h2 id=默认参数值>默认参数值</h2>
<p>适用于大部分情况.</p>
<ul>
<li>
<p>定义:</p>
<p>你可以在函数参数列表的最后指定变量的值, 例如, <code>def foo(a, b = 0):</code> . 如果调用foo时只带一个参数, 则b被设为0. 如果带两个参数, 则b的值等于第二个参数.</p>
</li>
<li>
<p>优点:</p>
<p>你经常会碰到一些使用大量默认值的函数, 但偶尔(比较少见)你想要覆盖这些默认值. 默认参数值提供了一种简单的方法来完成这件事, 你不需要为这些罕见的例外定义大量函数. 同时, Python也不支持重载方法和函数, 默认参数是一种"仿造"重载行为的简单方式.</p>
</li>
<li>
<p>缺点:</p>
<p>默认参数只在模块加载时求值一次. 如果参数是列表或字典之类的可变类型, 这可能会导致问题. 如果函数修改了对象(例如向列表追加项), 默认值就被修改了.</p>
</li>
<li>
<p>结论:</p>
<p>鼓励使用, 不过有如下注意事项:不要在函数或方法定义中使用可变对象作为默认值.</p>
<p>Yes:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>a</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>b</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>None</span><span style=color:#000;font-weight:700>):</span>
    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>b</span> <span style=color:#204a87;font-weight:700>is</span> <span style=color:#204a87;font-weight:700>None</span><span style=color:#000;font-weight:700>:</span>
        <span style=color:#000>b</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[]</span>
<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>a</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>b</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Optional</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>Sequence</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>None</span><span style=color:#000;font-weight:700>):</span>
    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>b</span> <span style=color:#204a87;font-weight:700>is</span> <span style=color:#204a87;font-weight:700>None</span><span style=color:#000;font-weight:700>:</span>
        <span style=color:#000>b</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[]</span>
<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>a</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>b</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Sequence</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>()):</span>  <span style=color:#8f5902;font-style:italic># Empty tuple OK since tuples are immutable</span>
    <span style=color:#ce5c00;font-weight:700>...</span>
</code></pre></div><p>No:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>a</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>b</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000;font-weight:700>[]):</span>
    <span style=color:#204a87;font-weight:700>pass</span>
<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>a</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>b</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>time</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>time</span><span style=color:#000;font-weight:700>()):</span>  <span style=color:#8f5902;font-style:italic># The time the module was loaded???</span>
    <span style=color:#204a87;font-weight:700>pass</span>
<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>a</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>b</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>FLAGS</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>my_thing</span><span style=color:#000;font-weight:700>):</span>  <span style=color:#8f5902;font-style:italic># sys.argv has not yet been parsed...</span>
    <span style=color:#204a87;font-weight:700>pass</span>
<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>a</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>b</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Mapping</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>{}):</span>  <span style=color:#8f5902;font-style:italic># Could still get passed to unchecked code</span>
    <span style=color:#204a87;font-weight:700>pass</span>
</code></pre></div></li>
</ul>
<h2 id=特性properties>特性(properties)</h2>
<p>(译者注:参照fluent python.这里将 &ldquo;property&rdquo; 译为"特性",而 &ldquo;attribute&rdquo; 译为属性. python中数据的属性和处理数据的方法统称属性"(arrtibute)", 而在不改变类接口的前提下用来修改数据属性的存取方法我们称为"特性(property)".)</p>
<p>访问和设置数据成员时, 你通常会使用简单, 轻量级的访问和设置函数.建议使用特性(properties)来代替它们.</p>
<ul>
<li>
<p>定义:</p>
<p>一种用于包装方法调用的方式. 当运算量不大, 它是获取和设置属性(attribute)的标准方式.</p>
</li>
<li>
<p>优点:</p>
<p>通过消除简单的属性(attribute)访问时显式的get和set方法调用, 可读性提高了. 允许懒惰的计算. 用Pythonic的方式来维护类的接口. 就性能而言, 当直接访问变量是合理的, 添加访问方法就显得琐碎而无意义. 使用特性(properties)可以绕过这个问题. 将来也可以在不破坏接口的情况下将访问方法加上.</p>
</li>
<li>
<p>缺点:</p>
<p>特性(properties)是在get和set方法声明后指定, 这需要使用者在接下来的代码中注意: set和get是用于特性(properties)的(除了用 <code>@property</code> 装饰器创建的只读属性). 必须继承自object类. 可能隐藏比如操作符重载之类的副作用. 继承时可能会让人困惑. (译者注:这里没有修改原始翻译,其实就是 @property 装饰器是不会被继承的)</p>
</li>
<li>
<p>结论:</p>
<p>你通常习惯于使用访问或设置方法来访问或设置数据, 它们简单而轻量. 不过我们建议你在新的代码中使用属性. 只读属性应该用<code>@property</code><a href=./#%E5%87%BD%E6%95%B0%E4%B8%8E%E6%96%B9%E6%B3%95%E8%A3%85%E9%A5%B0%E5%99%A8>装饰器</a> 来创建.
如果子类没有覆盖属性, 那么属性的继承可能看上去不明显. 因此使用者必须确保访问方法间接被调用, 以保证子类中的重载方法被属性调用(使用模板方法设计模式).</p>
<p>Yes:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>math</span>
<span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>Square</span><span style=color:#000;font-weight:700>:</span>
    <span style=color:#4e9a06>&#34;&#34;&#34;A square with two properties: a writable area and a read-only perimeter.
</span><span style=color:#4e9a06>
</span><span style=color:#4e9a06>    To use:
</span><span style=color:#4e9a06>    &gt;&gt;&gt; sq = Square(3)
</span><span style=color:#4e9a06>    &gt;&gt;&gt; sq.area
</span><span style=color:#4e9a06>    9
</span><span style=color:#4e9a06>    &gt;&gt;&gt; sq.perimeter
</span><span style=color:#4e9a06>    12
</span><span style=color:#4e9a06>    &gt;&gt;&gt; sq.area = 16
</span><span style=color:#4e9a06>    &gt;&gt;&gt; sq.side
</span><span style=color:#4e9a06>    4
</span><span style=color:#4e9a06>    &gt;&gt;&gt; sq.perimeter
</span><span style=color:#4e9a06>    16
</span><span style=color:#4e9a06>    &#34;&#34;&#34;</span>

    <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>__init__</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>side</span><span style=color:#000;font-weight:700>):</span>
        <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>side</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>side</span>

    <span style=color:#5c35cc;font-weight:700>@property</span>
    <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>area</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>):</span>
        <span style=color:#4e9a06>&#34;&#34;&#34;Area of the square.&#34;&#34;&#34;</span>
        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>_get_area</span><span style=color:#000;font-weight:700>()</span>

    <span style=color:#5c35cc;font-weight:700>@area</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>setter</span>
    <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>area</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>area</span><span style=color:#000;font-weight:700>):</span>
        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>_set_area</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>area</span><span style=color:#000;font-weight:700>)</span>

    <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>_get_area</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>):</span>
        <span style=color:#4e9a06>&#34;&#34;&#34;Indirect accessor to calculate the &#39;area&#39; property.&#34;&#34;&#34;</span>
        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>side</span> <span style=color:#ce5c00;font-weight:700>**</span> <span style=color:#0000cf;font-weight:700>2</span>

    <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>_set_area</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>area</span><span style=color:#000;font-weight:700>):</span>
        <span style=color:#4e9a06>&#34;&#34;&#34;Indirect setter to set the &#39;area&#39; property.&#34;&#34;&#34;</span>
        <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>side</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>math</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>sqrt</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>area</span><span style=color:#000;font-weight:700>)</span>

    <span style=color:#5c35cc;font-weight:700>@property</span>
    <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>perimeter</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>):</span>
        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>side</span> <span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#0000cf;font-weight:700>4</span>
</code></pre></div></li>
</ul>
<h2 id=truefalse的求值>True/False的求值</h2>
<p>尽可能使用隐式false</p>
<ul>
<li>
<p>定义:</p>
<p>Python在布尔上下文中会将某些值求值为false. 按简单的直觉来讲, 就是所有的"空"值都被认为是false. 因此0， None, [], {}, "" 都被认为是false.</p>
</li>
<li>
<p>优点:</p>
<p>使用Python布尔值的条件语句更易读也更不易犯错. 大部分情况下, 也更快.</p>
</li>
<li>
<p>缺点:</p>
<p>对C/C++开发人员来说, 可能看起来有点怪.</p>
</li>
<li>
<p>结论:</p>
<p>尽可能使用隐式的false, 例如: 使用 <code>if foo:</code> 而不是 <code>if foo != []:</code> . 不过还是有一些注意事项需要你铭记在心:</p>
<ul>
<li>对于判断单例对象的值是否为<code>None</code>时,使用 <code>if foo is None</code> 或者 <code>is not None</code>.当你要测试一个默认值是<code>None</code>的变量或参数是否被设为其它值. 这个值在布尔语义下可能是false!(译者注: <code>is</code> 比较的是对象的id(), 这个函数返回的通常是对象的内存地址,考虑到CPython的对象重用机制,可能会出现生命周不重叠的两个对象会有相同的id)</li>
<li>永远不要用==将一个布尔量与false相比较. 使用 <code>if not x:</code> 代替. 如果你需要区分false和None, 你应该用像 <code>if not x and x is not None:</code></li>
<li>这样的语句.对于序列(字符串, 列表, 元组), 要注意空序列是false. 因此 <code>if not seq:</code> 或者 <code>if seq:</code> 比 <code>if len(seq):</code> 或 <code>if not len(seq):</code> 要更好.</li>
<li>处理整数时, 使用隐式false可能会得不偿失(即不小心将None当做0来处理). 你可以将一个已知是整型(且不是len()的返回结果)的值与0比较.</li>
</ul>
<p>Yes:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>if</span> <span style=color:#204a87;font-weight:700>not</span> <span style=color:#000>users</span><span style=color:#000;font-weight:700>:</span>
    <span style=color:#204a87>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;no users&#39;</span><span style=color:#000;font-weight:700>)</span>

<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>:</span>
    <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>handle_zero</span><span style=color:#000;font-weight:700>()</span>

<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>%</span> <span style=color:#0000cf;font-weight:700>10</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>:</span>
    <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>handle_multiple_of_ten</span><span style=color:#000;font-weight:700>()</span>

<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>f</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>x</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>None</span><span style=color:#000;font-weight:700>):</span>
    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>x</span> <span style=color:#204a87;font-weight:700>is</span> <span style=color:#204a87;font-weight:700>None</span><span style=color:#000;font-weight:700>:</span>
        <span style=color:#000>x</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[]</span>
</code></pre></div><p>No:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>if</span> <span style=color:#204a87>len</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>users</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>:</span>
    <span style=color:#204a87>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;no users&#39;</span><span style=color:#000;font-weight:700>)</span>

<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>foo</span> <span style=color:#204a87;font-weight:700>is</span> <span style=color:#204a87;font-weight:700>not</span> <span style=color:#204a87;font-weight:700>None</span> <span style=color:#204a87;font-weight:700>and</span> <span style=color:#204a87;font-weight:700>not</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>:</span>
    <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>handle_zero</span><span style=color:#000;font-weight:700>()</span>

<span style=color:#204a87;font-weight:700>if</span> <span style=color:#204a87;font-weight:700>not</span> <span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>%</span> <span style=color:#0000cf;font-weight:700>10</span><span style=color:#000;font-weight:700>:</span>
    <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>handle_multiple_of_ten</span><span style=color:#000;font-weight:700>()</span>

<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>f</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>x</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>None</span><span style=color:#000;font-weight:700>):</span>
    <span style=color:#000>x</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>x</span> <span style=color:#204a87;font-weight:700>or</span> <span style=color:#000;font-weight:700>[]</span>
</code></pre></div><p>注意<code>'0'</code>(字符串<code>0</code>)会被当做true.</p>
</li>
</ul>
<h2 id=词法作用域lexical-scoping>词法作用域(Lexical Scoping)</h2>
<p>推荐使用</p>
<ul>
<li>
<p>定义:</p>
<p>嵌套的Python函数可以引用外层函数中定义的变量, 但是不能够对它们赋值. 变量绑定的解析是使用词法作用域, 也就是基于静态的程序文本. 对一个块中的某个名称的任何赋值都会导致Python将对该名称的全部引用当做局部变量, 甚至是赋值前的处理. 如果碰到global声明, 该名称就会被视作全局变量.
一个使用这个特性的例子:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>get_adder</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>summand1</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87>float</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>Callable</span><span style=color:#000;font-weight:700>[[</span><span style=color:#204a87>float</span><span style=color:#000;font-weight:700>],</span> <span style=color:#204a87>float</span><span style=color:#000;font-weight:700>]:</span>
    <span style=color:#4e9a06>&#34;&#34;&#34;Returns a function that adds numbers to a given number.&#34;&#34;&#34;</span>
    <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>adder</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>summand2</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87>float</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#204a87>float</span><span style=color:#000;font-weight:700>:</span>
        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>summand1</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#000>summand2</span>

    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>adder</span>
</code></pre></div></li>
<li>
<p>优点:</p>
<p>通常可以带来更加清晰，优雅的代码。</p>
</li>
<li>
<p>缺点:</p>
<p>可能导致让人迷惑的bug. 例如下面这个依据 <a href=http://www.python.org/dev/peps/pep-0227/>PEP-0227</a> 的例子:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>4</span>
<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>x</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Iterable</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87>int</span><span style=color:#000;font-weight:700>]):</span>
    <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>bar</span><span style=color:#000;font-weight:700>():</span>
        <span style=color:#204a87>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>i</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>end</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;&#39;</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#8f5902;font-style:italic># ...</span>
    <span style=color:#8f5902;font-style:italic># A bunch of code here</span>
    <span style=color:#8f5902;font-style:italic># ...</span>
    <span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>i</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>x</span><span style=color:#000;font-weight:700>:</span>  <span style=color:#8f5902;font-style:italic># Ah, i *is* local to foo, so this is what bar sees</span>
        <span style=color:#204a87>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>i</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>end</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;&#39;</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#000>bar</span><span style=color:#000;font-weight:700>()</span>
</code></pre></div><p>因此<code>foo([1, 2, 3])</code>会打印<code>1 2 3 3</code>，而不是<code>1 2 3 4</code>。</p>
</li>
<li>
<p>结论:</p>
<p>鼓励使用.</p>
</li>
</ul>
<h2 id=函数与方法装饰器>函数与方法装饰器</h2>
<p>好处很显然, 明智而谨慎的使用装饰器,避免使用 <code>staticmethod</code>以及谨慎使用<code>classmethod</code>.</p>
<ul>
<li>
<p>定义:</p>
<p><a href=https://docs.python.org/3/glossary.html#term-decorator>用于函数及方法的装饰器</a> (也就是@标记). 最常见的装饰器是@classmethod 和@staticmethod, 用于将常规函数转换成类方法或静态方法. 不过, 装饰器语法也允许用户自定义装饰器. 特别地, 对于某个函数 <code>my_decorator</code> , 下面的两段代码是等效的:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>C</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87>object</span><span style=color:#000;font-weight:700>):</span>
    <span style=color:#5c35cc;font-weight:700>@my_decorator</span>
    <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>method</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>):</span>
        <span style=color:#8f5902;font-style:italic># method body</span>
        <span style=color:#ce5c00;font-weight:700>...</span>
</code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>C</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87>object</span><span style=color:#000;font-weight:700>):</span>
    <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>method</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>):</span>
        <span style=color:#8f5902;font-style:italic># method body</span>
        <span style=color:#ce5c00;font-weight:700>...</span>
    <span style=color:#000>method</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>my_decorator</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>method</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div></li>
<li>
<p>优点:</p>
<p>优雅的在函数上指定一些转换. 该转换可能减少一些重复代码, 保持已有函数不变(enforce invariants), 等.</p>
</li>
<li>
<p>缺点:</p>
<p>装饰器可以在函数的参数或返回值上执行任何操作, 这可能导致让人惊异的隐藏行为. 而且, 装饰器在导入时执行. 从装饰器代码中捕获错误并处理是很困难的.</p>
</li>
<li>
<p>结论:</p>
<p>如果好处很显然, 就明智而谨慎的使用装饰器. 装饰器应该遵守和函数一样的导入和命名规则. 装饰器的python文档应该清晰的说明该函数是一个装饰器. 请为装饰器编写单元测试.</p>
<p>避免装饰器自身对外界的依赖(即不要依赖于文件, socket, 数据库连接等), 因为装饰器运行时这些资源可能不可用(由 <code>pydoc</code> 或其它工具导入). 应该保证一个用有效参数调用的装饰器在所有情况下都是成功的.</p>
<p>装饰器是一种特殊形式的"顶级代码". 参考后面关于 <a href=../python_style_rules/#main>Main</a> 的话题.</p>
<p>除非是为了将方法和现有的API集成，否则不要使用 <code>staticmethod</code> .多数情况下，将方法封装成模块级的函数可以达到同样的效果.</p>
<p>谨慎使用 <code>classmethod</code> .通常只在定义备选构造函数，或者写用于修改诸如进程级缓存等必要的全局状态的特定类方法才用。</p>
</li>
</ul>
<h2 id=线程>线程</h2>
<p>不要依赖内建类型的原子性.</p>
<p>虽然Python的内建类型例如字典看上去拥有原子操作, 但是在某些情形下它们仍然不是原子的(即: 如果<code>__hash__</code>或<code>__eq__</code>被实现为Python方法)且它们的原子性是靠不住的. 你也不能指望原子变量赋值(因为这个反过来依赖字典).</p>
<p>优先使用Queue模块的 <code>Queue</code> 数据类型作为线程间的数据通信方式. 另外, 使用threading模块及其锁原语(locking primitives). 了解条件变量的合适使用方式, 这样你就可以使用 <code>threading.Condition</code> 来取代低级别的锁了.</p>
<h2 id=威力过大的特性>威力过大的特性</h2>
<p>避免使用这些特性</p>
<ul>
<li>
<p>定义:</p>
<p>Python是一种异常灵活的语言, 它为你提供了很多花哨的特性, 诸如元类(metaclasses), 字节码访问, 任意编译(on-the-fly compilation), 动态继承, 对象父类重定义(object reparenting), 导入黑客(import hacks), 反射(例如使用<code>getattr()</code>), 系统内修改(modification of system internals), 实现<code>__del__</code>方法‎定制清理‎等等.</p>
</li>
<li>
<p>优点:</p>
<p>强大的语言特性, 能让你的代码更紧凑.</p>
</li>
<li>
<p>缺点:</p>
<p>使用这些很"酷"的特性十分诱人, 但不是绝对必要. 使用奇技淫巧的代码将更加难以阅读和调试. 开始可能还好(对原作者而言), 但当你回顾代码, 它们可能会比那些稍长一点但是很直接的代码更加难以理解.</p>
</li>
<li>
<p>结论:</p>
<p>在你的代码中避免这些特性.当然，利用了这些特性的来编写的一些标准库是值得去使用的，比如<code>abc.ABCMeta</code>、<code>dataclasses</code>、<code>enum</code>等.</p>
</li>
</ul>
<h2 id=代码类型注释>代码类型注释</h2>
<p>你可以根据 <a href=https://www.python.org/dev/peps/pep-0484/>PEP-484</a> 来对 python3 代码进行注释,并使用诸如 <a href=https://github.com/google/pytype>pytype</a> 之类的类型检查工具来检查代码. 类型注释既可以写在源码,也可以写在 <a href=https://www.python.org/dev/peps/pep-0484/#stub-files>pyi</a> 中.推荐尽量写在源码里,对于第三方扩展包,可以写在pyi文件里.</p>
<ul>
<li>
<p>定义:</p>
<p>用于函数参数和返回值的类型注释:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>a</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87>int</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>List</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87>int</span><span style=color:#000;font-weight:700>]:</span>
</code></pre></div><p>也可以使用 <a href=https://www.python.org/dev/peps/pep-0526/>PEP-526</a> 中的语法来声明变量类型:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#000>a</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>SomeType</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>some_func</span><span style=color:#000;font-weight:700>()</span>
</code></pre></div><p>在必须支持老版本 python 运行的代码中则可以这样注释:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#000>a</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>some_func</span><span style=color:#000;font-weight:700>()</span>  <span style=color:#8f5902;font-style:italic># type: SomeType</span>
</code></pre></div></li>
<li>
<p>优点:</p>
<p>可以提高代码可读性和可维护性.同时一些类型检查器可以帮您提早发现一些运行时错误,并降低您使用大威力特性的必要.</p>
</li>
<li>
<p>缺点:</p>
<p>必须时常更新类型声明.过时的类型声明可能会误导您.使用类型检查器会抑制您使用大威力特性.</p>
</li>
<li>
<p>结论:</p>
<p>强烈推荐您在更新代码时使用 python 类型分析.在添加或修改公共API时使用类型注释,在最终构建整个项目前使用 pytype 来进行检查.由于静态分析对于 python 来说还不够成熟,因此可能会出现一些副作用(例如错误推断的类型)可能会阻碍项目的部署.在这种情况下,建议作者添加一个 TODO 注释或者链接,来描述当前构建文件或是代码本身中使用类型注释导致的问题.(译者注: 代码类型注释在帮助IDE或是vim等进行补全倒是很有效)</p>
</li>
</ul>
<style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style>
<div class=d-print-none>
<h2 class=feedback--title>Feedback</h2>
<p class=feedback--question>Was this page helpful?</p>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button>
<p class="feedback--response feedback--response-yes">
Glad to hear it! Please <a href=https://github.com/TaibiaoGuo/devSpec/discussions/new>tell us how we can improve</a>.
</p>
<p class="feedback--response feedback--response-no">
Sorry to hear that. Please <a href=https://github.com/TaibiaoGuo/devSpec/discussions/new>tell us how we can improve</a>.
</p>
</div>
<script>const yesButton=document.querySelector('.feedback--answer-yes'),noButton=document.querySelector('.feedback--answer-no'),yesResponse=document.querySelector('.feedback--response-yes'),noResponse=document.querySelector('.feedback--response-no'),disableButtons=()=>{yesButton.disabled=!0,noButton.disabled=!0},sendFeedback=b=>{if(typeof ga!='function')return;const a={command:'send',hitType:'event',category:'Helpful',action:'click',label:window.location.pathname,value:b};ga(a.command,a.hitType,a.category,a.action,a.label,a.value)};yesButton.addEventListener('click',()=>{yesResponse.classList.add('feedback--response__visible'),disableButtons(),sendFeedback(1)}),noButton.addEventListener('click',()=>{noResponse.classList.add('feedback--response__visible'),disableButtons(),sendFeedback(0)})</script>
<br>
<div class="text-muted mt-5 pt-3 border-top">
最后修改
September 12, 2021
: <a href=https://github.com/TaibiaoGuo/devSpec/commit/f85e7efe28757d285896c282809981e6b88a7d46>Feature 1.1.0/python (#7) (f85e7ef)</a>
</div>
</div>
</main>
</div>
</div>
<footer class="bg-dark py-5 row d-print-none">
<div class="container-fluid mx-sm-5">
<div class=row>
<div class="col-6 col-sm-4 text-xs-center order-sm-2">
</div>
<div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub>
<a class=text-white target=_blank rel=noopener href=https://github.com/TaibiaoGuo/devSpec aria-label=GitHub>
<i class="fab fa-github"></i>
</a>
</li>
</ul>
</div>
<div class="col-12 col-sm-4 text-center py-2 order-sm-2">
<small class=text-white>&copy; 2021 TaibiaoGuo All Rights Reserved</small>
<small class=ml-1><a href=https://policies.google.com/privacy target=_blank rel=noopener>隐私政策</a></small>
<p class=mt-2><a href=/docs/about/>关于</a></p>
</div>
</div>
</div>
</footer>
</div>
<script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js integrity=sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/mermaid@8.11.2/dist/mermaid.min.js integrity=sha384-m8Pdaep6Qk8sW3J6XhPOiwUww3maU9HxZTLvEfSEB4e1UVvTdHyfJsYmEfYqvwLC crossorigin=anonymous></script>
<script src=/js/tabpane-persist.js></script>
<script src=/js/deflate.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.2/dist/katex.min.css integrity=sha384-Cqd8ihRLum0CCg8rz0hYKPoLZ3uw+gES2rXQXycqnL5pgVQIflxAUDS7ZSjITLb5 crossorigin=anonymous>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.2/dist/katex.min.js integrity=sha384-1Or6BdeNQb0ezrmtGeqQHFpppNd7a/gw29xeiSikBbsb44xu3uAo8c7FwbF5jhbd crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.2/dist/contrib/auto-render.min.js integrity=sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl crossorigin=anonymous onload='renderMathInElement(document.body,{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!1,left:"$",right:"$"}]})'></script>
<script src=/js/main.js></script>
</body>
</html>